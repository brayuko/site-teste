(()=>{var e,t,a,n,r,i={"./node_modules/@amzn/av-experiment-token-js-library/dist/configuration/schema/experimentToken_pb.js":(e,t)=>{"use strict";var a=t.iz={};a.read=function(e,t){return e.readFields(a._readField,{cancellationWinbackToken:null,leavingSoonToken:null,pvCinemaToken:null},t)},a._readField=function(e,t,a){1===e?t.cancellationWinbackToken=n.read(a,a.readVarint()+a.pos):2===e?t.leavingSoonToken=i.read(a,a.readVarint()+a.pos):3===e&&(t.pvCinemaToken=o.read(a,a.readVarint()+a.pos))},a.write=function(e,t){e.cancellationWinbackToken&&t.writeMessage(1,n.write,e.cancellationWinbackToken),e.leavingSoonToken&&t.writeMessage(2,i.write,e.leavingSoonToken),e.pvCinemaToken&&t.writeMessage(3,o.write,e.pvCinemaToken)};var n={};n.read=function(e,t){return e.readFields(n._readField,{TAPS_EXPERIMENT_CANCELLATION_WINBACK_277551:"",cancellationWinbackStringInfo:null,enrollmentId:"",csrfToken:""},t)},n._readField=function(e,t,a){1===e?t.TAPS_EXPERIMENT_CANCELLATION_WINBACK_277551=a.readString():2===e?t.cancellationWinbackStringInfo=r.read(a,a.readVarint()+a.pos):3===e?t.enrollmentId=a.readString():4===e&&(t.csrfToken=a.readString())},n.write=function(e,t){e.TAPS_EXPERIMENT_CANCELLATION_WINBACK_277551&&t.writeStringField(1,e.TAPS_EXPERIMENT_CANCELLATION_WINBACK_277551),e.cancellationWinbackStringInfo&&t.writeMessage(2,r.write,e.cancellationWinbackStringInfo),e.enrollmentId&&t.writeStringField(3,e.enrollmentId),e.csrfToken&&t.writeStringField(4,e.csrfToken)};var r={};r.read=function(e,t){return e.readFields(r._readField,{label:"",confirmationLabel:"",cancellationLabel:"",playbackLabel:"",modalMessage:""},t)},r._readField=function(e,t,a){1===e?t.label=a.readString():2===e?t.confirmationLabel=a.readString():3===e?t.cancellationLabel=a.readString():4===e?t.playbackLabel=a.readString():5===e&&(t.modalMessage=a.readString())},r.write=function(e,t){e.label&&t.writeStringField(1,e.label),e.confirmationLabel&&t.writeStringField(2,e.confirmationLabel),e.cancellationLabel&&t.writeStringField(3,e.cancellationLabel),e.playbackLabel&&t.writeStringField(4,e.playbackLabel),e.modalMessage&&t.writeStringField(5,e.modalMessage)};var i={};i.read=function(e,t){return e.readFields(i._readField,{DV_WEB_XPL_HOVER_LEAVING_291408:"",availabilityChange:null},t)},i._readField=function(e,t,a){1===e?t.DV_WEB_XPL_HOVER_LEAVING_291408=a.readString():2===e&&(t.availabilityChange=s.read(a,a.readVarint()+a.pos))},i.write=function(e,t){e.DV_WEB_XPL_HOVER_LEAVING_291408&&t.writeStringField(1,e.DV_WEB_XPL_HOVER_LEAVING_291408),e.availabilityChange&&t.writeMessage(2,s.write,e.availabilityChange)};var s={};s.read=function(e,t){return e.readFields(s._readField,{changeTime:0,benefitId:"",changeType:0},t)},s._readField=function(e,t,a){1===e?t.changeTime=a.readVarint(!0):2===e?t.benefitId=a.readString():3===e&&(t.changeType=a.readVarint())},s.write=function(e,t){e.changeTime&&t.writeVarintField(1,e.changeTime),e.benefitId&&t.writeStringField(2,e.benefitId),e.changeType&&t.writeVarintField(3,e.changeType)};var o={};o.read=function(e,t){return e.readFields(o._readField,{TAPS_EXPERIMENT_PV_CINEMA_296876:"",brandingMessage:"",logoUrl:""},t)},o._readField=function(e,t,a){1===e?t.TAPS_EXPERIMENT_PV_CINEMA_296876=a.readString():2===e?t.brandingMessage=a.readString():3===e&&(t.logoUrl=a.readString())},o.write=function(e,t){e.TAPS_EXPERIMENT_PV_CINEMA_296876&&t.writeStringField(1,e.TAPS_EXPERIMENT_PV_CINEMA_296876),e.brandingMessage&&t.writeStringField(2,e.brandingMessage),e.logoUrl&&t.writeStringField(3,e.logoUrl)}},"./node_modules/@amzn/av-experiment-token-js-library/dist/src/experimentTokenHelper.js":(e,t,a)=>{"use strict";function n(e,t){if(a=e,!(null!=(n=t)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](a):a instanceof n))throw new TypeError("Cannot call a class as a function");var a,n}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=a("./node_modules/@amzn/av-experiment-token-js-library/dist/configuration/schema/experimentToken_pb.js").iz,s=a("./node_modules/@amzn/av-experiment-token-js-library/node_modules/pbf/index.js"),o=function(){function e(){n(this,e)}var t,a,o;return t=e,(a=[{key:"decode",value:function(e){if(!e)return null;if("undefined"!=typeof window&&void 0!==window.atob){var t=new s(Uint8Array.from(window.atob(e),(function(e){return e.charCodeAt(0)})));return i.read(t)}return t=new s(Buffer.from(e,"base64")),i.read(t)}}])&&r(t.prototype,a),o&&r(t,o),e}();t.default=o},"./node_modules/@amzn/av-experiment-token-js-library/index.js":(e,t,a)=>{t.ExperimentTokenHelper=a("./node_modules/@amzn/av-experiment-token-js-library/dist/src/experimentTokenHelper.js").default},"./node_modules/@amzn/av-experiment-token-js-library/node_modules/ieee754/index.js":(e,t)=>{t.read=function(e,t,a,n,r){var i,s,o=8*r-n-1,l=(1<<o)-1,c=l>>1,d=-7,u=a?r-1:0,p=a?-1:1,m=e[t+u];for(u+=p,i=m&(1<<-d)-1,m>>=-d,d+=o;d>0;i=256*i+e[t+u],u+=p,d-=8);for(s=i&(1<<-d)-1,i>>=-d,d+=n;d>0;s=256*s+e[t+u],u+=p,d-=8);if(0===i)i=1-c;else{if(i===l)return s?NaN:1/0*(m?-1:1);s+=Math.pow(2,n),i-=c}return(m?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,a,n,r,i){var s,o,l,c=8*i-r-1,d=(1<<c)-1,u=d>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:i-1,g=n?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+u>=1?p/l:p*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=d?(o=0,s=d):s+u>=1?(o=(t*l-1)*Math.pow(2,r),s+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;e[a+m]=255&o,m+=g,o/=256,r-=8);for(s=s<<r|o,c+=r;c>0;e[a+m]=255&s,m+=g,s/=256,c-=8);e[a+m-g]|=128*h}},"./node_modules/@amzn/av-experiment-token-js-library/node_modules/pbf/index.js":(e,t,a)=>{"use strict";e.exports=r;var n=a("./node_modules/@amzn/av-experiment-token-js-library/node_modules/ieee754/index.js");function r(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var i=4294967296,s=1/i,o="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function l(e){return e.type===r.Bytes?e.readVarint()+e.pos:e.pos+1}function c(e,t,a){return a?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function d(e,t,a){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));a.realloc(n);for(var r=a.pos-1;r>=e;r--)a.buf[r+n]=a.buf[r]}function u(e,t){for(var a=0;a<e.length;a++)t.writeVarint(e[a])}function p(e,t){for(var a=0;a<e.length;a++)t.writeSVarint(e[a])}function m(e,t){for(var a=0;a<e.length;a++)t.writeFloat(e[a])}function g(e,t){for(var a=0;a<e.length;a++)t.writeDouble(e[a])}function h(e,t){for(var a=0;a<e.length;a++)t.writeBoolean(e[a])}function _(e,t){for(var a=0;a<e.length;a++)t.writeFixed32(e[a])}function f(e,t){for(var a=0;a<e.length;a++)t.writeSFixed32(e[a])}function v(e,t){for(var a=0;a<e.length;a++)t.writeFixed64(e[a])}function b(e,t){for(var a=0;a<e.length;a++)t.writeSFixed64(e[a])}function E(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function y(e,t,a){e[a]=t,e[a+1]=t>>>8,e[a+2]=t>>>16,e[a+3]=t>>>24}function w(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}r.prototype={destroy:function(){this.buf=null},readFields:function(e,t,a){for(a=a||this.length;this.pos<a;){var n=this.readVarint(),r=n>>3,i=this.pos;this.type=7&n,e(r,t,this),this.pos===i&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=E(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=w(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=E(this.buf,this.pos)+E(this.buf,this.pos+4)*i;return this.pos+=8,e},readSFixed64:function(){var e=E(this.buf,this.pos)+w(this.buf,this.pos+4)*i;return this.pos+=8,e},readFloat:function(){var e=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,a,n=this.buf;return t=127&(a=n[this.pos++]),a<128?t:(t|=(127&(a=n[this.pos++]))<<7,a<128?t:(t|=(127&(a=n[this.pos++]))<<14,a<128?t:(t|=(127&(a=n[this.pos++]))<<21,a<128?t:function(e,t,a){var n,r,i=a.buf;if(r=i[a.pos++],n=(112&r)>>4,r<128)return c(e,n,t);if(r=i[a.pos++],n|=(127&r)<<3,r<128)return c(e,n,t);if(r=i[a.pos++],n|=(127&r)<<10,r<128)return c(e,n,t);if(r=i[a.pos++],n|=(127&r)<<17,r<128)return c(e,n,t);if(r=i[a.pos++],n|=(127&r)<<24,r<128)return c(e,n,t);if(r=i[a.pos++],n|=(1&r)<<31,r<128)return c(e,n,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(a=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&o?function(e,t,a){return o.decode(e.subarray(t,a))}(this.buf,t,e):function(e,t,a){var n="",r=t;for(;r<a;){var i,s,o,l=e[r],c=null,d=l>239?4:l>223?3:l>191?2:1;if(r+d>a)break;1===d?l<128&&(c=l):2===d?128==(192&(i=e[r+1]))&&(c=(31&l)<<6|63&i)<=127&&(c=null):3===d?(i=e[r+1],s=e[r+2],128==(192&i)&&128==(192&s)&&((c=(15&l)<<12|(63&i)<<6|63&s)<=2047||c>=55296&&c<=57343)&&(c=null)):4===d&&(i=e[r+1],s=e[r+2],o=e[r+3],128==(192&i)&&128==(192&s)&&128==(192&o)&&((c=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&o)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,d=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),r+=d}return n}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==r.Bytes)return e.push(this.readVarint(t));var a=l(this);for(e=e||[];this.pos<a;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==r.Bytes)return e.push(this.readSVarint());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==r.Bytes)return e.push(this.readBoolean());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==r.Bytes)return e.push(this.readFloat());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==r.Bytes)return e.push(this.readDouble());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==r.Bytes)return e.push(this.readFixed32());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==r.Bytes)return e.push(this.readSFixed32());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==r.Bytes)return e.push(this.readFixed64());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==r.Bytes)return e.push(this.readSFixed64());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===r.Varint)for(;this.buf[this.pos++]>127;);else if(t===r.Bytes)this.pos=this.readVarint()+this.pos;else if(t===r.Fixed32)this.pos+=4;else{if(t!==r.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var a=new Uint8Array(t);a.set(this.buf),this.buf=a,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),y(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),y(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),y(this.buf,-1&e,this.pos),y(this.buf,Math.floor(e*s),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),y(this.buf,-1&e,this.pos),y(this.buf,Math.floor(e*s),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var a,n;e>=0?(a=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(a=~(-e%4294967296))?a=a+1|0:(a=0,n=n+1|0));if(e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,a){a.buf[a.pos++]=127&e|128,e>>>=7,a.buf[a.pos++]=127&e|128,e>>>=7,a.buf[a.pos++]=127&e|128,e>>>=7,a.buf[a.pos++]=127&e|128,e>>>=7,a.buf[a.pos]=127&e}(a,0,t),function(e,t){var a=(7&e)<<4;if(t.buf[t.pos++]|=a|((e>>>=3)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;t.buf[t.pos++]=127&e}(n,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,a){for(var n,r,i=0;i<t.length;i++){if((n=t.charCodeAt(i))>55295&&n<57344){if(!r){n>56319||i+1===t.length?(e[a++]=239,e[a++]=191,e[a++]=189):r=n;continue}if(n<56320){e[a++]=239,e[a++]=191,e[a++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(e[a++]=239,e[a++]=191,e[a++]=189,r=null);n<128?e[a++]=n:(n<2048?e[a++]=n>>6|192:(n<65536?e[a++]=n>>12|224:(e[a++]=n>>18|240,e[a++]=n>>12&63|128),e[a++]=n>>6&63|128),e[a++]=63&n|128)}return a}(this.buf,e,this.pos);var a=this.pos-t;a>=128&&d(t,a,this),this.pos=t-1,this.writeVarint(a),this.pos+=a},writeFloat:function(e){this.realloc(4),n.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),n.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var a=0;a<t;a++)this.buf[this.pos++]=e[a]},writeRawMessage:function(e,t){this.pos++;var a=this.pos;e(t,this);var n=this.pos-a;n>=128&&d(a,n,this),this.pos=a-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,a){this.writeTag(e,r.Bytes),this.writeRawMessage(t,a)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,u,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,p,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,h,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,m,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,g,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,_,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,f,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,v,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,b,t)},writeBytesField:function(e,t){this.writeTag(e,r.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,r.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,r.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,r.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},"./node_modules/@amzn/dvui/dist/Icons/Edit.js":function(e,t,a){var n;a("./node_modules/@amzn/dvui/dist/Icons/Edit.css"),"undefined"!=typeof self&&self,n=function(e){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="./src/components/Icons/Edit.tsx")}({"./node_modules/classnames/index.js":function(e,t,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var s=r.apply(null,n);s&&e.push(s)}else if("object"===i)for(var o in n)a.call(n,o)&&n[o]&&e.push(o)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},"./src/common/Tracker.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTracker=t.Tracker=void 0;class n{constructor(){this.queue=[],this.csm_is_loaded=!1,this.csm_check_count=0,this.add=()=>Date.now(),this.componentMount=(e,t)=>{this.csm_is_loaded?this._logLoadTime(e,t):this.queue.push([e,t])},this._whenCSMLoads=()=>{if("undefined"!=typeof window){const e=window.setInterval((()=>{window.ue&&(this.csm_is_loaded=!0,this.queue.forEach((e=>this._logLoadTime(...e))),this.queue=[]),this.csm_check_count++,(this.csm_check_count>=600||this.csm_is_loaded)&&window.clearInterval(e)}),100)}},this._logLoadTime=(e,t)=>{window.ue.count(`DVUI:${e}`,Date.now()-t)},this._whenCSMLoads()}}t.Tracker=n,t.ActiveTracker=new n},"./src/components/Icons/Edit.tsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Edit=void 0;const n=a("react"),r=a("./node_modules/classnames/index.js"),i=a("./src/common/Tracker.ts"),s=a("./src/components/Icons/Icons.module.scss");class o extends n.Component{constructor(e){super(e),this.displayName="IconEdit",this.tracker=i.ActiveTracker.add()}componentDidMount(){i.ActiveTracker.componentMount("Icon:Edit",this.tracker)}render(){return n.createElement("svg",{className:r(s.icon,s.Edit),viewBox:"0 0 24 24",height:"24",width:"24",role:"img",style:{height:this.props.height||"24",width:this.props.width||"24"},"aria-hidden":"true"},n.createElement("title",null,this.props.title||"Edit"),n.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},n.createElement("title",null,this.props.title||"Edit"),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeWidth:"2"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.87 3L3 17v4h4L22 7.09z"}),n.createElement("path",{d:"M15 7l3 3"}))),"")}}t.Edit=o,t.default=o},"./src/components/Icons/Icons.module.scss":function(e,t,a){e.exports={icon:"_22qEau"}},react:function(t,a){t.exports=e}})},e.exports=n(a("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/Icons/Help.js":function(e,t,a){var n;a("./node_modules/@amzn/dvui/dist/Icons/Help.css"),"undefined"!=typeof self&&self,n=function(e){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="./src/components/Icons/Help.tsx")}({"./node_modules/classnames/index.js":function(e,t,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var s=r.apply(null,n);s&&e.push(s)}else if("object"===i)for(var o in n)a.call(n,o)&&n[o]&&e.push(o)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},"./src/common/Tracker.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTracker=t.Tracker=void 0;class n{constructor(){this.queue=[],this.csm_is_loaded=!1,this.csm_check_count=0,this.add=()=>Date.now(),this.componentMount=(e,t)=>{this.csm_is_loaded?this._logLoadTime(e,t):this.queue.push([e,t])},this._whenCSMLoads=()=>{if("undefined"!=typeof window){const e=window.setInterval((()=>{window.ue&&(this.csm_is_loaded=!0,this.queue.forEach((e=>this._logLoadTime(...e))),this.queue=[]),this.csm_check_count++,(this.csm_check_count>=600||this.csm_is_loaded)&&window.clearInterval(e)}),100)}},this._logLoadTime=(e,t)=>{window.ue.count(`DVUI:${e}`,Date.now()-t)},this._whenCSMLoads()}}t.Tracker=n,t.ActiveTracker=new n},"./src/components/Icons/Help.tsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Help=void 0;const n=a("react"),r=a("./node_modules/classnames/index.js"),i=a("./src/common/Tracker.ts"),s=a("./src/components/Icons/Icons.module.scss");class o extends n.Component{constructor(e){super(e),this.displayName="IconHelp",this.tracker=i.ActiveTracker.add()}componentDidMount(){i.ActiveTracker.componentMount("Icon:Help",this.tracker)}render(){return n.createElement("svg",{className:r(s.icon,s.Help),viewBox:"0 0 24 24",height:"24",width:"24",role:"img",style:{height:this.props.height||"24",width:this.props.width||"24"},"aria-hidden":"true"},n.createElement("title",null,this.props.title||"Help"),n.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},n.createElement("title",null,this.props.title||"Help"),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M11 18v-2h2v2h-2zm1-12c3.401 0 4 1.757 4 2.925 0 1.47-.627 1.88-1.4 2.38-.774.485-1.438 1.061-1.6 1.954l-.072.741H11v-.846c.108-1.32.681-1.716 1.4-2.186.703-.469 1.6-1.013 1.6-1.83 0-.925-1.046-1.454-2-1.454-1.296 0-1.982 1.03-2 2.105H8C8.054 7.623 9.372 6 12 6z",fill:"currentColor"}),n.createElement("circle",{stroke:"currentColor",strokeWidth:"2",cx:"12",cy:"12",r:"9"}))),"")}}t.Help=o,t.default=o},"./src/components/Icons/Icons.module.scss":function(e,t,a){e.exports={icon:"_22qEau"}},react:function(t,a){t.exports=e}})},e.exports=n(a("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/Icons/Lightbulb.js":function(e,t,a){var n;a("./node_modules/@amzn/dvui/dist/Icons/Lightbulb.css"),"undefined"!=typeof self&&self,n=function(e){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="./src/components/Icons/Lightbulb.tsx")}({"./node_modules/classnames/index.js":function(e,t,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var s=r.apply(null,n);s&&e.push(s)}else if("object"===i)for(var o in n)a.call(n,o)&&n[o]&&e.push(o)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},"./src/common/Tracker.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTracker=t.Tracker=void 0;class n{constructor(){this.queue=[],this.csm_is_loaded=!1,this.csm_check_count=0,this.add=()=>Date.now(),this.componentMount=(e,t)=>{this.csm_is_loaded?this._logLoadTime(e,t):this.queue.push([e,t])},this._whenCSMLoads=()=>{if("undefined"!=typeof window){const e=window.setInterval((()=>{window.ue&&(this.csm_is_loaded=!0,this.queue.forEach((e=>this._logLoadTime(...e))),this.queue=[]),this.csm_check_count++,(this.csm_check_count>=600||this.csm_is_loaded)&&window.clearInterval(e)}),100)}},this._logLoadTime=(e,t)=>{window.ue.count(`DVUI:${e}`,Date.now()-t)},this._whenCSMLoads()}}t.Tracker=n,t.ActiveTracker=new n},"./src/components/Icons/Icons.module.scss":function(e,t,a){e.exports={icon:"_22qEau"}},"./src/components/Icons/Lightbulb.tsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lightbulb=void 0;const n=a("react"),r=a("./node_modules/classnames/index.js"),i=a("./src/common/Tracker.ts"),s=a("./src/components/Icons/Icons.module.scss");class o extends n.Component{constructor(e){super(e),this.displayName="IconLightbulb",this.tracker=i.ActiveTracker.add()}componentDidMount(){i.ActiveTracker.componentMount("Icon:Lightbulb",this.tracker)}render(){return n.createElement("svg",{className:r(s.icon,s.Lightbulb),viewBox:"0 0 24 27",height:"27",width:"24",role:"img",style:{height:this.props.height||"27",width:this.props.width||"24"},"aria-hidden":"true"},n.createElement("title",null,this.props.title||"Lightbulb"),n.createElement("svg",{width:"24",height:"27",xmlns:"http://www.w3.org/2000/svg"},n.createElement("title",null,this.props.title||"Lightbulb"),n.createElement("g",{strokeWidth:"2",fill:"none",fillRule:"evenodd"},n.createElement("g",{stroke:"currentColor"},n.createElement("path",{d:"M12 6c1.71 0 6 .9 6 6.3 0 5.4-3.43 8.18-3.43 8.18v3.62l-.86.9H12m0-19c-1.71 0-6 .9-6 6.3 0 5.4 3.43 8.18 3.43 8.18v3.62l.86.9H12",strokeLinecap:"round"}),n.createElement("path",{d:"M7 18h9M9 21h6"})),n.createElement("g",{strokeLinecap:"round"},n.createElement("path",{stroke:"currentColor",d:"M2 12h1M21 12h1"})),n.createElement("g",{stroke:"currentColor",strokeLinecap:"round"},n.createElement("path",{d:"M3 5l.63.64M20.37 18.37L21 19"})),n.createElement("g",{stroke:"currentColor",strokeLinecap:"round"},n.createElement("path",{d:"M3 19l.63-.63M20.37 5.64L21 5"})))),"")}}t.Lightbulb=o,t.default=o},react:function(t,a){t.exports=e}})},e.exports=n(a("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/Icons/LogoPrimevideoApp.js":function(e,t,a){var n;a("./node_modules/@amzn/dvui/dist/Icons/LogoPrimevideoApp.css"),"undefined"!=typeof self&&self,n=function(e){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="./src/components/Icons/LogoPrimevideoApp.tsx")}({"./node_modules/classnames/index.js":function(e,t,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var s=r.apply(null,n);s&&e.push(s)}else if("object"===i)for(var o in n)a.call(n,o)&&n[o]&&e.push(o)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},"./src/common/Tracker.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTracker=t.Tracker=void 0;class n{constructor(){this.queue=[],this.csm_is_loaded=!1,this.csm_check_count=0,this.add=()=>Date.now(),this.componentMount=(e,t)=>{this.csm_is_loaded?this._logLoadTime(e,t):this.queue.push([e,t])},this._whenCSMLoads=()=>{if("undefined"!=typeof window){const e=window.setInterval((()=>{window.ue&&(this.csm_is_loaded=!0,this.queue.forEach((e=>this._logLoadTime(...e))),this.queue=[]),this.csm_check_count++,(this.csm_check_count>=600||this.csm_is_loaded)&&window.clearInterval(e)}),100)}},this._logLoadTime=(e,t)=>{window.ue.count(`DVUI:${e}`,Date.now()-t)},this._whenCSMLoads()}}t.Tracker=n,t.ActiveTracker=new n},"./src/components/Icons/Icons.module.scss":function(e,t,a){e.exports={icon:"_22qEau"}},"./src/components/Icons/LogoPrimevideoApp.tsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogoPrimevideoApp=void 0;const n=a("react"),r=a("./node_modules/classnames/index.js"),i=a("./src/common/Tracker.ts"),s=a("./src/components/Icons/Icons.module.scss");class o extends n.Component{constructor(e){super(e),this.displayName="IconLogoPrimevideoApp",this.tracker=i.ActiveTracker.add()}componentDidMount(){i.ActiveTracker.componentMount("Icon:LogoPrimevideoApp",this.tracker)}render(){return n.createElement("svg",{className:r(s.icon,s.LogoPrimevideoApp),viewBox:"0 0 100 100",height:"100",width:"100",role:"img",style:{height:this.props.height||"100",width:this.props.width||"100"},"aria-hidden":"true"},n.createElement("title",null,this.props.title||"Logo Primevideo App"),n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",viewBox:"0 0 100 100"},n.createElement("title",null,this.props.title||"Logo Primevideo App"),n.createElement("defs",null,n.createElement("linearGradient",{id:"logo_primevideo_app_b",gradientUnits:"userSpaceOnUse",x1:"0",y1:"0",x2:"1",y2:"0",gradientTransform:"matrix(-132.931478,132.931478,-132.931478,-132.931478,156.342589,-56.341663)"},n.createElement("stop",{offset:"0",stopColor:"#f6f6f6"}),n.createElement("stop",{offset:".281",stopColor:"#90dae5"}),n.createElement("stop",{offset:".636",stopColor:"#4aa6e1"}),n.createElement("stop",{offset:"1",stopColor:"#202e5c"})),n.createElement("clipPath",{id:"logo_primevideo_app_a"},n.createElement("path",{d:"M78.227 100H21.773C9.75 100 0 90.25 0 78.227V21.773C0 9.75 9.75 0 21.773 0h56.454C90.25 0 100 9.75 100 21.773v56.454C100 90.25 90.25 100 78.227 100zm0 0"}))),n.createElement("g",{"clip-path":"url(#logo_primevideo_app_a)"},n.createElement("path",{d:"M78.227 100H21.773C9.75 100 0 90.25 0 78.227V21.773C0 9.75 9.75 0 21.773 0h56.454C90.25 0 100 9.75 100 21.773v56.454C100 90.25 90.25 100 78.227 100",fill:"url(#logo_primevideo_app_b)"})),n.createElement("path",{d:"M24.05 60.984c.075.09.165.157.274.2.106.043.246.062.41.062h2.16c.184 0 .325-.02.422-.062a.68.68 0 00.262-.2 1.55 1.55 0 00.211-.39l4.25-11.13c.047-.132.09-.245.121-.347a.837.837 0 00.05-.277c0-.246-.163-.371-.495-.371h-2.41c-.266 0-.457.047-.582.148-.125.098-.22.266-.285.5l-2.61 8.852-2.558-8.852c-.067-.234-.165-.402-.286-.5-.125-.101-.32-.148-.586-.148h-2.484c-.332 0-.496.125-.496.37 0 .087.016.177.05.278.032.102.075.215.122.348l4.25 11.129c.066.168.137.297.21.39zm10.106-24.199h2.266c.219 0 .371-.047.46-.14.087-.094.13-.243.13-.45v-7.914c.363-.156.8-.285 1.32-.39.52-.102.961-.153 1.32-.153.266 0 .489.008.66.024.172.015.317.023.426.023.219 0 .375-.047.461-.14.086-.094.13-.243.13-.45V25.22c0-.219-.048-.371-.145-.461-.09-.086-.25-.13-.47-.13h-.331c-.63 0-1.219.145-1.778.434-.558.293-1.156.786-1.78 1.477l-.31-1.273c-.078-.348-.296-.52-.66-.52h-1.699c-.203 0-.351.043-.445.129-.098.09-.145.242-.145.46v10.86c0 .207.047.356.145.45.094.093.242.14.445.14zm9.5 18.035c0 1.332.227 2.325.684 2.973.457.652 1.156.977 2.101.977.793 0 1.555-.235 2.286-.7V51.47c-.715-.418-1.536-.625-2.461-.625-.88 0-1.532.328-1.961.988-.434.656-.649 1.652-.649 2.988zm-3.676.098c0-2.066.489-3.723 1.465-4.965.977-1.242 2.27-1.863 3.875-1.863 1.309 0 2.446.379 3.407 1.129v-5.856c0-.23.046-.394.148-.484.098-.094.254-.14.469-.14h2.386c.235 0 .395.046.485.14.09.09.137.254.137.484v17.258c0 .215-.047.375-.137.473-.09.101-.25.152-.485.152h-1.988c-.199 0-.351-.043-.457-.125-.11-.082-.187-.226-.238-.426l-.149-.574c-1.027.934-2.242 1.399-3.652 1.399-1.074 0-2.012-.278-2.809-.836-.792-.559-1.402-1.336-1.824-2.325-.422-.992-.633-2.14-.633-3.441zm20.422-1.14c.825 0 1.426-.126 1.797-.38.375-.253.563-.64.563-1.164 0-1.03-.61-1.547-1.825-1.547-1.558 0-2.457.965-2.699 2.895.649.133 1.371.195 2.164.195zm.196 2.206c-.926 0-1.727-.09-2.41-.27.097 1.099.425 1.884.988 2.356.558.473 1.402.711 2.539.711.453 0 .894-.027 1.328-.086.426-.058 1.023-.183 1.785-.379a.825.825 0 01.266-.05c.277 0 .414.187.414.566v1.129c0 .258-.035.441-.11.55-.074.106-.214.2-.425.282a10.377 10.377 0 01-3.77.684c-2.012 0-3.555-.551-4.633-1.664-1.074-1.114-1.617-2.708-1.617-4.786 0-2.125.555-3.793 1.656-5 1.102-1.21 2.633-1.816 4.594-1.816 1.508 0 2.688.367 3.54 1.102.85.734 1.277 1.718 1.277 2.945 0 1.226-.461 2.152-1.375 2.781-.915.633-2.266.945-4.047.945zm11.09-1.14c0 2.652.87 3.976 2.609 3.976 1.738 0 2.61-1.324 2.61-3.976 0-2.633-.872-3.953-2.61-3.953s-2.61 1.32-2.61 3.953zm-2.012 4.988c-1.11-1.191-1.664-2.855-1.664-4.988 0-2.117.554-3.774 1.664-4.965 1.11-1.191 2.652-1.79 4.62-1.79 1.974 0 3.513.599 4.622 1.79 1.11 1.191 1.664 2.848 1.664 4.965 0 2.133-.555 3.797-1.664 4.988-1.11 1.191-2.648 1.79-4.621 1.79-1.969 0-3.512-.599-4.621-1.79zm-32.38-16.719c-.378-.347-.886-.523-1.515-.523-.629 0-1.133.176-1.515.523-.38.352-.57.828-.57 1.426 0 .602.19 1.074.57 1.426.382.351.886.527 1.515.527.63 0 1.137-.176 1.516-.527.383-.352.57-.824.57-1.426 0-.598-.187-1.074-.57-1.426zM34.59 48.47c-.215 0-.371.043-.473.136-.097.09-.148.254-.148.489V60.62c0 .215.05.375.148.473.102.101.258.152.473.152h2.383c.234 0 .394-.05.484-.152.094-.098.14-.258.14-.473V49.094c0-.235-.046-.399-.14-.489-.09-.093-.25-.136-.484-.136zm39.144-20.89c-.441.464-.722 1.16-.84 2.093.149.031.301.055.458.078.503.074 1.05.11 1.64.11.801 0 1.387-.122 1.746-.364.364-.242.543-.617.543-1.121 0-.988-.59-1.484-1.77-1.484-.75 0-1.34.23-1.777.687zm-4.023 3.483c0-1.789.41-3.238 1.227-4.347.117-.16.242-.313.378-.457.063-.07.133-.133.204-.2 1.05-1.027 2.464-1.546 4.25-1.546 1.464 0 2.609.351 3.433 1.058.512.442.863.97 1.059 1.59.12.38.18.793.18 1.238 0 .887-.25 1.61-.75 2.168-.169.188-.36.356-.583.508-.46.317-1.043.547-1.734.696-.633.14-1.363.21-2.191.21-.473 0-.91-.023-1.317-.074a6.884 6.884 0 01-1.02-.183c.028.308.075.586.141.84.16.624.43 1.097.817 1.421.222.188.5.336.82.446.453.156 1 .238 1.645.238.437 0 .867-.027 1.285-.086.414-.05.992-.176 1.73-.363.028-.008.059-.012.086-.02.02-.004.04-.011.059-.015a.697.697 0 01.117-.012c.066 0 .125.012.176.035.148.066.222.238.222.508v1.082c0 .21-.023.363-.074.469a.234.234 0 01-.031.062c-.059.086-.168.164-.32.23a.674.674 0 01-.094.04c-1.145.441-2.364.66-3.656.66-1.95 0-3.446-.531-4.493-1.602a5.007 5.007 0 01-.953-1.398 5.709 5.709 0 01-.297-.813c-.207-.707-.316-1.496-.316-2.383zm-20.215 5.7c.047.05.11.086.184.11a.902.902 0 00.265.03h2.266c.219 0 .371-.043.46-.14a.442.442 0 00.083-.16.853.853 0 00.047-.286V27.79c.144-.074.297-.133.445-.195a5.624 5.624 0 012.149-.442c.957 0 1.437.535 1.437 1.602v7.562c0 .172.043.297.11.391.011.016.019.043.035.055a.4.4 0 00.18.11.902.902 0 00.265.03h2.266c.218 0 .37-.043.46-.14.086-.094.13-.242.13-.446v-8.554c.863-.407 1.718-.61 2.57-.61.359 0 .652.075.875.227.375.25.562.707.562 1.375v7.562c0 .09.012.164.031.235.008.027.02.05.032.074.023.05.043.102.082.137a.4.4 0 00.18.11.902.902 0 00.265.03h2.266c.218 0 .37-.043.46-.14.087-.094.13-.242.13-.446V28c0-.39-.043-.75-.118-1.078-.14-.598-.402-1.094-.793-1.492-.605-.61-1.457-.918-2.558-.918-.754 0-1.485.117-2.192.355-.101.031-.199.074-.3.113-.336.13-.684.29-1.043.485-.301.164-.606.344-.922.555a2.794 2.794 0 00-1.27-1.165c-.48-.226-1.055-.343-1.726-.343a6.24 6.24 0 00-1.047.086c-.075.011-.145.03-.219.047-.27.054-.535.12-.797.21-.191.063-.39.145-.594.239-.511.226-1.062.531-1.66.926l-.187-.633c-.051-.227-.168-.371-.344-.45a.713.713 0 00-.316-.07h-1.7a.91.91 0 00-.297.047.512.512 0 00-.152.082.242.242 0 00-.059.078c-.003.004-.003.012-.007.016a.764.764 0 00-.075.363v10.863c0 .149.036.254.083.344.019.035.035.078.058.102zm-5.914-11.895c-.203 0-.352.043-.45.13-.093.085-.14.237-.14.456v10.863c0 .204.047.356.14.446.098.093.247.144.45.144h2.266c.218 0 .37-.05.457-.144.09-.09.133-.242.133-.446V25.453c0-.219-.043-.371-.133-.457-.086-.086-.239-.129-.457-.129zm1.133-1.863c.597 0 1.074-.164 1.437-.492.364-.332.543-.778.543-1.344 0-.566-.18-1.016-.543-1.344-.363-.328-.84-.496-1.437-.496-.598 0-1.078.168-1.442.496-.359.328-.539.778-.539 1.344 0 .566.18 1.012.54 1.344.363.328.843.492 1.44.492zM22.887 33.937c.691.422 1.46.637 2.312.637.88 0 1.528-.3 1.946-.894.414-.598.625-1.54.625-2.828 0-1.305-.204-2.254-.614-2.852-.41-.598-1.062-.895-1.957-.895-.82 0-1.59.211-2.312.633zm-3.301 7.692c-.098-.086-.145-.242-.145-.461V25.453c0-.219.047-.371.145-.457.094-.086.242-.129.445-.129h1.7c.363 0 .581.172.66.52l.164.61a5.243 5.243 0 011.71-1.083 5.408 5.408 0 012.044-.402c1.523 0 2.73.558 3.617 1.672.89 1.117 1.332 2.625 1.332 4.527 0 1.3-.219 2.441-.656 3.414-.442.973-1.04 1.723-1.793 2.25-.758.527-1.622.79-2.598.79a5.543 5.543 0 01-1.84-.306 4.514 4.514 0 01-1.484-.847v5.156c0 .219-.043.375-.13.46-.089.087-.241.13-.46.13H20.03c-.203 0-.351-.043-.445-.13zm60.617 25.726c-.351-.464-2-.902-4.039-.902-2.184 0-4.816.5-6.797 1.988 0 .004-.004.004-.004.008-.234.176-.36.38-.383.555v.11c.024.152.133.265.329.296.066.012.14.012.226 0 2.153-.277 6.957-.894 7.813.285.644.88-.207 3.813-1.016 6.137-.273.781-.539 1.492-.742 2.035-.094.254-.07.445.023.563.149.18.473.164.809-.14.027-.028.055-.056.086-.083 2.3-2.121 3.484-5.691 3.824-8.18.184-1.32.125-2.336-.129-2.672zm-5.312 5.18c-1.672 1.328-3.536 2.5-5.52 3.512-5.945 3.035-12.973 4.625-19.242 4.625-11.711 0-22.258-4.66-30.246-12.41a1.112 1.112 0 01-.09-.102.797.797 0 01-.172-.37v-.185l.004-.003a.505.505 0 01.184-.325c.09-.07.199-.117.332-.117.101 0 .218.035.336.094.03.016.062.023.097.043 3.934 2.46 8.293 4.469 12.918 5.93 5.496 1.738 11.367 2.703 17.344 2.703 7.422 0 15.578-1.657 23.082-5.082 1.133-.512 2.078.804.973 1.687",fill:"#f7f8f9"})),"")}}t.LogoPrimevideoApp=o,t.default=o},react:function(t,a){t.exports=e}})},e.exports=n(a("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/Icons/Share.js":function(e,t,a){var n;a("./node_modules/@amzn/dvui/dist/Icons/Share.css"),"undefined"!=typeof self&&self,n=function(e){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="./src/components/Icons/Share.tsx")}({"./node_modules/classnames/index.js":function(e,t,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var s=r.apply(null,n);s&&e.push(s)}else if("object"===i)for(var o in n)a.call(n,o)&&n[o]&&e.push(o)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},"./src/common/Tracker.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTracker=t.Tracker=void 0;class n{constructor(){this.queue=[],this.csm_is_loaded=!1,this.csm_check_count=0,this.add=()=>Date.now(),this.componentMount=(e,t)=>{this.csm_is_loaded?this._logLoadTime(e,t):this.queue.push([e,t])},this._whenCSMLoads=()=>{if("undefined"!=typeof window){const e=window.setInterval((()=>{window.ue&&(this.csm_is_loaded=!0,this.queue.forEach((e=>this._logLoadTime(...e))),this.queue=[]),this.csm_check_count++,(this.csm_check_count>=600||this.csm_is_loaded)&&window.clearInterval(e)}),100)}},this._logLoadTime=(e,t)=>{window.ue.count(`DVUI:${e}`,Date.now()-t)},this._whenCSMLoads()}}t.Tracker=n,t.ActiveTracker=new n},"./src/components/Icons/Icons.module.scss":function(e,t,a){e.exports={icon:"_22qEau"}},"./src/components/Icons/Share.tsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Share=void 0;const n=a("react"),r=a("./node_modules/classnames/index.js"),i=a("./src/common/Tracker.ts"),s=a("./src/components/Icons/Icons.module.scss");class o extends n.Component{constructor(e){super(e),this.displayName="IconShare",this.tracker=i.ActiveTracker.add()}componentDidMount(){i.ActiveTracker.componentMount("Icon:Share",this.tracker)}render(){return n.createElement("svg",{className:r(s.icon,s.Share),viewBox:"0 0 24 24",height:"24",width:"24",role:"img",style:{height:this.props.height||"24",width:this.props.width||"24"},"aria-hidden":"true"},n.createElement("title",null,this.props.title||"Share"),n.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},n.createElement("title",null,this.props.title||"Share"),n.createElement("path",{d:"M6 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm12-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm0 12a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-3-4l-7-3m7-7l-7 3",stroke:"currentColor",strokeWidth:"2",fill:"none"})),"")}}t.Share=o,t.default=o},react:function(t,a){t.exports=e}})},e.exports=n(a("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/Icons/WatchParty.js":function(e,t,a){var n;a("./node_modules/@amzn/dvui/dist/Icons/WatchParty.css"),"undefined"!=typeof self&&self,n=function(e){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="./src/components/Icons/WatchParty.tsx")}({"./node_modules/classnames/index.js":function(e,t,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var s=r.apply(null,n);s&&e.push(s)}else if("object"===i)for(var o in n)a.call(n,o)&&n[o]&&e.push(o)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},"./src/common/Tracker.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTracker=t.Tracker=void 0;class n{constructor(){this.queue=[],this.csm_is_loaded=!1,this.csm_check_count=0,this.add=()=>Date.now(),this.componentMount=(e,t)=>{this.csm_is_loaded?this._logLoadTime(e,t):this.queue.push([e,t])},this._whenCSMLoads=()=>{if("undefined"!=typeof window){const e=window.setInterval((()=>{window.ue&&(this.csm_is_loaded=!0,this.queue.forEach((e=>this._logLoadTime(...e))),this.queue=[]),this.csm_check_count++,(this.csm_check_count>=600||this.csm_is_loaded)&&window.clearInterval(e)}),100)}},this._logLoadTime=(e,t)=>{window.ue.count(`DVUI:${e}`,Date.now()-t)},this._whenCSMLoads()}}t.Tracker=n,t.ActiveTracker=new n},"./src/components/Icons/Icons.module.scss":function(e,t,a){e.exports={icon:"_22qEau"}},"./src/components/Icons/WatchParty.tsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WatchParty=void 0;const n=a("react"),r=a("./node_modules/classnames/index.js"),i=a("./src/common/Tracker.ts"),s=a("./src/components/Icons/Icons.module.scss");class o extends n.Component{constructor(e){super(e),this.displayName="IconWatchParty",this.tracker=i.ActiveTracker.add()}componentDidMount(){i.ActiveTracker.componentMount("Icon:WatchParty",this.tracker)}render(){return n.createElement("svg",{className:r(s.icon,s.WatchParty),viewBox:"0 0 24 24",height:"24",width:"24",role:"img",style:{height:this.props.height||"24",width:this.props.width||"24"},"aria-hidden":"true"},n.createElement("title",null,this.props.title||"Watch Party"),n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},n.createElement("title",null,this.props.title||"Watch Party"),n.createElement("g",{fill:"none",fillRule:"evenodd",transform:"rotate(45 13.621 11.293)"},n.createElement("polygon",{stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",points:"7.362 15.985 12.862 27.985 18.362 15.985"}),n.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.20520683,12.8786797 C7.9841616,11.0305625 7.19297531,10.0986243 6.20520683,9.87867966"}),n.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20.8890873,12.6109127 C20.4469968,9.53071743 18.8646243,7.97748706 16.8890873,7.6109127",transform:"matrix(-1 0 0 1 37.778 0)"}),n.createElement("circle",{cx:"3.316",cy:"7.49",r:"1",fill:"currentColor"}),n.createElement("circle",{cx:"20.657",cy:"11.879",r:"1",fill:"currentColor"}),n.createElement("circle",{cx:"3.316",cy:"11.732",r:"1",fill:"currentColor"}),n.createElement("circle",{cx:"1.195",cy:"9.611",r:"1",fill:"currentColor"}),n.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",d:"M12.557293,13.0753788 C14.5891901,10.5746233 14.5891901,4.94159902 11.0953579,4.94159902 C8.22476933,4.94159902 8.63047547,8.5284102 10.8269766,8.5284102 C13.5809029,8.5284102 16.0116573,2.4313965 11.751917,0.0753787975"}))),"")}}t.WatchParty=o,t.default=o},react:function(t,a){t.exports=e}})},e.exports=n(a("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/MoreContent.js":function(e,t,a){var n;a("./node_modules/@amzn/dvui/dist/MoreContent.css"),"undefined"!=typeof self&&self,n=function(e){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="./src/components/MoreContent/MoreContent.tsx")}({"./node_modules/classnames/index.js":function(e,t,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var s=r.apply(null,n);s&&e.push(s)}else if("object"===i)for(var o in n)a.call(n,o)&&n[o]&&e.push(o)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},"./src/common/Tracker.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTracker=t.Tracker=void 0;class n{constructor(){this.queue=[],this.csm_is_loaded=!1,this.csm_check_count=0,this.add=()=>Date.now(),this.componentMount=(e,t)=>{this.csm_is_loaded?this._logLoadTime(e,t):this.queue.push([e,t])},this._whenCSMLoads=()=>{if("undefined"!=typeof window){const e=window.setInterval((()=>{window.ue&&(this.csm_is_loaded=!0,this.queue.forEach((e=>this._logLoadTime(...e))),this.queue=[]),this.csm_check_count++,(this.csm_check_count>=600||this.csm_is_loaded)&&window.clearInterval(e)}),100)}},this._logLoadTime=(e,t)=>{window.ue.count(`DVUI:${e}`,Date.now()-t)},this._whenCSMLoads()}}t.Tracker=n,t.ActiveTracker=new n},"./src/common/baseProps.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baseProps=void 0,t.baseProps=function(e){const t={};return e.testID&&(t["data-automation-id"]=e.testID,t["data-testid"]=e.testID),t}},"./src/components/MoreContent/MoreContent.module.scss":function(e,t,a){e.exports={screenreaderonly:"RdpVO2",clearfix:"lpmLZB",moreContent:"Xo7urA","more-item":"_1n3rj7","more-item-input":"_1sRE-V","more-item-hidden":"_1tgwWh"}},"./src/components/MoreContent/MoreContent.tsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MoreContent=t.MoreItem=void 0;const n=a("react"),r=a("./src/components/MoreContent/MoreContent.module.scss"),i=a("./src/utils/utils.ts"),s=a("./node_modules/classnames/index.js"),o=a("./src/common/baseProps.ts"),l=a("./src/common/Tracker.ts");t.MoreItem=({string:e,id:t})=>n.createElement(n.Fragment,null,n.createElement("input",{className:r["more-item-input"],type:"checkbox",id:`more-content-toggle-${t}`}),n.createElement("label",{className:r["more-item"],htmlFor:`more-content-toggle-${t}`},e||""));class c extends n.Component{constructor(e){super(e),this.displayName="MoreContent",this.tracker=l.ActiveTracker.add()}componentDidMount(){l.ActiveTracker.componentMount(this.displayName,this.tracker)}render(){return n.createElement("span",Object.assign({},o.baseProps(this.props),{className:s(r.moreContent,this.props.className)}),this.props.visible,n.createElement(t.MoreItem,{string:this.props.moreString,id:this.props.index||i.uniqueId()}),(Array.isArray(this.props.hidden)?this.props.hidden:[this.props.hidden]).map(((e,t)=>n.createElement("span",{key:t,className:r["more-item-hidden"]},e))))}}t.MoreContent=c},"./src/utils/debounce.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=(e,t=250)=>{let a=null;return function(...n){null!==a&&clearTimeout(a),a=setTimeout((()=>{Reflect.apply(e,this,n)}),t)}},t.default=t.debounce},"./src/utils/utils.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueId=t.firstResult=t.attributesToString=t.htmlEscape=t.createEscaper=t.camelToDashed=t.camelToDataAttrs=t.debounce=void 0;var n=a("./src/utils/debounce.ts");function r(e){return e&&"string"==typeof e?e.replace(/([A-Z])/g,(e=>`-${e.toLowerCase()}`)):(console.warn("function [camelToDashed] : invalid camel case"),"")}Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return n.debounce}}),t.camelToDataAttrs=function(e){return Object.keys(e).reduce(((t,a)=>({[`data-${r(a)}`]:e[a],...t})),{})},t.camelToDashed=r,t.createEscaper=(e={})=>{const t=t=>{const a=e[t];return"object"==typeof a&&a&&a.replacement?a.replacement:a},a=`(?:${Object.keys(e).map((t=>{const a=e[t];return"object"==typeof a&&a&&a.regex?a.regex:t})).join("|")})`,n=RegExp(a),r=RegExp(a,"g");return e=>{const a=null==e?"":`${e}`;return n.test(a)?a.replace(r,t):a}},t.htmlEscape=t.createEscaper({"&":{regex:"&(?!(lt;|gt;|amp;|#123;|#125;))",replacement:"&amp;"},"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"});const i={href:e=>e},s=(e,a)=>i[e]?i[e](a):t.htmlEscape(a);t.attributesToString=e=>{if("object"!=typeof e||null===e)return"";const a=Object.keys(e).reduce(((a,n)=>[...a,[t.htmlEscape(n),'="',s(n,e[n]),'"'].join("")]),[]);return a.length?" "+a.join(" "):""},t.firstResult=function(...e){for(let t=0;t<e.length;t++){const a="function"==typeof e[t]&&e[t]();if(void 0!==a&&!1!==a&&null!==a)return a}},t.uniqueId=()=>Math.random().toString(36).slice(2)},react:function(t,a){t.exports=e}})},e.exports=n(a("./node_modules/react/index.js"))},"./src/entrypoints/hydration/detail.tsx":(e,t,a)=>{"use strict";var n=a("./src/util/hydration/hydrateWidgets.tsx"),r=a("./src/util/csm/csm.tsx"),i=a("./node_modules/react/index.js"),s=a("./src/util/api/WPSClient.ts"),o=a("./src/util/utils/strings.ts"),l=a("./node_modules/@amzn/dvui/dist/Text.js"),c=0,d=1;const u={bundles:[c,d],strings:["DV_TW_title_starring","DV_TW_title_actors","DV_TW_title_producers","DV_TW_title_genres","DV_TW_title_subtitles","DV_TW_title_languages","DV_TW_title_directors","DV_TW_title_studio","DV_TW_title_network","DV_TW_title_seasonyear","DV_TW_title_amr","DV_TW_title_content_descriptors","DV_DP_learn_more","DV_DP_ARIA_learn_more_amr","DV_comma_separator","DV_TW_title_purchaserights","DV_TW_title_devices","DV_TW_data_available_to_watch_devices","DV_TW_data_purchaserights_streaming","DV_TW_Detail_text","DV_TW_title_format","DV_TW_data_format_streaming","DV_TW_title_mpaarating","DV_TW_title_bbfcrating","DV_TW_title_fskrating","DV_TW_title_eirinrating","DV_DP_more_details","DV_DP_more_items","DV_brand_av","DV_WEB_DP_popover_purchase_rights","DV_DP_none_available"]},p={bundles:[c,d],strings:["DV_MWTW_TITLE","DV_MWTW_TITLE_MAIN"]},m={bundles:[c,d],strings:["DV_RBB_CANCEL_PURCH_MODAL_HEADER","DV_RBB_CANCEL_PURCH_MODAL_SUBMIT","DV_AB_CANCEL_ACCIDENTAL_PURCHASE","DV_DP_you_multiple_orders_for_this_title","DV_DP_choose_order_to_cancel"]},g={bundles:[d],strings:["DV_DP_EL_episode_title_template","DV_DP_EL_bonus_title_template","DV_comma_separator"]},h={bundles:[c,d],strings:["AVOD_DP_redeem_gift_card_or_promotion"]},_={bundles:[d],strings:["DV_DP_unavailable_episode_list_message"]},f={bundles:[d],strings:["DV_DP_live_badge_text"]},v={bundles:[c],strings:["AVOD_DP_season_selector"]},b={bundles:[c,d],strings:["DV_DP_first_review","DV_DP_ARIA_amazon_rating","DV_DP_ARIA_imdb_rating","DV_DP_ARIA_watch_episode","DV_DP_ARIA_watch_title","DV_DP_ARIA_audio_description","DV_DP_ARIA_release_year","DV_WEB_SETTINGS_HEAD_SUBTITLES","DV_DP_ARIA_runtime","DV_DP_ARIA_scheduled","DV_DP_ARIA_located","DV_DP_ARIA_suitable_for","DV_TW_amr_nr_text"]},E={bundles:[c],strings:["AVOD_DP_season_selector","DV_DP_Watchlist_toggle_label","DV_DP_WL_removeMovie","DV_DP_WL_removeTv","DV_DP_WL_addMovie","DV_DP_WL_addTv","DV_DP_WL_addTvProcessing","DV_DP_WL_removeTvProcessing","AVOD_WL_error_msg","DV_DP_WL_watchlist"]},y={bundles:[c],strings:["DV_WEB_FEEDBACK__send_us_feedback","DV_WEB_FEEDBACK_feedback","DV_WEB_FEEDBACK_select_related_device","DV_WEB_FEEDBACK_select_option_dropdown_menu","DV_WEB_FEEDBACK_dropdown_prompt","DV_WEB_FEEDBACK_submit_button","DV_WEB_FEEDBACK_no_device_website","DV_WEB_SETTINGS_HEAD_YOUR_DEVICES"]},w={bundles:[c],strings:["DV_DP_see_more"]},T={bundles:[c],strings:["DV_DP_unavailable_page_message","DV_DP_unavailable_live_page_message","DV_DP_only_playback_available_in_gen4_message"]},D={bundles:[d],strings:["DV_WEB_PAGINATION_PAGE","DV_WEB_PAGINATION_PREVIOUS","DV_WEB_PAGINATION_NEXT"]},I={bundles:[c],strings:["DV_DP_COMING_SOON_MESSAGE","DV_DP_COMING_SOON_TBC_DATE","DV_DP_COMING_IN_YEAR_MESSAGE"]},C={bundles:[c,d],strings:["AVOD_DP_E_error_text","AVOD_DP_E_error_ok"]},P={bundles:[d],strings:["DV_DP_CAST_CREW_HEADING","DV_DP_powered_by"]},S={bundles:[c],strings:["DV_WEB_LIVE_NOT_SUPPORTED_BODY","DV_DP_PLAYER_TIMEOUT_BODY","DV_DP_PLAYER_TIMEOUT_HEADING"]},k={bundles:[d],strings:["DV_DP_CL_other_formats_title"]},R={bundles:[d],strings:["DV_DP_EPISODE_EXPANDER","DV_DP_EPISODE_NUM_ASCENDING","DV_DP_EPISODE_NUM_DESCENDING","DV_DP_EPISODE_AVAILABLE","DV_DP_EPISODE_SORT_BY"]},x={bundles:[c,d],strings:["DV_DP_GC_widget_heading","DV_DP_UB_GC_success_message","DV_DP_DV_GCPC_window_title","DV_DP_UB_GC_popup_apply","DV_DP_UB_GC_enter_code","AVOD_DP_GC_promotion_message","DV_DP_GC_balances_explanation","AVOD_DP_GC_toc_learn_more","DV_DP_GC_balance_type_heading","DV_DP_GC_balance_amount_heading","DV_DP_GC_code_input_placeholder","DV_DP_GC_wrong_code","DV_DP_GC_balance_update_failed"]},N={bundles:[d],strings:["DV_DP_TAB_episodes","DV_DP_TAB_explore","DV_DP_TAB_extras","DV_DP_TAB_related","DV_DP_TAB_details"]},A={bundles:[c,d],strings:["DV_DP_CREATE_WATCH_PARTY","DV_DP_WATCH_PARTY_TOOLTIP","DV_DP_WATCH_PARTY_FTUE_HEADER","DV_DP_WATCH_PARTY_FTUE_BODY"]},O={bundles:[c],strings:["DV_DP_WP_ERROR_HEADING","DV_DP_WP_ERROR","DV_DP_WP_END_HEADING","DV_DP_WP_END","DV_DP_WP_STREAM_ENDED","DV_DP_WP_CREATE_INELIGIBLE_HEADING","DV_DP_WP_CREATE_INELIGIBLE","DV_DP_WP_CREATE_INELIGIBLE_TVOD","DV_DP_WP_CREATE_INELIGIBLE_SVOD_TVOD","DV_DP_WP_JOIN_INELIGIBLE_HEADING","DV_DP_WP_JOIN_INELIGIBLE","DV_DP_WP_JOIN_INELIGIBLE_TVOD","DV_DP_WP_JOIN_INELIGIBLE_SVOD_TVOD","DV_DP_WP_GEO_RESTRICTION_HEADING","DV_DP_WP_GEO_RESTRICTION","DV_DP_WP_UNSUPPORTED_BROWSER_HEADING","DV_DP_WP_UNSUPPORTED_BROWSER","DV_DP_WP_UNSUPPORTED_CHAT_HEADING","DV_DP_WP_UNSUPPORTED_CHAT","DV_DP_WP_BANNED_SPECIFIC_CHAT_HEADING","DV_DP_WP_BANNED_SPECIFIC_CHAT","DV_DP_WP_SAFARI_MAC_UNSUPPORTED_HEADING","DV_DP_WP_SAFARI_MAC_UNSUPPORTED_BODY","DV_CR_review_submission_processing","DV_CR_review_submission_success"]},V={bundles:[c],strings:["DV_DP_trailer__AV"]},L={bundles:[c],strings:["AVOD_DP_E_error_text"]},W={bundles:[d],strings:["DV_CR_sorted_by","DV_CR_see_all_reviews","DV_CR_sorting_top_reviews","DV_CR_sorting_most_recent","DV_CR_profile_aria_label","DV_CR_helpful_button_label","DV_CR_report_abuse_label","DV_CR_reviews_header","DV_CR_write_review_label","DV_CR_write_review_label_other","DV_CR_vote_unsuccessful","DV_CR_thank_you_feedback","DV_CR_report_abuse_message","DV_CR_confirm_label","DV_CR_sending_feedback","DV_CR_reviews_explanation_header","DV_CR_reviews_explanation_text","DV_CR_fallback_with_ratings","DV_CR_fallback_no_ratings","DV_CR_verified_purchase","DE_DV_CR_sorting_header","JP_DV_CR_sorting_header","US_DV_CR_sorting_header","UK_DV_CR_sorting_header","DV_CR_other_countries_header","DV_CR_first_to_rate","DV_CR_first_to_review","DV_CR_show_original_review","DV_CR_translation_error","DV_CR_translated_review","DV_CR_translate_single_review","DV_CR_translate_all_reviews","DV_CR_translating_review","DV_CR_submission_overall_rating","DV_CR_submission_headline_placeholder","DV_CR_submission_add_headline","DV_CR_submission_body_placeholder","DV_CR_submission_add_more","DV_CR_submission_add_written_review","DV_CR_submission_rating_saved","DV_CR_submission_submit","DV_CR_submission_optional","DV_CR_submission_max_chars","DV_CR_submission_min_chars","DV_CR_submission_max_words","DV_CR_submission_min_words","DV_CR_submission_min_chars_one","DV_CR_submission_min_words_one","DV_common_cancel","DV_CR_public_name_change","DV_CR_public_name_rating_as","DV_CR_public_name_failure","DV_CR_review_submission_failure","DV_CR_create_review","DV_CR_edit_review","DV_CR_rating_missing","DV_CR_delete_review","DV_common_yes","DV_common_no","DV_common_edit","DV_common_delete","DV_CR_delete_review_warning","DV_CR_review_deleting","DV_CR_review_deleted","DV_CR_rating_missing","DV_CR_approval_pending"]},M={bundles:[c],strings:["DV_DP_CHART_TOP_TEN"]},B={bundles:[c],strings:["DV_DP_download_upsell_banner"]},U={bundles:[d],strings:["DV_DP_prioritize_chat_header"]};var j=a("./src/util/utils/htmlEncode.ts");const F=({string:e,dir:t})=>{const a=(0,j.l_)(e);return t?i.createElement("div",{dir:t},a):i.createElement(i.Fragment,null,a)};F.displayName="DecodedText";var $=a("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");const H=[u,p,g,h,_,f,D,C,P,k,R,x,N,A,v,b,E,w,m,T,I,S,y,O,V,L,W,M,B,U],G=e=>[].concat(...H.filter((t=>t.bundles.includes(e))).map((e=>e.strings))),q=(e,t)=>({context:e,ids:G(t)}),z=({stringID:e,replace:t,dvStringAttrs:a,shouldDecode:n=!1,dir:r,className:s=""})=>{const{getString:c}=i.useContext($.h),d=c(e,t),u=(0,o.e6)(d,a||{}),p=n?i.createElement(F,{string:u.string}):i.createElement(l.Text,{string:u,className:s});return r?i.createElement("span",{dir:r}," ",p," "):p};var Z=a("./src/widgets/DVWebNodeDetail/utils/utils.ts");const X=async({context:e,api:t,operation:a,stringBundle:n,logger:r,shouldFetchStarlightContent:i=!1,degradationsReporter:o})=>{const l=new s.eZ(t);let c;if(void 0!==n){q(e,n);c=()=>l.GetStrings(q(e,n)).then((e=>e.results))}else c=()=>Promise.resolve(void 0);const[d,u]=await Promise.all([c(),a(l)]);let p;if(i){var m,g;const e=u,t=null==e?void 0:e.widgets,a=null==t||null===(m=t.productDetails)||void 0===m?void 0:m.detail,n="true"===(null==t||null===(g=t.pageContext)||void 0===g?void 0:g.features.disableExploreTab),i=null==a?void 0:a.explorePanelURL;p=Boolean(i&&!n)?await(async e=>{const t=(new Date).getTime(),a=await fetch(e,{method:"GET"}).then((async e=>({staticPageContent:await e.text()}))).catch((e=>{const t=`${Z.EZ}::Starlight::Fetch::Failed`;null==r||r.error(e).count(t,1,!1),null==o||o.reportDegradation({level:"Degraded",scope:"StarlightExplore"})})),n=(new Date).getTime()-t,i=`Starlight Fetch took ${n} MS`,s=`${Z.EZ}::Starlight::Fetch::Latency`;return null==r||r.info(i).count(s,n,!1),a})(i):void 0}return{operationResponse:u,stringMap:d,stringBundle:n,starlightResponse:p}};var Q=a("./src/util/wrappers/ArgsContext.tsx"),Y=a("./src/util/wrappers/LoggersContext.tsx"),J=a("./node_modules/react-redux/es/index.js");const K="_3I-nQy",ee="_2C9xWo",te="VuF--y",ae="_1GS1_C",ne="_2caVCa",re="_1HxZWz",ie=new Set(["aivDebug","appDebug","auiDebug","avClientAddress","avCurrentTerritory","avMarketplace","avRecordTerritory","avRegion","avGeoToken","csTools","debug","experiment","forceAV","isDebug","language","pfDisableCache","pfShowFeatures","serviceDebug","inspector","stringDebug","keepSubscription","tab"]),se=new RegExp("/region/(na|eu|fe|local)"),oe=(e,t)=>e.isRetail?(e=>e?"":"/gp/video")(t):(({originalURI:e})=>{const t=e&&e.match(se);return t&&t[0]||""})(e),le=(e,t)=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`,ce=(e,{urlData:t,get:a,refTag:n,isShortUrl:r=!1})=>{if(!t)return"";const i=oe(t,r),s=((e,t={})=>{return{...(a=e,Object.keys(a).reduce(((e,t)=>ie.has(t)?{...e,[t]:a[t]}:e),{})),...t};var a})(t.parameters||{},a),o=Object.keys(s).reduce(((e,t)=>{const a=s[t];if(Array.isArray(a)){const n=a.map((e=>le(t,e)));e.push(...n)}else e.push(le(t,a));return e}),[]).join("&"),l=o?`?${o}`:"",c=n?`/ref=${n}`:"";return`${i}/${(e=>e.replace(/^\//,""))(e)}${c}${l}`};var de=a("./node_modules/@amzn/dv-web-node-reftags/index.js");function ue(e,t,a){return ce("/auth-redirect",{urlData:e,refTag:t,get:{returnUrl:a,signin:"1"}})}const pe=e=>`/detail/${e}`;function me(e,t,a){return ce(pe(t),{urlData:e,refTag:a})}const ge=(e,t,a,n)=>{const{queryParameters:r,originalURI:i}=e,s={parameters:{...r,tab:["details"]},originalURI:i,isRetail:"Retail"===e.domain},o=me(s,t,(0,de.i)(n));return ue(s,(0,de.i)(a),o)},he="_2IIDsE",_e="_1z4REl",fe="_1ITy4O",ve="n4qlso",be="_1yP1uA",Ee="_2GUwRS",ye="HaWow5";var we=a("./node_modules/classnames/index.js"),Te=a.n(we),De=a("./src/util/utils/imageUtils/imageUtils.tsx");let Ie,Ce;!function(e){e.WIDTH="WIDTH",e.HEIGHT="HEIGHT"}(Ie||(Ie={})),function(e){e.gif="gif",e.png="png",e.webp="webp",e.pkmz="pkmz"}(Ce||(Ce={}));const Pe=[1.5,2],Se={phone:"20em",phablet:"28em","phone-landscape":"47em",tablet:"55em","tablet-landscape":"65em",desktop:"90em",largeScreen:"118em"},ke=RegExp(`(${Object.keys(Se).join("|")})$`),Re=e=>"string"==typeof e?e:`${e}px`,xe=(e,t,a,n,r)=>{const i=Pe.map((i=>`${Ne({src:e,value:t*i,baseType:a,type:n,skipStripTags:r})} ${i}x`));return i&&i.unshift(Ne({src:e,value:t,baseType:a,type:n,skipStripTags:r})),i&&i.join(", ")},Ne=({src:e,value:t,baseType:a,type:n,skipStripTags:r})=>{if(!e)return"";const i=new De.e(e);return r||i.stripTags(),a===Ie.HEIGHT?i.scaleHeight(t):i.scaleWidth(t),n&&i.forceFormat(n),i.getImageUrl()},Ae=(e,t,a,n,r)=>t.map((t=>`${Ne({src:e,value:t,baseType:a,type:n,skipStripTags:r})} ${t}w`)).join(", "),Oe=(e,t=[])=>{const a=t.reduce(((e,t)=>{const[a,n]=Object.entries(t)[0],r=(e=>e.replace(ke,(e=>`width: ${Se[e]}`)))(a);return r&&n&&e.push(`(${r}) ${Re(n)}`),e}),[]);return a.push(Re(e)),a.join(", ")},Ve=({src:e,baseValue:t,baseType:a=Ie.WIDTH,srcSizes:n,format:r,resolutions:i,skipStripTags:s})=>{if(a===Ie.HEIGHT&&n)throw new Error("BaseType.HEIGHT can't be used with srcSizes. It is only compatible with format and resolutions.");if((0,Z.xb)(n))return{src:Ne({src:e,value:t,baseType:a,type:r,skipStripTags:s}),srcSet:xe(e,t,a,r,s)};const o=n.map((e=>Object.values(e)[0]));o.push(t);const l=((e,t=Pe)=>{const a=t.reduce(((t,a)=>[...t,...e.map((e=>Math.floor(e*a)))]),e);return Array.from(new Set(a)).sort(Z.ws)})(o,i);return{src:Ne({src:e,value:t,baseType:a,type:r,skipStripTags:s}),srcSet:Ae(e,l,a,r,s),sizes:Oe(t,n)}};var Le=a("./src/util/utils/useInteractionObserver.tsx"),We=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),Me=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const Be=e=>Boolean("Phone"===e.formFactor),Ue=(0,We.P)([Me.bS.pageContext],(e=>e.isCerberusChild)),je=(0,We.P)(Me.bS.pageContext,(e=>Boolean("MShop"===e.app&&("IOS"===e.os||"MacOS"===e.os||"Android"===e.os)))),Fe=(0,We.P)(Me.bS.pageContext,(e=>Be(e))),$e=(0,We.P)(Me.bS.pageContext,(e=>(e=>Boolean("Desktop"!==e.formFactor))(e))),He=(0,We.P)(Me.bS.pageContext,(e=>"MShop"===e.app)),Ge=((0,We.P)(Me.bS.pageContext,(e=>"InternetExplorer"===e.app)),(0,We.P)(Me.bS.pageContext,(e=>"Safari"===e.app))),qe=((0,We.P)(Me.bS.pageContext,(e=>e.pageType)),(0,We.P)(Me.bS.pageContext,(e=>e.subPageType)),(0,We.P)(Me.bS.pageContext,(e=>e.features))),ze=(0,We.P)(Me.bS.pageContext,(e=>e.downloadLaunchType)),Ze=(0,We.P)(Me.bS.pageContext,(e=>"Event"!==e.subPageType)),Xe=(e,t="true")=>(0,We.P)(Me.bS.pageContext,(a=>Qe(a.features,e,t))),Qe=(e,t,a="true")=>Boolean(e)&&e[t]===a,Ye=Xe("offerClarityEnabled"),Je=(Xe("isJPHeroImageEnabled"),Xe("isReviewsTranslationEnabled")),Ke=Xe("isFirestormReviewsEnabled"),et=Xe("activateAutoPlayingInHovers"),tt=Xe("isReviewsSubmissionEnabled"),at=Xe("isDownloadUpsellEnabled"),nt=(Xe("isChatPrioritizationEnabled"),Xe("isAutoplayDeeplinkEnabled")),rt="_3AGscX",it="Zk8aEm",st="_1Asy_o",ot="_3Ey1L9";function lt(){return lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},lt.apply(this,arguments)}const ct=e=>{const{src:t,baseValue:a,format:n,baseType:r,srcSizes:s,skipStripTags:o,className:l,classNameContainer:c,alt:d}=e,{src:u,srcSet:p,sizes:m}=Ve({src:t,baseValue:a,baseType:r,srcSizes:s,format:n,skipStripTags:o}),[g,h]=i.useState(!1),_=Ve({src:t,baseValue:50,baseType:Ie.WIDTH,format:n}).src;return i.createElement(i.Fragment,null,i.createElement(i.Fragment,null,i.createElement("noscript",null,i.createElement("img",{src:t,className:l,alt:d}),i.createElement("style",null,`.${rt}{display:none;}`)),i.createElement("div",{className:`${rt} ${c}`,dangerouslySetInnerHTML:{__html:`\n      <script>document.body.classList.remove("atfimgloaded")<\/script>\n      <img id="atf-thumb" class="${ot}" src="${_}"/>\n      <img id="atf-full" class="${it} ${l}" src="${u}" srcSet="${p}" sizes="${m}" alt="${d}" onload="document.body.classList.add('atfimgloaded')"/>\n            `}})))},dt=e=>{const{src:t,baseValue:a,format:n,baseType:r,srcSizes:s,skipStripTags:o,className:l,classNameContainer:c,alt:d,isLazyImageSupported:u}=e,p=i.useRef(null),[m,g]=i.useState(!1),[h,_]=i.useState(!1),f=i.useCallback((([{isIntersecting:e}],t)=>{e&&(_(!0),t.unobserve(p.current))}),[]);return(0,Le.S)({enabled:u,target:p,rootMargin:"200px",onIntersect:f}),i.createElement(i.Fragment,null,i.createElement("noscript",null,i.createElement("img",{src:t,className:l,alt:d}),i.createElement("style",null,`.${rt}{display:none;}`)),i.createElement("div",{ref:p,className:Te()(rt,c)},h&&i.createElement("img",lt({},Ve({src:t,baseValue:a,baseType:r,srcSizes:s,format:n,skipStripTags:o}),{loading:"lazy",onLoad:()=>{g(!0)},alt:d,className:Te()(it,l,{[st]:m})}))))},ut=e=>{const{src:t,baseValue:a,format:n,baseType:r,srcSizes:s,skipStripTags:o,isLazy:l=!1,className:c,alt:d,isAtfMainImage:u,isLazyImageSupported:p}=e;return t&&a?p&&u?i.createElement(ct,e):p&&l?i.createElement(dt,e):i.createElement("img",lt({},Ve({src:t,baseValue:a,baseType:r,srcSizes:s,format:n,skipStripTags:o}),{className:c,alt:d})):null},pt=(0,J.$j)((e=>({isLazyImageSupported:!Ge(e)})))(i.memo(ut));function mt(){return mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},mt.apply(this,arguments)}const gt=({title:e,asin:t,cGti:a,isRetail:n,makeUrl:r,showLinkToDP:s=!1,titleLogo:o,providerLogo:l})=>{const c=ht(l,o,e)||e&&i.createElement("h1",{className:we(he,K),"data-automation-id":"title"},e);if(c){if(s){const e=n&&t||a,s=r&&e&&r(pe(e),{refTag:"atv_hover_title"});return i.createElement("a",{href:s,className:ye},c)}return c}return null},ht=(e,t,a)=>{const n={alt:a,src:t,baseValue:600,srcSizes:[{"max-phablet":300},{"min-phablet":600}],format:Ce.png};return t&&a&&i.createElement(i.Fragment,null,_t(e),i.createElement("h1",{className:we(he,ee),"data-testid":"title-art"},i.createElement("div",{className:te},i.createElement(pt,mt({className:ae},n)))))},_t=e=>{const t={alt:"",src:e,baseValue:300,srcSizes:[{"max-phablet":200},{"min-phablet":300}],format:Ce.png};return e?i.createElement("div",{className:we(he,ne)},i.createElement(pt,mt({className:re},t))):null};var ft=a("./src/widgets/DVWebNodeDetail/selectors/detailFragment.ts"),vt=a("./src/util/api/util.ts");const bt=e=>"Retail"===e,Et=(0,We.P)(Me.bS.context,(e=>e.domain||"Fogg")),yt=(0,We.P)(Me.bS.context,(e=>e.sessionID)),wt=(0,We.P)(Me.bS.context,(e=>e.requestID)),Tt=(0,We.P)(Me.bS.context,(e=>e.customerID)),Dt=(0,We.P)(Me.bS.context,(e=>e.appName)),It=(0,We.P)(Me.bS.context,(e=>e.locale||"en_US")),Ct=(0,We.P)(It,(e=>e.replace("_","-"))),Pt=(0,We.P)(Me.bS.context,(e=>(0,vt.aP)(e.isInternal||"0"))),St=(0,We.P)(Me.bS.context,(e=>"object"==typeof e?e.queryParameters:{})),kt=(0,We.P)(Me.bS.context,(e=>e.originalURI||"")),Rt=(0,We.P)(Me.bS.context,(e=>e.marketplaceID)),xt=(0,We.P)(Et,(e=>bt(e))),Nt=(0,We.P)([xt,kt,St],((e,t,a)=>(n,r)=>ce(n,{urlData:{isRetail:e,originalURI:t,parameters:a},...r}))),At=(0,We.P)([Me.bS.context,xt,kt,St,Pt,yt,wt,Ct,Nt,Tt,Dt],((e,t,a,n,r,i,s,o,l,c,d)=>({rawContext:e,isRetail:t,originalURI:a,queryParameters:n,isInternal:r,makeUrl:l,sessionID:i,isRecognizedCustomer:Boolean(c),requestID:s,locale:o,appName:d})));var Ot=a("./src/util/utils/titleType.ts");const Vt="Live Event Default UX",Lt="Live Sporting Event UX 1",Wt="Live Sporting Event UX 2",Mt="Live Sporting Event UX 3",Bt="EVENT",Ut=e=>!!e&&[Vt,Lt,Wt,Mt,Bt].includes(e),jt=e=>Boolean(e&&"TV Show"==e.entityType),Ft=(0,We.P)(Me.mZ.headerDetail,jt),$t=(0,We.P)(Me.mZ.self,(e=>Boolean(e&&(0,Ot.g2)(e.titleType)))),Ht=(0,We.P)(Me.mZ.moreDetails,(e=>Ut(e&&e.entityType))),Gt=(0,We.P)([Me.mZ.moreDetails,Me.mZ.headerDetail],((e,t)=>e&&Boolean(e.explorePanelURL)||t&&Boolean(t.explorePanelURL))),qt=(0,We.P)(Me.mZ.notification,(e=>e&&e.warnings)),zt=(0,We.P)(Me.mZ.notification,(e=>e&&e.alerts));var Zt=a("./src/widgets/DVWebNodeDetail/selectors/actionFragment.ts"),Xt=a("./src/widgets/DVWebNodeDetail/utils/stringUtils.ts"),Qt=a("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts"),Yt=a("./src/widgets/DVWebNodeDetail/utils/playbackEnvelope.ts");const Jt="atv_dp_watch_trailer";let Kt;!function(e){e.feature="Feature",e.trailer="Trailer"}(Kt||(Kt={}));const ea=(0,We.P)([Me.bS.context,Me.bS.pageContext,$t],(({sessionID:e,marketplaceID:t,customerID:a,locale:n,deviceID:r},i,s)=>{let o;return o=s?"Live":"Android"===i.os?"MShop"===i.app?"DetailAndroidMShop":"DetailAndroid":"Detail",{sessionId:e,marketplaceId:t,customerId:a,locale:n,playerBeta:!1,useDefaultView:!0,pageType:o,deviceId:r}})),ta=(0,We.P)(Zt.a1,(e=>e?{playbackUrl:e.playbackURL,signInUrl:e.signInURL,contentConfig:{asin:e.playbackID,trailer:!1,position:e.resumeTime||0,ref:e.playerRefMarker,videoType:e.videoMaterialType,playbackEnvelope:(0,Yt.D)(e)}}:void 0)),aa=(0,We.P)([Me.mZ.trailer],(e=>e?{playbackUrl:e.playbackURL,contentConfig:{asin:e.playbackID,trailer:!0,position:0,ref:Jt,videoType:e.videoMaterialType}}:void 0)),na=(0,We.P)([St,ta,aa,Me.mZ.restriction],((e,t,a,n)=>{if(n&&n.blockedPageModel)return;const r=e.autoplay&&e.autoplay[0],i="trailer"===r?a:"1"===r?t:void 0;return i&&e.t&&(i.contentConfig.position=parseInt(e.t[0],10)||0),i})),ra=(0,We.P)([Me.bS.pageContext,ta,aa],((e,t,a)=>{const n="EMBEDDED"===e.playbackLaunchType&&t||"EMBEDDED"===e.playbackTrailerLaunchType&&a;return n&&!n.signInUrl?n.contentConfig:void 0})),ia=(0,We.P)([Me.bS.pageTitleId,Me.mZ.actionAtf,Zt.IB],((e,t,a)=>{const n={};return Object.entries({[e]:t,...a}).filter((([,e])=>Boolean(e))).forEach((([e,t])=>{const{playbackActions:a}=t,r=(0,Qt.fi)(a);r&&r.forEach((t=>{n[t]=e}))})),n}));var sa=a("./src/widgets/DVWebNodeDetail/utils/actionBoxUtils.ts");const oa=(0,We.P)([Zt.l7,Zt.aQ,Zt.u5,Zt.Li],((e,t,a,n)=>({subProblemMessages:e,offerMessages:t,topLevelTvodMessages:a,acceptedPreorder:n}))),la=(0,We.P)(Zt.ZM,(e=>e&&e.map((e=>e.message&&{text:(0,Xt.bJ)(e.message),logo:e.image,channelLogoURL:e.channelLink})).filter(Boolean)||[])),ca=(0,We.P)(Zt.J2,(e=>e&&e.label&&{text:(0,Xt.bJ)(e.label),logo:e.imageLink}||void 0)),da=(0,We.P)(Zt.lO,(e=>e&&e.map((e=>({text:(0,Xt.bJ)(e.header),logo:e.logo}))).filter(Boolean)||[])),ua=(0,We.P)(Zt.lO,(e=>({messages:(e||[]).reduce(((e,t)=>{const a=(0,Xt.bJ)(t.message);return t.severity&&!["CRITICAL","ERROR"].includes(t.severity)||!a.string||e.some((e=>e.string===a.string))||e.push(a),e}),[])}))),pa=(0,We.P)(Zt.lO,sa.N),ma=(0,We.P)([Zt.tW,Zt.rp],((e,t)=>{const a=t&&t.imageLink,n=t&&t.messages&&t.messages[0]&&t.messages[0].string,r=e&&e.filter((e=>"FREE"===e.entitlementType))||[];return n&&0===r.length&&a&&{text:(0,Xt.bJ)(n),logo:a}||void 0})),ga=(0,We.P)(Zt.tW,(e=>e&&e.map((e=>"FREE"!==e.entitlementType&&e.heading&&e.logo&&{text:(0,Xt.bJ)(e.heading),logo:e.logo,channelLogoURL:e.channelLink})).filter(Boolean)||void 0)),ha=(0,We.P)([la,da,ga,ma,ca,Zt.UT],((e,t,a,n,r,i)=>[...a||[],n,...t,...i&&"Collapsed"===i?[]:[r,...e]].filter((e=>Boolean(e&&e.text.string))))),_a=(0,We.P)([Zt.tW,Zt.rp],((e,t)=>{const a=t&&t.imageLink,n=t&&t.messages;return 0===(e&&e.filter((e=>"FREE"===e.entitlementType))||[]).length&&!a&&n||void 0})),fa=(0,We.P)(Zt.tW,(e=>e&&e.map((e=>"FREE"!==e.entitlementType&&!e.logo&&e.heading&&(0,Xt.e6)(e.heading))).filter(Boolean)||void 0)),va=(0,We.P)([oa,pa,qt,ha,Me.mZ.restriction,_a,fa,zt,Me.mZ.headerDetail,Me.mZ.hdPlaybackRestricted],((e,t,a,n,r,i,s,o,l,c)=>{const d=o&&o.filter((e=>"Default"===e.notificationType)).map((e=>(0,Xt.e6)(e.message))),u=l&&!Ut(l.entityType)&&o&&o.filter((e=>"ComingSoon"===e.notificationType)).map((e=>(0,Xt.e6)(e.message))),p=[...e.offerMessages||[],...i||[],...s||[],...d||[],...u||[]].filter(Boolean);return{notificationWarnings:[...(a||[]).map((e=>(0,Xt.e6)(e.message))),...t],subProblemMessages:e.subProblemMessages,messagesWithLogo:n,infoAlertMessages:p,topLevelTvodMessages:e.topLevelTvodMessages,acceptedPreorder:e.acceptedPreorder,maturityLockText:r&&r.maturityLockText,hdPlaybackRestricted:c&&c.message}})),ba=((0,We.P)([yt,Me.bS.pageTitleId,ea,Zt.a1,Et],((e,t,a,n,r)=>n&&{playbackData:n,sessionId:e,pageTitleId:t,playerConfigData:a,isRetail:r&&bt(r)}||void 0)),(0,We.P)([Zt.PC,Me.bS.self,Zt.VM,ft.CK],((e,t,a,n)=>{const r=t&&e&&t[e.titleID];return e&&{episodeIds:a,seasonNumber:n,label:e.label,downloadURL:e.downloadURL,fallbackURL:e.fallbackURL,titleID:e.titleID,episodeNumber:r&&"episode"===r.titleType.toLocaleLowerCase()?r.sequenceNumber:void 0,refMarker:e.refMarker}}))),Ea=(0,We.P)([ze,Zt.PC],((e,t)=>"NONE"!==e&&void 0!==t)),ya=(0,We.P)([yt,Me.bS.pageTitleId,Ye,ea,He,Me.bS.self,Zt.tW,Et],((e,t,a,n,r,i,s,o)=>s&&s.length>0&&{playbackDataList:s.map((e=>({playbackActionData:e,self:e&&i[e.playbackID]}))),sessionId:e,pageTitleId:t,isRetail:o&&bt(o),playerConfigData:n,isOfferClarityEnabled:a,isMShop:r}||void 0)),wa=(0,We.P)([yt,Me.bS.pageTitleId,ea,Me.mZ.trailer],((e,t,a,n)=>n&&{playbackData:n,playerConfigData:a,sessionId:e,pageTitleId:t}||void 0)),Ta=(0,We.P)([Zt.AI,Me.mZ.buyboxTitleId],((e,t)=>e&&{acquisitionActions:e,titleId:t,forceDoubleHeight:!0})),Da=(0,We.P)(Zt.Lu,(e=>e&&{message:e.message,returnLink:e.returnLink})),Ia=(0,We.P)(Zt.c9,(e=>!!e&&Boolean((e.children||[]).length>0))),Ca=(0,We.P)([Ia,Zt.c9,Me.mZ.buyboxTitleId],((e,t,a)=>({shouldShowMoreWaysToWatch:e,moreWaysToWatch:t,titleId:a}))),Pa=(0,We.P)([je,At,Me.bS.pageTitleId,Zt.c9,Zt.cD],((e,t,a,n,r)=>({isRedeemAndPromoRestricted:e,requestContext:t,titleID:a,moreWaysToWatch:n,hasTvodWinnerOffer:Boolean(r&&r.length>0)}))),Sa=(0,We.P)([Zt.J2,Zt.Br],((e,t)=>({messages:[...e&&e.secondaryMessages||[],...t&&t.secondaryMessages||[]]}))),ka=(0,We.P)(Me.mZ.headerDetail,(e=>e&&e.duration||void 0));var Ra=a("./node_modules/reselect/es/index.js");const xa=(0,We.P)(Me.mZ.metadata,(e=>null==e?void 0:e.chartPosition));var Na=a("./src/util/utils/dvstring/index.ts");const Aa=(0,We.P)([Nt,xt,Me.mZ.headerDetail],((e,t,a)=>{if(a){const n=a.images&&{titleLogo:a.images.titleLogo,providerLogo:a.images.providerLogo};return{title:a.parentTitle||a.title,asin:a.asin,cGti:a.compactGti,makeUrl:e,isRetail:t,...n}}})),Oa=(0,We.P)([Ft,Me.mZ.headerDetail],((e,t)=>{if(t)return{...t,isTV:e}})),Va=(0,We.P)(ft.A2,(e=>{const t=e&&(e.heroshot||e.fullBackground16x9);return Boolean(t)})),La=(0,We.P)(Me.mZ.headerDetail,(e=>e&&{synopsis:e.synopsis}||void 0)),Wa=(0,We.P)(ft.X0,(e=>e&&{text:e.text,isLive:e.isLive}||void 0)),Ma=(0,Ra.wN)((Ba=3,e=>{let t=null,a=null;return(...n)=>((null===t||n.some(((e,a)=>a<Ba&&e!==t[a])))&&(a=e(...n)),t=n,a)}))([Me.bS.pageTitleId,Me.mZ.seasons,xt,Me.bS.detail,Me.bS.self],((e,t,a,n,r)=>({seasons:t?t.map((e=>({titleId:e.seasonId,seasonLink:e.seasonLink,detail:n[e.seasonId],self:r[e.seasonId]}))):void 0,pageTitleId:e,isRetail:a})));var Ba;const Ua=(0,We.P)([$t,Me.mZ.headerDetail,ya],((e,t,a)=>{const n=Boolean(t&&t.title),r=Boolean(a);return e?n||r:n})),ja=(0,We.P)([$t,Me.mZ.headerDetail,ya],((e,t,a)=>{const n=!Boolean(t&&t.title),r=Boolean(a);return e&&n&&r})),Fa=(0,We.P)([Fe,je,xt,Me.mZ.comingSoon,Ze,Me.bS.bottomBar,Zt.MZ],((e,t,a,n,r,i,s)=>i&&{isMobile:e,isPurchaseRestricted:t,isRetail:a,isComingSoon:n,checkReviewEligibility:r,bottomBar:i,watchPartyAction:s}||void 0)),$a=(0,We.P)([Fe,xa],((e,t)=>t&&{isMobile:e,chartPosition:t}||void 0));(0,We.P)([Zt.lO],(e=>{const t=null==e?void 0:e.find((e=>"CRITICAL"===e.severity)),a=null==t?void 0:t.message.string.replace(/{lineBreak}/g," | ");return a&&{message:(0,Na.bE)(a)}}));var Ha=a("./node_modules/@amzn/dvui/dist/Container.js"),Ga=a("./node_modules/@amzn/dvui/dist/Expander.js"),qa=a("./node_modules/@amzn/dvui/dist/Modal.js");const za="-dmR1h",Za="_1XdgZK",Xa="_3fuIyl",Qa="_2c4dTP",Ya="_1muO3R",Ja="_16wNxC",Ka="_3MWctc",en=({synopsis:e,numOfLines:t=3,expanderId:a="synopsisExpander"})=>e?i.createElement("div",{className:`${he} ${Xa}`,"data-automation-id":a},i.createElement(Ga.Expander,{className:za,numOfLines:t,uniqueId:a},i.createElement(F,{string:e,dir:"auto"}))):null,tn=({synopsis:e})=>e?i.createElement("div",{className:`${he} dv-dp-node-synopsis`,"data-automation-id":"atf-synopsis"},i.createElement("div",{className:Za},i.createElement(en,{synopsis:e,numOfLines:4,expanderId:"atfSynopsisExpander"}))):null,an=({synopsis:e,modalId:t,header:a})=>{if(!e)return null;const n=i.createRef();return i.createElement(i.Fragment,null,i.createElement("div",{className:Ya,onClick:()=>{var e;null===(e=n.current)||void 0===e||e.open()}},i.createElement("p",{className:Ja},e)),i.createElement(qa.Modal,{className:Qa,ref:n,header:i.createElement("h2",{className:Ka},a),modalId:t},i.createElement("p",null,e)))};var nn=a("./node_modules/@amzn/dvui/dist/DropList.js"),rn=a("./node_modules/@amzn/dvui/dist/Icon.js"),sn=a("./node_modules/@amzn/dvui/dist/Badge.js");const on="dw87r6",ln="_2yk-LG",cn="DdeNtL",dn="_3w9pRe",un=({asins:e,gti:t,compactGTI:a,pageTitleId:n})=>Boolean(e.includes(n)||n===t||n===a),pn=(e,t)=>(0,Z.JQ)(t&&e.detail&&e.detail.isPrime),mn=(e,t,a)=>e.reduce(((e,n)=>{if(!(n&&n.self&&n.self.link))return e;const r=n.self,{asins:s,gti:o,compactGTI:l,sequenceNumber:c}=r;return e.push({text:i.createElement(z,{stringID:"AVOD_DP_season_selector",replace:{seasonNumber:void 0!==c?c.toString():""}}),href:n.seasonLink,isHighlighted:un({asins:s,gti:o,compactGTI:l,pageTitleId:t}),children:pn(n,a)?i.createElement(rn.Icon,{className:cn,use:rn.IconType.LOGO_PRIME}):null}),e}),[]),gn=({season:e})=>{const t=e.self&&e.self.sequenceNumber&&e.self.sequenceNumber.toString()||"";return i.createElement(sn.Badge,{use:sn.badges.TEXT,className:on},i.createElement(z,{stringID:"AVOD_DP_season_selector",replace:{seasonNumber:t}}))},hn=({seasons:e,pageTitleId:t="",isRetail:a=!1})=>!e||0===e.length||e[0]&&e[0].detail&&e[0].detail.entityType&&Ut(e[0].detail.entityType)?null:1===e.length&&e[0]&&e[0].self&&(0,Z.JQ)(e[0].self.isLaunched)?i.createElement(gn,{season:e[0]}):i.createElement("div",{className:we("dv-node-dp-seasons",ln,ye,dn)},i.createElement(nn.DropList,{links:mn(e,t,a),customDropListID:"av-atf-season-selector"}));var _n=a("./node_modules/@amzn/dvui/dist/Spacer.js");const fn="_3vxMzE",vn=({runtime:e,ariaLabel:t})=>e&&i.createElement(sn.Badge,{use:sn.badges.TEXT},i.createElement("span",{role:"text","aria-label":t,"data-automation-id":"runtime-badge"},e))||null;var bn=a("./src/widgets/DVWebNodeDetail/utils/isType.ts");const En=e=>(0,bn.P)(e,"atv.wps#AmazonMaturityRatingBadge"),yn=e=>(0,bn.P)(e,"atv.wps#RegulatoryRatingBadge"),wn=e=>(0,bn.P)(e,"atv.wps#LocalRatingBadge"),Tn=e=>"all"!==e.id;var Dn=a("./node_modules/@amzn/dvui/dist/MaturityRating.js");const In="T2CIjV",Cn="_1bVHQ0";var Pn=a("./src/shared/utils/maturityRatings/ratingMap.ts");const Sn=({displayText:e,description:t,id:a,localRatingLink:n},r,s)=>{var o;return s&&null!==(o=Pn.D[s])&&void 0!==o&&o[a]?i.createElement("span",{role:"text","aria-label":r,className:In},i.createElement("img",{className:Cn,src:Pn.D[s][a].url,alt:t,title:t})):i.createElement("span",{role:"text","aria-label":r,className:In},i.createElement(Dn.MaturityRating,{rating:"number"==typeof e?e:e.toUpperCase(),title:t,"data-testid":"rating-badge"},n&&i.createElement(l.Text,{string:n})))},kn=({ratingBadge:e,notRatedString:t,suitableForAriaLabel:a})=>{var n;const r=i.useContext($.h),s=null==r||null===(n=r.requestContext)||void 0===n?void 0:n.recordTerritory;if(!e)return null;if(En(e)){const n=e.description===t?e.description:a;return Sn(e,n,s)}return yn(e)?Sn(e,e.description,s):wn(e)?(({countryCode:e,simplifiedId:t,description:a,localRatingLink:n})=>{const r=e.toLowerCase();return i.createElement("span",{role:"text","aria-label":a,className:In},i.createElement(Dn.MaturityRating,{rating:t,locale:r,title:a,"data-testid":"rating-badge"},n&&i.createElement(l.Text,{string:n})))})(e):null};var Rn=a("./node_modules/@amzn/dvui/dist/Link.js");const xn=(e,t)=>Math.round(e*t)/t,Nn="SSMUJf",An="_335x9u";var On=a("./src/util/utils/analytics/recordReftag.tsx");const Vn="hBc1NK",Ln="_2nfUkY",Wn="_2uJdr2",Mn="_2YmrGh",Bn="_3OTZsy",Un="_2N6OB_",jn="KCxdj6",Fn="_1I_NdJ",$n="_1VEBQV",Hn="_1rhvY-",Gn="_2XXIkJ",qn="QX0gHi";var zn=a("./src/widgets/DVWebNodeDetail/context/withLogger.tsx");const Zn=(0,zn.n)((0,J.$j)((e=>({requestContext:At(e)})))((({requestContext:{isInternal:e},logger:t,error:a,children:n})=>(t.error(a),e?i.createElement("p",null,a.stack):i.createElement(i.Fragment,null,n))))),Xn=(e,t)=>function(a){try{return e(a)}catch(e){return i.createElement(Zn,{error:e},t)}},Qn="fOnUwr";const Yn=(0,J.$j)((e=>({requestContext:At(e)})))((0,zn.n)((e=>{const{requestContext:{isInternal:t},error:a,logger:n}=e,r=`Fatals found in Data: ${a}`;return n.error(r),t?i.createElement("div",{className:Qn},r):null}))),Jn=e=>t=>function(e){return!!e&&Boolean(e.error)}(t)?i.createElement(Yn,t):i.createElement(e,t),Kn="_2206LY",er="_3IGeF4",tr="_1rz0dR",ar="_1S1BHk",nr="PKM0ed",rr="_1YwDWW",ir="_3mj4pS";var sr=a("./node_modules/@amzn/dvui/dist/Button.js"),or=a.n(sr);const lr="_2UD9Ud",cr="_2tr-LP",dr="_2t5M7h",ur="_1aRTKf",pr="_31IoAh",mr="_2oX3Z6",gr="TKV4YL",hr="TdIcBN",_r="_1fbq7T",fr="_1cjcqN",vr="_1b1ljL",br="_3JtJT0",Er="fk_b7h",yr="_2eDsro",wr="_2IcXI4",Tr="_1Lu9Pi",Dr="_1DS9nN";var Ir=a("./node_modules/@amzn/dvui/dist/Icons/PlayArrow.js"),Cr=a.n(Ir),Pr=a("./node_modules/@amzn/dvui/dist/Tooltip.js"),Sr=a("./node_modules/@amzn/dvui/dist/Icons/Trailer.js"),kr=a.n(Sr);function Rr(){return Rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Rr.apply(this,arguments)}const xr="34px",Nr=({isSeeThrough:e=!1,isPackshotButton:t=!1,children:a,ariaLabel:n,onClick:r,className:s,href:o})=>{const l=we("dvui-playButton",lr,e?dr:cr,t?mr:"",s);return i.createElement("a",{href:o,onClick:r,"aria-label":n,className:l},i.createElement(i.Fragment,null,i.createElement(rn.Icon,{use:rn.IconType.PLAY_BUTTON_ARROW,className:ur}),a&&i.createElement("span",{className:"avu-screen-reader-only"},a)))},Ar=({progress:e=0,isLarge:t=!1,isStartOver:a=!1,isSeeThrough:n=!1,ariaLabel:r,onClick:s,onKeyDown:o,href:l,className:c,children:d})=>{const u=we(vr,{[Er]:!0===t},t?Er:br,c);return i.createElement("a",Rr({href:l,onClick:s,"aria-label":r,className:u,tabIndex:0},o&&{onKeyDown:o}),i.createElement("span",{className:we(lr,n?dr:cr)},i.createElement(rn.Icon,{use:a?rn.IconType.START_OVER:rn.IconType.PLAY_BUTTON_ARROW,className:we(ur,{[pr]:a})})),i.createElement("span",{className:yr},d,i.createElement(Or,{progress:e})))};Ar.displayName="PlayButton";const Or=({progress:e=0})=>e>0?i.createElement("span",{className:hr,"data-automation-id":"progress-bar"},i.createElement("span",{"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":e,className:fr,role:"progressbar",style:{width:`${e}%`}})):null,Vr=i.createElement("span",{className:wr},i.createElement(Cr(),{height:xr,width:xr})),Lr=({progress:e=0,isStartOver:t,className:a,children:n,useFreeButton:r,...s})=>i.createElement(sr.Button,Rr({},s,{use:t?sr.Default:r?sr.Free:sr.Playback},r?{icon:Vr}:{useIcon:t?rn.IconType.START_OVER:rn.IconType.PLAY_ARROW},{className:we(gr,{[a]:Boolean(a)},{[_r]:r})}),i.createElement("span",null,n),i.createElement(Or,{progress:e}));Lr.displayName="SquarePlayButton";const Wr=({isPrimaryButton:e=!1,...t})=>e?i.createElement(sr.Button,Rr({role:"button",useIcon:rn.IconType.TRAILER,testID:"trailer-button"},t)):i.createElement(Pr.Tooltip,{position:"top",size:"s",content:t.tooltipText||"",className:Dr,id:"dv-dp-node-trailer-tooltip",containerRef:t.containerRef},i.createElement(sr.Button,Rr({role:"button",testID:"trailer-button",className:Tr},t),i.createElement("span",{className:ur},i.createElement(kr(),null))));var Mr=a("./src/widgets/DVWebNodeDetail/utils/getPlaybackProgress.ts");const Br="_1d-Ol9",Ur="_2Hg1l0",jr="_1WPBbu",Fr="_13U24C",$r="_3YGDrM",Hr="_26nAHL",Gr="_2M-myL",qr="_3Kqcn7",zr="_2t8khh",Zr={actionBox:"_1D5Acx",singleLineButtons:"_3-dQxM",acquisition:"_8hKdEv",buttonContainer:"_1q35z5",disableOverlay:"_3GDQxn",spinnerWrapper:"_358cKJ",smallSpinnerWrapper:"_1UR0bR",messageWrapper:"zDu3N-",wrapper:"_28Bfau",linkWrapper:"_25QY39",linkWrapperTarget:"_10rk8T",isProcessingTransaction:"_3Nb3Qa",watchParty:"ziAmgX",purchaseFailedModal:"_2C8JD9",primaryActions:"_2aLrtz",secondaryActions:"_296Xcm",simplifiedBuyBoxDownload:"_1VtRUv",simplifiedBuyBoxDownloadT2:"_1PDPpL",buttonLabelT2:"NlLgih",buttonLabel:"_1DN7sB"};var Xr=a("./node_modules/@amzn/dvui/dist/Spinner.js");const Qr=({children:e=null,className:t=""})=>i.createElement("div",{className:[t,Zr.disableOverlay].join(" ")},e),Yr=({text:e,useSmallSpinner:t=!1,className:a=""})=>i.createElement(Qr,{className:a},i.createElement("div",{className:Zr.messageWrapper},i.createElement("div",{className:t?Zr.smallSpinnerWrapper:Zr.spinnerWrapper},i.createElement(Xr.Spinner,{fillHeight:!0,testID:"dp-spinner"})),e&&i.createElement("div",null,e)));var Jr="js-episode-playback",Kr="js-episode-offers",ei=a("./src/shared/player/integration/playbackArea.tsx"),ti=a("./src/shared/SPA/SpaContext.tsx");function ai(){return ai=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ai.apply(this,arguments)}const ni=({notificationActions:e})=>i.createElement(i.Fragment,null,(e||[]).filter((({severity:e})=>!e||["CRITICAL","ERROR"].includes(e))).map((e=>i.createElement("span",{className:Hr},i.createElement(l.Text,{string:e.message}))))),ri=({messages:e})=>e&&e.length>0?i.createElement("span",{className:Hr},e.map(((e,t)=>i.createElement(ii,{key:`pb-action-message-${t}`,message:e})))):null,ii=({message:e})=>i.createElement("span",{className:Gr},i.createElement(l.Text,{string:e})),si=({title:e,sequenceNumber:t,isBonus:a,entityType:n})=>e?Ut(n)||!t&&!a?i.createElement(F,{string:e}):a?i.createElement(z,{stringID:"DV_DP_EL_bonus_title_template",replace:{episodeTitle:e},shouldDecode:!0,dir:"auto"}):i.createElement(z,{stringID:"DV_DP_EL_episode_title_template",replace:{sequenceNumber:t?t.toString():"",episodeTitle:e},shouldDecode:!0,dir:"auto"}):null,oi=({title:e,purchaseDetails:t,sequenceNumber:a,isBonus:n=!1,entityType:r,playbackActions:s,notificationActions:o,inProgress:l})=>i.createElement("div",{className:`dv-episode-noplayback-title ${$r}`},i.createElement("div",{className:we({[Ur]:l,[jr]:Boolean(t)},Br)},i.createElement(si,{title:e,sequenceNumber:a,isBonus:n,entityType:r})),i.createElement(ni,{notificationActions:o}),i.createElement(ri,{messages:(0,Qt.D8)(s)})),li=({title:e,playbackActions:t,sequenceNumber:a,isBonus:n=!1,entityType:r,downloads:s,duration:o,isMShop:l})=>{const{getString:c}=i.useContext($.h),d=(0,Qt.MG)(t);if(!d)return null;const u=e?a?c("DV_DP_ARIA_watch_episode",{episodeNumber:a.toString(),episodeTitle:e}):c("DV_DP_ARIA_watch_title",{title:e}):void 0,p=d.playbackID,m=(0,Yt.D)(d),g={signInUrl:d.signInURL,playbackUrl:d.playbackURL,fallbackUrl:d.fallbackURL,sequenceNumber:a,isBonus:n,contentConfig:{asin:p,trailer:!1,position:d.resumeTime,ref:d.playerRefMarker,videoType:d.videoMaterialType,useFullView:!0,playbackEnvelope:m},subscriptionName:d.subscriptionName,triggerLocation:"EpisodeList",refMarker:d.refMarker},h=Math.max((0,Mr.fZ)(s,p,o),(0,Mr._y)(d.progress));return i.createElement(i.Fragment,null,i.createElement("div",{className:`dv-episode-playback-title ${qr}`},i.createElement(ei.ET.Consumer,null,(({onPlay:t})=>i.createElement(Ar,{progress:h,ariaLabel:u,href:l?void 0:d.playbackURL,onClick:e=>{t(g),e.preventDefault()}},i.createElement("div",{className:`js-episode-title-name ${zr}`},i.createElement(si,{title:e,sequenceNumber:a,isBonus:n,entityType:r})))))))},ci=(0,ti.cG)((e=>{const{playbackActions:t,purchaseDetails:a,isRefunding:n}=e,r=(0,Qt.MG)(t),s=Boolean(r),o=Boolean(a)||n;return i.createElement("div",{className:`js-eplist-episode ${Jr}`},r?i.createElement(li,e):i.createElement(oi,ai({},e,{inProgress:o})),o&&i.createElement(Yr,{className:Fr,text:s?"":a&&a.details&&a.details.offer.purchaseData.text||"",useSmallSpinner:!0}))}));var di=a("./src/widgets/DVWebNodeDetail/reducers/action.ts");const ui="cancelled",pi="delayed",mi="suspended",gi="postponed",hi=e=>!!e&&[ui,pi,mi,gi].includes(e.toLowerCase());var _i=a("./src/widgets/DVWebNodeDetail/reducers/detail.ts");const fi=({idx:e,detail:t,action:a,titleId:n,playerConfigData:r,isMShop:s})=>{if(o=a,!Boolean(o&&(0,Qt.MG)(o.playbackActions)))return i.createElement(i.Fragment,null,t.title);var o;const l={title:t.title,playbackActions:a&&a.playbackActions,entityType:t.entityType,playerConfigData:r,titleId:n,purchaseDetails:null,isRefunding:!1,isMShop:s};return i.createElement("div",{className:"js-sch-ep-playback-wrapper"},i.createElement("div",{"data-automation-id":`sch-ep-title-${e}`,className:`${Jr} js-schedule-episode schedule-playback-wrapper`},i.createElement(ci,l)))},vi=({startTime:e,liveState:t})=>{return t?(a=t.id)&&Boolean("upcoming"===a.toLowerCase())?i.createElement(i.Fragment,null,e):t.isLive?i.createElement("div",null," ",i.createElement(sn.Badge,{use:sn.badges.LIVE}," ",t.text," ")," "):hi(t.id)?i.createElement("div",null," ",i.createElement(sn.Badge,{use:sn.badges.CRITICAL}," ",t.text," ")," "):i.createElement("div",null," ",i.createElement(sn.Badge,{use:sn.badges.TEXT}," ",t.text," ")," "):null;var a},bi=(0,J.$j)(((e,t)=>({action:e.action[di.L5][t.titleId],playerConfigData:ea(e),detail:e.detail[_i.Xt][t.titleId],requestContext:At(e),isMShop:He(e)})))((({requestContext:{sessionID:e},playerConfigData:t,collectionType:a,idx:n,action:r,detail:s,titleId:o,isMShop:l})=>{const{liveState:c,startDate:d="",startTime:u=""}=s,p={sessionID:e,idx:n,detail:s,playerConfigData:t,action:r,titleId:o,isMShop:l},m=(e=>{var t,a;return null==e||null===(t=e.notificationActions)||void 0===t||null===(a=t.find((e=>"CRITICAL"===e.severity)))||void 0===a?void 0:a.shortMessage})(r);return i.createElement("li",{id:`av-ep-${a}${n}`,className:Kn},i.createElement("div",{className:er},i.createElement(fi,p)),m?i.createElement("div",{className:`${er} ${tr}`},m):i.createElement(i.Fragment,null,i.createElement("div",{className:`${er} ${ar}`},d),i.createElement("div",{className:`${er} ${nr}`},i.createElement(vi,{startTime:u,liveState:c}))))})),Ei=Jn(Xn((e=>{const{header:t,cardTitleIds:a,totalEpisodeSize:n,collectionType:r}=e;return 0===(a||[]).length?null:i.createElement("div",{className:be},t&&i.createElement("h1",{className:ir}," ",t," (",n,")"," "),i.createElement("ol",{className:rr},a.map(((e,t)=>i.createElement(i.Fragment,{key:`schedule-fragment-${e}-${t}`},i.createElement(bi,{idx:t,key:`schedule-item-${e}-${t}`,collectionType:r,titleId:e}))))))}))),yi="_3F8f9L",wi=e=>{e&&e.nativeEvent&&e.nativeEvent.ack&&e.nativeEvent.ack(e.currentTarget)},Ti="_6-gGES";function Di(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ii extends i.Component{constructor(...e){super(...e),Di(this,"state",{isVisible:Boolean(this.props.isOpen)}),Di(this,"openModal",(()=>{this.setState({isVisible:!0})})),Di(this,"openModalClickHandler",(e=>{wi(e),this.openModal(),e.preventDefault()})),Di(this,"closeModal",(()=>{this.setState({isVisible:!1}),this.props.onClose&&this.props.onClose()}))}componentDidUpdate(e){const{isOpen:t}=this.props;t!==e.isOpen&&this.setState({isVisible:t})}render(){const e=this.closeModal,t={openModal:this.openModal,openModalClickHandler:this.openModalClickHandler,closeModal:e},a={closeModal:e},{modalContent:n,modalHeader:r,modalFooter:s,toggle:o,modalId:l,className:c,size:d}=this.props,u="function"==typeof s?s(a):s,p="function"==typeof r?r(a):r,m="function"==typeof n?n(a):n;return i.createElement(i.Fragment,null,this.state.isVisible&&i.createElement(qa.Modal,{className:c||"av-narrow",isVisible:!0,onClose:e,footer:i.createElement("div",{className:Ti},u),header:i.createElement("h3",null,p),modalId:l,size:d},m),o&&o(t))}}var Ci=a("./node_modules/@amzn/dvui/dist/Alert.js"),Pi=a("./src/widgets/DVWebNodeDetail/actions/constants.ts"),Si=a("./src/util/utils/device.ts");const ki=e=>(0,bn.P)(e,"atv.wps#PurchaseActionTreeRight"),Ri=e=>(0,bn.P)(e,"atv.wps#SubscribeActionTreeRight"),xi=e=>(0,bn.P)(e,"atv.wps#AcquisitionActionTreeLeft"),Ni=e=>(0,bn.P)(e,"atv.wps#AcquisitionActionTreeRight"),Ai=e=>(0,bn.P)(e,"atv.wps#TvodAction"),Oi=e=>Ai(e)||(e=>(0,bn.P)(e,"atv.wps#PreorderAction"))(e),Vi=e=>(0,bn.P)(e,"atv.wps#SubscribeAction")||Boolean(e&&"SUBSCRIPTION"===e.sType),Li=e=>ki(e)&&e.children||[],Wi=e=>{const t=xi(e)&&e.children||[];return(0,Z.VF)(t.map((e=>Ni(e)&&e.children||[])))},Mi=e=>Wi(e&&e.moreWaysToWatch).filter(Oi),Bi=e=>Li(e&&e.tvodWinners).filter(Oi),Ui=(0,We.P)([Me.bS.pageTitleId,Me.mZ.actionAtf,Me.bS.self,Zt.IB],((e,t,a,n)=>{const r={},i=e=>{Object.entries(e).forEach((([e,t])=>{if(!t)return;const n=a[e],i=n?n.gti:void 0,{acquisitionActions:s}=t;[...Bi(s),...Mi(s)].forEach((t=>{r[t.offerToken]={canonicalId:e,offer:t,gti:i}}))}))};return i({[e]:t}),i(n),r})),ji=(0,We.P)([Ui,Me.bS.purchase],((e,t)=>t&&{...t,details:e[t.offerToken]})),{deviceTypeId:Fi}=(0,Si.dz)(),$i=(e,t,a,n,r,i)=>{const s=[Z.EZ,"Purchase",n?"continuePurchase":"startPurchase"].join("_");t.info(`[Purchase] - Initiating purchase of offerToken ${a}`).count(s,1,!1).count(`${s}_${Fi}`,1,!1),e({type:Pi.k.TriggerPurchase,payload:{offerToken:a,continueToken:n,refTag:r,gtiRedirect:i}})},Hi=({dispatch:e})=>e({type:Pi.k.PurchaseCancelled}),Gi=({dispatch:e,reload:t=!1})=>e({type:Pi.k.PurchaseFailed,payload:{reload:t}}),qi=(e,t)=>a=>({logger:n})=>{const r=t(),i=ji(r);i||n.fatal("[Purchase] - No ongoing purchase found").count(`${Z.EZ}_Purchase_refreshAfterDoneError`,1,!1).count(`${Z.EZ}_Purchase_refreshAfterDoneError_${Fi}`,1,!1);const s=i&&i.details,o=s&&!(0,Z.JQ)(s.offer.purchaseData.isSeasonPurchase)&&s.canonicalId||void 0,l=r.requestContext.queryParameters;return l&&(l.wpCode||l.wpTitleId)?((e,t,a)=>{const n="Retail"===a.domain?"/gp/video/watchparty":"/watchparty";e?window.location.assign(`${n}/${e}/ref=${(0,de.i)("atv_dp_wp_join_ap")}`):window.location.assign(`${n}/ref=${(0,de.i)("atv_dp_wp_create_ap")}?titleId=${t}`)})(l.wpCode&&l.wpCode[0],l.wpTitleId&&l.wpTitleId[0],r.requestContext):a(o)(e,t)};let zi=null;const Zi=(e,t)=>a=>async({logger:n})=>{const{purchase:r}=t();if(!r)return;const{offerToken:i,continueToken:s,refTag:o}=r;i!==zi?(zi=i,await a()(e,t),$i(e,n,i,s,o)):(n.fatal(`[Purchase] - CSRF Callback already called once for offerToken ${i}`).count(`${Z.EZ}_Purchase_refreshCSRFError`,1,!1).count(`${Z.EZ}_Purchase_refreshCSRFError_${Fi}`,1,!1),zi=null,Gi({dispatch:e,logger:n,reload:!0}))},Xi="_2kzSeI";var Qi=a("./src/shared/deeplink/index.ts");function Yi(){return Yi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Yi.apply(this,arguments)}const Ji=e=>{const{pageType:t,subPageType:a,refTagTitleId:n}=i.useContext($.h);return i.createElement(On.Jd,Yi({},e,{pageType:t,subPageType:a,titleId:n}))};function Ki(){return Ki=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ki.apply(this,arguments)}const es=({hiddenInputs:e={},children:t,id:a,...n})=>i.createElement("form",Ki({},n,{id:a,method:"POST"}),t,Object.keys(e).map(((t,a)=>i.createElement("input",{key:`ActionFormImput-${a}`,type:"hidden",name:t,value:e[t]}))));let ts;!function(e){e.ACTION_BOX="ab",e.EPISODE_LIST="el",e.MORE_WAYS_TO_WATCH="mw",e.MORE_WAYS_TO_SUBSCRIBE="mws",e.EPISODE_LIST_MORE_WAYS_TO_WATCH="el_mw"}(ts||(ts={}));const as=(0,zn.n)((0,J.$j)(((e,t)=>{const a=Ui(e)[t.tvodAction.offerToken];return{requestContext:At(e),canonicalTitleId:a&&a.canonicalId,isMShop:He(e),purchaseLaunchType:e.pageContext.purchaseLaunchType,offerClarityEnabled:e.pageContext.features&&"true"===e.pageContext.features.offerClarityEnabled}}),((e,{logger:t})=>({triggerPurchase:(a,n)=>$i(e,t,a,void 0,n)})))((({tvodAction:e,requestContext:{isRetail:t},scope:a,triggerPurchase:n,canonicalTitleId:r,closeModal:s,isMShop:o,purchaseLaunchType:c,offerClarityEnabled:d,svodWinnerChildrenExists:u=!1})=>{const p=e&&e.purchaseData;if(!p)return null;const m=!d||u||s?((e="DEFAULT")=>"HIGHLIGHTED"===e.toUpperCase()?sr.Purchase:sr.Default)(e.style):sr.Purchase;if("EMBEDDED"!==c){if(!p.appPurchaseUrl||"NONE"===c)return null;const t=`${p.appPurchaseUrl}&ref_=${e.refMarker}`,a=e=>{Qi.b[c]({url:t,fallbackUrl:p.appFallbackUrl}),e.preventDefault()};return i.createElement(sr.Button,{href:o?void 0:t,className:we(fe,"tvod-button"),onClick:a,use:m},i.createElement(l.Text,{string:e.label}))}{const{family:o,videoQuality:c="",offerType:d,nonJsPurchaseUrl:u}=p,g=e.refMarker,h=t?{refTag:g,offerToken:e.offerToken,csrfToken:e.csrfToken,asin:e.asin}:{offerToken:e.offerToken},_=async t=>{r&&((e,t)=>{const a=t===ts.EPISODE_LIST||t===ts.EPISODE_LIST_MORE_WAYS_TO_WATCH;if("function"!=typeof document.querySelector||!a)return;const n=document.querySelector(`[for="selector-${e}"]`);n&&("function"==typeof n.scrollIntoViewIfNeeded?n.scrollIntoViewIfNeeded(!1):"function"==typeof n.scrollIntoView&&n.scrollIntoView(!0))})(r,a),s&&s(),n(e.offerToken,g),t.preventDefault()},f=`${a}-${o}-${c}-${d}`.toLowerCase(),v=`tvod-btn-${f}`;return i.createElement(es,{id:v,action:u,className:`${fe} ${Xi}`,hiddenInputs:h,"data-automation-id":f},i.createElement(Ji,{refTag:g},i.createElement(sr.ConfirmButton,{onlyConfirmOnTouchDevices:!0,onClick:_,className:we("tvod-button",{"av-button":!e.style}),type:"submit",use:m},i.createElement(l.Text,{string:e.label}))),i.createElement("div",{dangerouslySetInnerHTML:{__html:`<script>\n              document.getElementById("${v}").addEventListener("submit",\n                function() {\n                  ue && ue.count('DVWebNodeDetail-PurchaseCoreExpJs', 1);\n                  return true;\n                }\n              )\n            <\/script>`}}))}}))),ns=(0,J.$j)((e=>({requestContext:At(e)})))((({svodAction:e,requestContext:{isRetail:t},className:a,forceDoubleHeight:n})=>{const r="PRIME"!==e.sType||t?sr.PurchaseButton:sr.PrimeButton;return i.createElement(r,{className:we({[a]:!!a},fe,"dv-signup-button"),href:e.signupLink,forceDoubleHeight:n},i.createElement(l.Text,{string:e.label}))})),rs="_3_bHuL",is="_1FQbVE",ss="_3dszrE",os="lrbuQZ",ls="_91sNtF",cs="_1ZKUqX",ds="_2Oq2gR",us="_8Lzlfe",ps="RfL6Kw",ms="_2ihM3u",gs="rzhTkT",hs="bODh2p",_s="_1YYz9r",fs="_1ud7G5";var vs=a("./node_modules/@amzn/dvui/dist/Block.js");const bs=({balances:e})=>e&&e.length?i.createElement("table",{className:ds},i.createElement("tbody",null,i.createElement("tr",null,i.createElement("th",null,i.createElement(z,{stringID:"DV_DP_GC_balance_type_heading"})),i.createElement("th",null,i.createElement(z,{stringID:"DV_DP_GC_balance_amount_heading"}))),e&&e.map((e=>i.createElement("tr",{key:e.label.string},i.createElement("td",null,e.label.string),i.createElement("td",null,e.displayAmount)))))):null;var Es=a("./node_modules/@amzn/dvui/dist/Input.js"),ys=a("./src/util/logger/logger.ts"),ws=a("./src/util/api/APIClient.ts");let Ts,Ds,Is;!function(e){e.GetPaymentSettingsOutput="atv.wps#GetPaymentSettingsOutput",e.GetSubtitlesSettingsOutput="atv.wps#GetSubtitlesSettingsOutput",e.GetDevicesSettingsOutput="atv.wps#GetDevicesSettingsOutput",e.NavigationTabsOutput="atv.wps#NavigationTabsOutput",e.GetAutoplaySettingsOutput="atv.wps#GetAutoplaySettingsOutput",e.GetInvoicesOutput="atv.wps#GetInvoicesOutput",e.GetInvoiceHistoryOutput="atv.wps#GetInvoiceHistoryOutput",e.GetMembershipsOutput="atv.wps#GetMembershipsOutput",e.GetLanguageSettingsOutput="atv.wps#GetLanguageSettingsOutput",e.PageTitleOutput="atv.wps#PageTitleOutput",e.PaymentUpgradeOutput="atv.wps#PaymentUpgradeOutput",e.AccountDetailsOutput="atv.wps#AccountDetailsOutput",e.DoubleBillingOutput="atv.wps#DoubleBillingOutput",e.MembershipPaymentWidgetOutput="atv.wps#MembershipPaymentWidgetOutput",e.SubscriptionsOutput="atv.wps#SubscriptionsOutput",e.ConfirmCancelOutput="atv.wps#ConfirmCancelOutput",e.GetPinOnPurchaseSettingsOutput="atv.wps#GetPinOnPurchaseSettingsOutput",e.GetPinSettingsOutput="atv.wps#GetPinSettingsOutput",e.GetViewingRestrictionsOutput="atv.wps#GetViewingRestrictionsOutput",e.ParentalControlsSettingsOutput="atv.wps#ParentalControlsSettingsOutput",e.PinWidgetTeen="atv.wps#PinWidgetTeen",e.PinWidgetStandard="atv.wps#PinWidgetStandard",e.ViewingRestrictionsWidgetTeen="atv.wps#ViewingRestrictionsWidgetTeen",e.ViewingRestrictionsWidgetPinNotSet="atv.wps#ViewingRestrictionsWidgetPinNotSet",e.ViewingRestrictionsWidgetStandard="atv.wps#ViewingRestrictionsWidgetStandard",e.EmptyWidget="atv.wps#EmptyContent",e.ActivityHistoryOutput="atv.wps#ActivityHistoryOutput",e.HiddenHistoryOutput="atv.wps#HiddenHistoryOutput"}(Ts||(Ts={})),function(e){e.NavigationTabsWidget="navigation-tabs",e.PageTitleWidget="page-title",e.PaymentUpgradeWidget="payment-upgrade",e.AccountDetailsWidget="account-details",e.MembershipPaymentWidget="membership-payment",e.ConfirmCancelWidget="confirm-cancel",e.DoubleBillingWidget="double-billing",e.SubscriptionsWidget="subscriptions",e.AutoplayWidget="autoplay",e.PaymentHistoryWidget="payment-history",e.ChannelsMembershipsWidget="channels-memberships",e.DevicesWidget="devices",e.LanguagesWidget="languages",e.SubtitlesWidget="subtitles",e.PaymentWidget="payment",e.PinOnPurchaseWidget="pin-on-purchase",e.PinWidget="pin",e.ViewingRestrictionsWidget="viewing-restrictions",e.ParentalControlsWidget="parental-controls",e.ActivityHistoryWidget="activity-history",e.HiddenHistoryWidget="hidden-history"}(Ds||(Ds={})),function(e){e.YourAccount="your-account",e.Channels="channels",e.Playback="playback",e.ParentalControls="parental-controls",e.Subtitles="subtitles",e.YourDevices="your-devices",e.Language="language",e.WatchHistory="watch-history",e.PaymentHistory="payment-history",e.HiddenHistory="hidden-history"}(Is||(Is={}));var Cs=a("./src/widgets/DVWebNodeDetail/actions/index.ts");const Ps=void 0,Ss={deviceEntries:Ps};var ks=a("./node_modules/@amzn/av-experiment-token-js-library/index.js");let Rs;!function(e){e.WP_ERROR="WP_ERROR",e.WP_END="WP_END",e.WP_STREAM_ENDED="WP_STREAM_ENDED",e.WP_CREATE_INELIGIBLE="WP_CREATE_INELIGIBLE",e.WP_JOIN_INELIGIBLE="WP_JOIN_INELIGIBLE",e.WP_GEO_RESTRICTION="WP_GEO_RESTRICTION",e.WP_UNSUPPORTED_BROWSER="WP_UNSUPPORTED_BROWSER",e.WP_UNSUPPORTED_CHAT="WP_UNSUPPORTED_CHAT",e.WP_CREATE_INELIGIBLE_TVOD="WP_CREATE_INELIGIBLE_TVOD",e.WP_JOIN_INELIGIBLE_TVOD="WP_JOIN_INELIGIBLE_TVOD",e.WP_CREATE_INELIGIBLE_SVOD_TVOD="WP_CREATE_INELIGIBLE_SVOD_TVOD",e.WP_JOIN_INELIGIBLE_SVOD_TVOD="WP_JOIN_INELIGIBLE_SVOD_TVOD",e.WP_BANNED_SPECIFIC_CHAT="WP_BANNED_SPECIFIC_CHAT",e.WP_SAFARI_MAC_UNSUPPORTED="WP_SAFARI_MAC_UNSUPPORTED"}(Rs||(Rs={}));const xs=e=>({learnMore:{href:`/watchpartylearn/ref=${e}`}}),Ns={learnMore:{href:`/help/watchparty/communityguidelines/ref=${(0,de.i)("atv_dp_wp_guid")}`}},As={[Rs.WP_ERROR]:{type:vs.MessageTypes.warning,heading:"DV_DP_WP_ERROR_HEADING",body:"DV_DP_WP_ERROR",automationId:"wp-error-banner"},[Rs.WP_END]:{type:vs.MessageTypes.info,heading:"DV_DP_WP_END_HEADING",body:"DV_DP_WP_END",automationId:"wp-end-banner"},[Rs.WP_STREAM_ENDED]:{type:vs.MessageTypes.info,heading:"DV_DP_WP_END_HEADING",body:"DV_DP_WP_STREAM_ENDED",automationId:"wp-stream-end-banner"},[Rs.WP_CREATE_INELIGIBLE]:{type:vs.MessageTypes.warning,heading:"DV_DP_WP_CREATE_INELIGIBLE_HEADING",body:"DV_DP_WP_CREATE_INELIGIBLE",dvStringAttrs:xs("atv_dp_wp_cr_in_learn"),automationId:"wp-create-ineligible-banner"},[Rs.WP_JOIN_INELIGIBLE]:{type:vs.MessageTypes.warning,heading:"DV_DP_WP_JOIN_INELIGIBLE_HEADING",body:"DV_DP_WP_JOIN_INELIGIBLE",dvStringAttrs:xs("atv_dp_wp_jn_in_learn"),automationId:"wp-join-ineligible-banner"},[Rs.WP_GEO_RESTRICTION]:{type:vs.MessageTypes.warning,heading:"DV_DP_WP_GEO_RESTRICTION_HEADING",body:"DV_DP_WP_GEO_RESTRICTION",automationId:"wp-geo-restriction-banner"},[Rs.WP_UNSUPPORTED_BROWSER]:{type:vs.MessageTypes.warning,heading:"DV_DP_WP_UNSUPPORTED_BROWSER_HEADING",body:"DV_DP_WP_UNSUPPORTED_BROWSER",dvStringAttrs:xs("atv_dp_wp_ub_learn"),automationId:"wp-unsupported-browser-banner"},[Rs.WP_UNSUPPORTED_CHAT]:{type:vs.MessageTypes.warning,heading:"DV_DP_WP_UNSUPPORTED_CHAT_HEADING",body:"DV_DP_WP_UNSUPPORTED_CHAT",automationId:"wp-unsupported-chat-banner"},[Rs.WP_CREATE_INELIGIBLE_TVOD]:{type:vs.MessageTypes.warning,heading:"DV_DP_WP_CREATE_INELIGIBLE_HEADING",body:"DV_DP_WP_CREATE_INELIGIBLE_TVOD",dvStringAttrs:xs("atv_dp_wp_cr_in_learn_t"),automationId:"wp-create-ineligible-banner"},[Rs.WP_JOIN_INELIGIBLE_TVOD]:{type:vs.MessageTypes.warning,heading:"DV_DP_WP_JOIN_INELIGIBLE_HEADING",body:"DV_DP_WP_JOIN_INELIGIBLE_TVOD",dvStringAttrs:xs("atv_dp_wp_jn_in_learn_t"),automationId:"wp-join-ineligible-banner"},[Rs.WP_CREATE_INELIGIBLE_SVOD_TVOD]:{type:vs.MessageTypes.warning,heading:"DV_DP_WP_CREATE_INELIGIBLE_HEADING",body:"DV_DP_WP_CREATE_INELIGIBLE_SVOD_TVOD",dvStringAttrs:xs("atv_dp_wp_cr_in_learn_st"),automationId:"wp-create-ineligible-banner"},[Rs.WP_JOIN_INELIGIBLE_SVOD_TVOD]:{type:vs.MessageTypes.warning,heading:"DV_DP_WP_JOIN_INELIGIBLE_HEADING",body:"DV_DP_WP_JOIN_INELIGIBLE_SVOD_TVOD",dvStringAttrs:xs("atv_dp_wp_jn_in_learn_st"),automationId:"wp-join-ineligible-banner"},[Rs.WP_BANNED_SPECIFIC_CHAT]:{type:vs.MessageTypes.warning,heading:"DV_DP_WP_BANNED_SPECIFIC_CHAT_HEADING",body:"DV_DP_WP_BANNED_SPECIFIC_CHAT",dvStringAttrs:Ns,automationId:"wp-banned-specific-chat"},[Rs.WP_SAFARI_MAC_UNSUPPORTED]:{type:vs.MessageTypes.warning,heading:"DV_DP_WP_SAFARI_MAC_UNSUPPORTED_HEADING",body:"DV_DP_WP_SAFARI_MAC_UNSUPPORTED_BODY",dvStringAttrs:xs("atv_dp_wp_ub_learn"),automationId:"wp-mac-safai-unsupported"}},Os="bannerMsg";let Vs;!function(e){e[e.ALLOW=0]="ALLOW",e[e.DENY_WITH_UPSELL=1]="DENY_WITH_UPSELL",e[e.DENY=2]="DENY",e[e.NOT_APPLICABLE=3]="NOT_APPLICABLE"}(Vs||(Vs={}));Vs.ALLOW,Vs.DENY_WITH_UPSELL,Vs.DENY,Vs.NOT_APPLICABLE;let Ls,Ws,Ms,Bs,Us,js,Fs;!function(e){e.PURCHASE="PURCHASE",e.RENTAL="RENTAL",e.SUBSCRIPTION="SUBSCRIPTION"}(Ls||(Ls={})),function(e){e.GEO_RESTRICTED="GEO_RESTRICTED",e.WP_ENDED="WP_ENDED",e.CHAT_NOT_SUPPORTED="CHAT_NOT_SUPPORTED",e.BANNED_USER="BANNED_USER"}(Ws||(Ws={})),function(e){e.WatchPartyInSession="WatchPartyInSession",e.Idle="Idle",e.Closed="Closed"}(Ms||(Ms={})),function(e){e.TransitionTitle="TransitionTitle"}(Bs||(Bs={})),function(e){e.INVALID_REQUEST_PARAMETERS="INVALID_REQUEST_PARAMETERS",e.DEPENDENCY_RETRIEVE_FAILURE="DEPENDENCY_RETRIEVE_FAILURE",e.WP_DECORATION_ERROR="WP_DECORATION_ERROR",e.WP_GET_TITLES_ERROR="WP_GET_TITLES_ERROR",e.UNAUTHORIZED_PRIME_PLAYBACK="UNAUTHORIZED_PRIME_PLAYBACK",e.WP_GET_STATE_ERROR="WP_GET_STATE_ERROR",e.WP_DESTROY_ERROR="WP_DESTROY_ERROR",e.WP_CREATE_ERROR="WP_CREATE_ERROR",e.UNAVAILABLE_TERRITORY="UNAVAILABLE_TERRITORY",e.RESOURCE_NOT_FOUND_ERROR="RESOURCE_NOT_FOUND_ERROR"}(Us||(Us={})),function(e){e.REGISTER="register",e.DEREGISTER="deregister",e.PAUSED="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_PAUSED",e.RESUMED="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_RESUMED",e.SEEK_FORWARD="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_SEEK_FORWARDS",e.SEEK_BACKWARD="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_SEEK_BACKWARDS",e.FINISHED="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_FINISHED",e.HOST="HUDDLES_EVENT_WATCH_PARTY_PLAYBACK_HOST"}(js||(js={})),function(e){e.SVOD="s",e.TVOD="t",e.SVOD_TVOD="st"}(Fs||(Fs={}));const $s="byHelpfulVotesDescending",Hs=e=>(0,Xt.q1)([e]),Gs={},qs=(e=Gs,t)=>{switch(t.type){case Cs.k.STORE_MERGE:return t.payload.reviews?((e,t={})=>Object.keys(t).reduce(((e,a)=>{if(e[a]){const n=e[a],r=t[a],i={...n.reviewIdToReview,...r.reviewIdToReview},s={...n.reviewsOrdering,...r.reviewsOrdering};e[a]={...n,reviewIdToReview:i,reviewsOrdering:s}}else e[a]=t[a];return e}),{...e}))(e,t.payload.reviews):e;case Cs.k.CHANGE_PAGE:return t.payload.reviews||Gs;default:return e}},zs=new ys.Oc("DVWebNode:detail"),Zs=e=>Object.entries(e).reduce(((e,[t,{catalogId:a,contributors:n,genres:r,enhancedSubtitles:i,images:s,isStarlightEnhanced:o,studios:l,...c}])=>(e[t]={...c,images:s&&{packshot:s.packshot,covershot:s.covershot}},e)),{}),Xs=(e,t)=>({[_i.Xt]:Zs({...(t.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.detail})),e)),{}),...(t.widgets.carousel||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.detail})),e)),{}),...(t.widgets.extras||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.detail})),e)),{}),...(t.widgets.castAndCrew?t.widgets.castAndCrew.castAndCrews:[]).reduce(((e,t)=>(t.titleCollections.cards.forEach((t=>{e[t.titleID]=t.detail})),e)),{}),...(t.widgets.seasonSelector||[]).reduce(((e,t)=>(e[t.titleID]=t.detail,e)),{}),...(t.widgets.bundleCarousel&&t.widgets.bundleCarousel.cards||[]).reduce(((e,t)=>(e[t.titleID]=t.detail,e)),{})}),[_i.B6]:{...t.widgets.header?{[e]:t.widgets.header.detail}:{}},[_i.k5]:{...t.widgets.productDetails?{[e]:t.widgets.productDetails.detail}:{}}}),Qs=(e,t)=>({...t.widgets.self?{[e]:t.widgets.self}:{},...(t.widgets.seasonSelector||[]).reduce(((e,t)=>(e[t.titleID]=t.self,e)),{}),...(t.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.filter((e=>e.self)).forEach((t=>{e[t.titleID]=t.self})),e)),{}),...t.widgets.buybox&&t.widgets.buybox.bestTitleID&&t.widgets.buybox.bestSelf?{[t.widgets.buybox.bestTitleID]:t.widgets.buybox.bestSelf}:{}}),Ys=(e,t)=>({...t.widgets.header?{[e]:t.widgets.header.imdb}:{}}),Js=(e,t)=>({...t.widgets.notification?{[e]:t.widgets.notification}:{}}),Ks=(e,t)=>({...t.widgets.seasonSelector?{[e]:t.widgets.seasonSelector.map((e=>({seasonId:e.titleID,seasonLink:e.seasonLink})))}:{}}),eo=(e,t)=>({...t.widgets.buybox?{[e]:t.widgets.buybox.titleID}:{}}),to=(e,t)=>({...t.widgets.creative?{[e]:t.widgets.creative}:{}}),ao=e=>e.widgets.pageContext,no=(e,t)=>({...t.widgets.restrictions?{[e]:t.widgets.restrictions}:{}}),ro=(e,t)=>({...t.widgets.trailer?{[e]:t.widgets.trailer}:{}}),io=(e,t)=>({...t.widgets.watchlist?{[e]:t.widgets.watchlist}:{}}),so=e=>({...(e.widgets.carousel||[]).reduce(((e,t)=>(t.cards.filter((e=>e.watchlist)).forEach((t=>{e[t.titleID]=t.watchlist})),e)),{}),...(e.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.filter((e=>e.watchlist)).forEach((t=>{e[t.titleID]=t.watchlist})),e)),{}),...(e.widgets.castAndCrew&&e.widgets.castAndCrew.castAndCrews.map((e=>e.titleCollections))||[]).reduce(((e,t)=>(t.cards.filter((e=>e.watchlist)).forEach((t=>{e[t.titleID]=t.watchlist})),e)),{}),...e.widgets.bundleCarousel&&e.widgets.bundleCarousel.cards||[].filter((e=>e.watchlist)).reduce(((e,t)=>(e[t.titleID]=t.watchlist,e)),{})}),oo=(e,t)=>({[di.L5]:[...t.widgets.titleContent||[],...t.widgets.extras||[]].reduce(((e,t)=>(t.cards.forEach((t=>{t.action&&(e[t.titleID]=t.action)})),e)),{}),[di.t1]:t.widgets.buybox?{[e]:t.widgets.buybox.action}:{}}),lo=(e,t)=>({fragments:{...(t.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.forEach((t=>{t.refund&&(e[t.titleID]=t.refund)})),e)),{}),...(t.widgets.extras||[]).reduce(((e,t)=>(t.cards.forEach((t=>{t.refund&&(e[t.titleID]=t.refund)})),e)),{}),...t.widgets.buybox?{[e]:t.widgets.buybox.refund}:{}},refunding:null}),co=e=>{return{header:e.text,collectionType:(t=e.collectionType,t&&t.toLowerCase()||""),totalCardSize:e.totalCardSize,titleIds:e.cards.map((e=>e.titleID)),impressionData:e.impressionData};var t},uo=(e,t)=>t.widgets.titleContent&&t.widgets.titleContent.length>0?{[e]:t.widgets.titleContent.map((e=>co(e)))}:{},po=(e,t)=>{var a,n;return(null===(a=t.widgets)||void 0===a||null===(n=a.extras)||void 0===n?void 0:n.length)>0?{[e]:t.widgets.extras.map((e=>co(e)))}:{}},mo=(e,t)=>{var a,n;return(null===(a=t.widgets)||void 0===a||null===(n=a.carousel)||void 0===n?void 0:n.length)>0?{[e]:t.widgets.carousel.map((e=>co(e)))}:{}},go=e=>(e.widgets.carousel||[]).reduce(((e,t)=>(t.cards.reduce(((e,t)=>(t.impressionAnalytics&&(e[t.titleID]=t.impressionAnalytics),e)),e),e)),{}),ho=e=>(e.widgets.carousel||[]).reduce(((e,t)=>(t.cards.reduce(((e,t)=>(t.entitlementCue&&(e[t.titleID]=t.entitlementCue),e)),e),e)),{}),_o=(e,t)=>t.widgets.bundleCarousel?{[e]:co(t.widgets.bundleCarousel)}:{},fo=(e,t,a)=>{const{widgets:{banner:n,buybox:r}}=t;return{crow:n?{[e]:n}:{},ui:vo(a,r&&r.action&&r.action.watchPartyAction&&r.action.watchPartyAction.watchPartyOfferType||Fs.SVOD)}},vo=(e,t)=>{const a=(e.queryParameters.bannerMsg||[]).join("").toUpperCase();let n;switch(a){case Rs.WP_CREATE_INELIGIBLE:n=t===Fs.TVOD?Rs.WP_CREATE_INELIGIBLE_TVOD:t===Fs.SVOD_TVOD?Rs.WP_CREATE_INELIGIBLE_SVOD_TVOD:Rs.WP_CREATE_INELIGIBLE;break;case Rs.WP_JOIN_INELIGIBLE_SVOD_TVOD:n=Rs.WP_JOIN_INELIGIBLE_SVOD_TVOD;break;case Rs.WP_JOIN_INELIGIBLE:case Rs.WP_JOIN_INELIGIBLE_TVOD:default:n=a}const r=As[n];return r?{type:r.type,headingStringId:r.heading,stringId:r.body,dvStringAttrs:r.dvStringAttrs,automationId:r.automationId}:null},bo=e=>({...(e.widgets.carousel||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.pageLink})),e)),{}),...(e.widgets.extras||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.pageLink})),e)),{}),...(e.widgets.castAndCrew&&e.widgets.castAndCrew.castAndCrews.map((e=>e.titleCollections))||[]).reduce(((e,t)=>(t.cards.filter((e=>e.pageLink)).forEach((t=>{e[t.titleID]=t.pageLink})),e)),{}),...(e.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.pageLink})),e)),{})}),Eo=(e,t)=>({...t.widgets.castAndCrew?{[e]:{...t.widgets.castAndCrew,castAndCrews:t.widgets.castAndCrew.castAndCrews.map((({titleCollections:e,cast:t})=>({cast:t,titles:e.cards.map((({titleID:e})=>e))})))}}:{}}),yo=(e,t)=>({...t.widgets.otherFormats?{[e]:t.widgets.otherFormats}:{}}),wo=e=>e.widgets.bottomBar,To=(e,t)=>t.widgets.buybox&&t.widgets.buybox.action&&t.widgets.buybox.action.experimentToken?Co(t.widgets.buybox.action.experimentToken,e):{},Do=(e,t)=>({...t.widgets.buybox?{[e]:Boolean(t.widgets.buybox.isComingSoon)}:{}}),Io=(e,t)=>({...t.widgets.metadata?{[e]:t.widgets.metadata}:{}}),Co=(e,t)=>{const a=new ks.ExperimentTokenHelper,n=(()=>{try{return a.decode(e)}catch(e){return void zs.count(`${Z.EZ}::ExperimentTokenCallFailure`,1,!1)}})();return n?{[t]:{...Po(n.pvCinemaToken),...So(n.cancellationWinbackToken)}}:{}},Po=e=>{const t=e&&e.brandingMessage,a=e&&e.logoUrl;return e?{pvCinemaToken:{message:(0,Xt.e6)(t),logoUrl:a}}:{}},So=e=>{const t=e&&e.cancellationWinbackStringInfo;return t?{cancellationWinbackToken:{cancellationWinbackStringInfo:{label:t.label,confirmationLabel:t.confirmationLabel,cancellationLabel:t.cancellationLabel,playbackLabel:t.playbackLabel,modalMessage:t.modalMessage},enrollmentId:e.enrollmentId,csrfToken:e.csrfToken}}:{}},ko=(e,t)=>({...t.widgets.autoplayHero?{[e]:t.widgets.autoplayHero}:{}}),Ro=e=>e.widgets.playbackIntegration?e.widgets.playbackIntegration:{},xo=(e,t)=>({...t.widgets.buybox&&t.widgets.buybox.hdPlaybackRestricted?{[e]:t.widgets.buybox.hdPlaybackRestricted}:{}}),No=(e,t)=>{const a=Ao(e);return{pageTitleId:a,detail:Xs(a,e),action:oo(a,e),refund:lo(a,e),imdb:Ys(a,e),bundleCarousel:_o(a,e),buyboxTitleId:eo(a,e),creative:to(a,e),banner:fo(a,e,t),notification:Js(a,e),seasons:Ks(a,e),self:Qs(a,e),trailer:ro(a,e),watchlist:io(a,e),hoverWatchlist:so(e),restriction:no(a,e),collections:uo(a,e),extras:po(a,e),carousel:mo(a,e),pageLink:bo(e),castAndCrew:Eo(a,e),otherFormats:yo(a,e),pageContext:ao(e),bottomBar:wo(e),entitlementCue:ho(e),tapsExperimentToken:To(a,e),autoplayHero:ko(a,e),playbackIntegration:Ro(e),hdPlaybackRestricted:xo(a,e),comingSoon:Do(a,e),impressionAnalytics:go(e),metadata:Io(a,e),widgets:{[a]:e.sections}}},Ao=e=>e&&e.widgets&&e.widgets.pageContext.pageTitleId,Oo=(e,t)=>({watchlist:{...t.watchlistAction?{[e]:t.watchlistAction}:{}}}),Vo=e=>{let t=Ps;if(e&&e.widgets){const a=e.widgets.find((e=>e.widgetType===Ds.DevicesWidget&&e.content));a&&(t=a.content.devices)}return{deviceEntries:t}},Lo=e=>e.reduce(((e,t)=>(e[t.reviewID]=t,e)),{}),Wo=(e,t)=>{const a=(e||[]).map((e=>e.reviewID));return{[Hs(t)]:a}},Mo=(e,t,a)=>{var n,r,i;return a?{reviews:{...e&&e.output?{[a]:{reviewsAnalysisModel:e.output.reviewsAnalysisModel,reviewIdToReview:{...Lo(e.output.reviews),...Lo(e.output.internationalReviews||[])},reviewsOrdering:Wo(e.output.reviews,t),internationalReviewsOrdering:null===(n=e.output.internationalReviews)||void 0===n?void 0:n.map((e=>e.reviewID)),createReviewLink:e.output.createReviewLink,allReviewsLink:e.output.allReviewsLink,localeLanguage:e.output.localeLanguage,reviewTitleId:e.output.titleID}}:{}},reviewSubmission:{...e&&e.output?{[a]:{customerSubmittedReview:(r=e.output.customerSubmittedReview,r&&{rating:r.rating,isVerifiedPurchase:r.isVerifiedPurchase,isUnprocessed:r.isUnprocessed,customerSubmittedReviewContent:r.review&&{reviewID:r.review.reviewID,reviewContent:null===(i=r.review.reviewContent)||void 0===i?void 0:i.replace(/<br \/>/g,"\n"),reviewTitle:r.review.reviewTitle,hoverText:r.review.hoverText,helpfulVotes:r.review.helpfulVotes,submissionRecord:r.review.submissionRecord}}),reviewSubmissionToken:e.output.reviewSubmissionToken,publicNameToken:e.output.publicNameToken,publicNameState:{state:"idle",publicName:e.output.publicName},reviewSubmissionLimits:e.output.reviewSubmissionLimits,reviewSubmissionState:"idle",ratingState:"idle",eligibilityState:"idle"}}:{}}}:{}},Bo=(e,t)=>({translatedReviews:{...t&&t.translatedReviews?{[e]:t.translatedReviews}:{}}}),Uo=(e,t)=>{const a=e.reviewContent&&{reviewContent:e.reviewContent.bodyText.replace(/<br \/>/g,"\n")},n=e.reviewContent&&{reviewTitle:e.reviewContent.titleText};return(null==t?void 0:t.output)&&{isVerifiedPurchase:t.output.isVerifiedPurchase,rating:e.ratingValue,reviewID:t.output.reviewId,isSuccessful:t.output.isSuccessful,...a,...n}};var jo=a("./node_modules/@amzn/dvui/dist/Pagination.js");const Fo=({currentOffset:e=0,totalItems:t,linkMaker:a,pageSize:n=10,paginationHardLimit:r=1e3,contextSize:i=1,strings:s})=>{const o=Math.floor((Math.min(t,r)-1)/n),l=e<0?0:e>=t?o*n:e;if(!(t>=0&&l>=0&&n>0&&r>0&&i>=0))return;if(t<=n)return;const c=Math.floor(l/n),d=(e,t)=>a(n*e,t),u=(e,t=!0)=>{const a=`${e+1}`;return{href:c===e?"":d(e,`pg_${a}`),title:s.page(a),type:"PaginatorPageNo",text:a,isOptional:t&&c!==e}},p=c>0&&{type:"PaginatorPrevious",href:d(c-1,"prv"),title:s.previous},m=c<o&&{type:"PaginatorNext",href:d(c+1,"nxt"),title:s.next},g=u(0,!1),[h,_]=c<=i?[1,1+2*i]:c>=o-i?[o-2*i,o]:[c-i,c+i],f=Math.max(1,h),v=Math.min(_,o),b=[p,g,f>1&&{type:"PaginatorGap"},...(0,Z.w6)(f,v).map((e=>u(e))),m].filter(Boolean);return b.length<=6?b.map((e=>("PaginatorPageNo"===e.type&&(e.isOptional=!1),e))):b},$o=(0,Z.bc)(["highlights","schedule","episodes","bonus","carousel"]),Ho=(0,Z.bc)(["episodes","bonus"]),Go=$o.reduce(((e,t)=>({...e,[t]:`${t}From`})),{}),qo=(e,t)=>{const a=Go[t],n=e&&a&&e[a]&&e[a][0];return(0,Z.e$)(n)},zo=(0,J.$j)((e=>({requestContext:At(e),pageTitleId:e.pageTitleId})))((({totalEpisodeSize:e,requestContext:{queryParameters:t,makeUrl:a},collectionType:n,pageTitleId:r})=>{const{getString:s}=i.useContext($.h);if(!["episodes","bonus"].includes(n))return null;const o={currentOffset:qo(t,n),totalItems:e,pageSize:200,paginationHardLimit:1e4,linkMaker:(e,i)=>{const s={...(o=t,Object.keys(Go).reduce(((e,t)=>{const a=Go[t];return a&&o[a]&&(e[a]=o[a][0]),e}),{})),[Go[n]]:`${e}`};var o;const l=`dv_dp_${n}_${i}`;return a(pe(r),{get:s,refTag:l})},strings:{page:e=>s("DV_WEB_PAGINATION_PAGE",{pageNumber:e}),previous:s("DV_WEB_PAGINATION_PREVIOUS"),next:s("DV_WEB_PAGINATION_NEXT")}};return i.createElement(jo.Pagination,{paginator:Fo(o)})}));var Zo=a("./src/widgets/DVWebNodeDetail/reducers/collections.ts");const Xo=e=>{const t=Yo();return Qo(e,t,Yu,(e=>{const t=e&&e.episodeListSize&&e.episodeListSize[0];return t?(0,Z.e$)(t):void 0})(e.context.queryParameters)||Zo.Wq)},Qo=(e,t,a,n)=>({...e,sections:["Btf"],widgets:(0,Z.Dv)({btf:t}),widgetsConfig:(0,Z.Dv)({episodes:{startIndex:a,pageSize:n},bonus:{startIndex:qo(e.context.queryParameters,"bonus"),pageSize:200}})}),Yo=()=>["Episodes","Bonus","Schedule","Highlights","Restrictions","ProductDetails","CastAndCrew","Restrictions","OtherFormats","Carousels"],Jo={customerID:"XXXXXXXXXXXXXXXX",isInternal:!0,requestID:"3BG2QKT044ZH8E680Q1X",domain:"Fogg",marketplaceID:"ART4WZ8MWBX2Y",sessionID:"258-0086353-3654954",customerIPAddress:"54.240.197.239",locale:"en_US",osLocale:"en-US,en;q=0.9",currentTerritory:"IE",recordTerritory:"IE",originalURI:"/",path:"/gp/video/storefront",weblabOverrides:{},queryParameters:{mock:["mock"]},userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36",trafficPolicies:"RM-INT",appName:"mock",deviceID:"mock",geoToken:"mock",contingencies:void 0,mocks:void 0};new ys.Oc("mock");let Ko;!function(e){e.GetDetailPage="GetDetailPage",e.GetTitles="GetTitles",e.WatchlistToggle="WatchlistToggle",e.GetYourDevicesSettingsPage="GetYourDevicesSettingsPage",e.GetTranslatedReviews="GetTranslatedReviews",e.SubmitCustomerReview="SubmitCustomerReview",e.SetPublicNameInput="SetPublicNameInput",e.DeleteCustomerReview="DeleteCustomerReview",e.FetchReviewEligibility="FetchReviewEligibility"}(Ko||(Ko={}));const el=new ys.Oc("DVWebNode_detail"),tl=new s.eZ(new ws.l(el)),al=async({operation:e,input:t})=>{const a=await tl.GetDetailPage(t);return(0,r.v5)(e,!0),No(a,Jo)},nl=(e,t)=>ul({input:e,operation:Ko.GetDetailPage},al,t),rl=async({operation:e,input:t})=>{const a=await tl.GetTitles(t);return(0,r.v5)(e,!0),n=a,Object.keys(n.results).reduce(((e,t)=>{const{action:a,refund:r}=n.results[t];return e.action[di.L5][t]=a,e.refund.fragments[t]=r,e}),{action:{[di.t1]:{},[di.L5]:{}},refund:{fragments:{}}});var n},il=async({operation:e,input:t})=>{const a=await tl.WatchlistToggle(t);return(0,r.v5)(e,!0),a},sl=async({operation:e,input:t},a)=>{const n=await tl.GetYourDevicesSettingsPage(t,a);return(0,r.v5)(e,!0),n},ol=(e,t,a,n=0)=>async r=>{const i=await tl.GetReviews((s={context:e,titleID:t},o={pageNumber:n,sortBy:a,includeReviewsSummary:!1},{...s,...o}));var s,o;r({type:Cs.k.STORE_MERGE,payload:{...Mo(i,a,t)}})},ll=async({operation:e,input:t})=>{const a=await tl.GetTranslatedReviews((e=>({context:e.context,token:e.token,reviewsToTranslate:JSON.stringify(e.reviewsToTranslate)}))(t));return(0,r.v5)(e,!0),a},cl=async({operation:e,input:t})=>{const a=await tl.SetPublicName(t);return(0,r.v5)(e,!0),a},dl=async({operation:e,input:t})=>{const a=await tl.SubmitCustomerReview((e=>({context:e.context,titleID:e.titleID,reviewID:e.reviewID,ratingValue:e.ratingValue,token:e.token,reviewContent:JSON.stringify(e.reviewContent)}))(t));return(0,r.v5)(e,!0),a};const ul=({input:e,operation:t},a,n,i,s)=>async(o,l)=>{const c=e=>{const t=n(e);o(t)};try{(0,r._D)(t),(0,r.NZ)(t);const n={...e,context:l().requestContext},s=await a({input:n,operation:t},i);(0,r.rm)(t,!0),(0,r.QS)(t,!0),c(s)}catch(e){e instanceof vt.yM?el.info(e):el.fatal(e),c(null),"function"==typeof s&&s(e)}};function pl(){return pl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},pl.apply(this,arguments)}function ml(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const gl="DVWebNodeDetail-RedeemCode",hl="/videohelp",_l={video_support_website_url:{href:hl}};var fl=0,vl=1,bl=2;class El extends i.Component{constructor(e){super(e),ml(this,"handleInput",(e=>{this.setState({code:e.target.value,formStatus:fl})})),ml(this,"onDismiss",(()=>{this.setState({formStatus:fl})})),ml(this,"handleSubmit",(e=>{e.preventDefault(),this.setState({disableInputs:!0}),this.redeemCode()})),ml(this,"redeemCode",(async()=>{try{const e={context:this.props.requestContext,csrfToken:this.props.csrfToken,code:this.state.code},t=await tl.RedeemCode(e);(0,Z.JQ)(t.success)?(this.setState({formStatus:bl}),t.balanceType&&await this.props.updateBalance([t.balanceType])):this.setState({formStatus:vl})}catch(e){this.props.logger.error("DVWebNodeDetail-RedeemCode - RedeemCode request failed",e).count(gl,1,!1),this.setState({formStatus:vl})}this.setState({disableInputs:!1})})),this.state={disableInputs:!1,code:"",formStatus:fl}}render(){const{csrfToken:e,hideInput:t}=this.props,{formStatus:a,code:n,disableInputs:r}=this.state,s=!e||r;return i.createElement(i.Fragment,null,!t&&i.createElement("form",{onSubmit:this.handleSubmit},i.createElement("label",{htmlFor:"dv-gc-input",className:_s},i.createElement(z,{stringID:"DV_DP_UB_GC_enter_code"})),i.createElement("div",{className:ms},i.createElement($.h.Consumer,null,(({getString:e})=>i.createElement(Es.Input,{className:gs,type:"text",placeholder:e("DV_DP_GC_code_input_placeholder"),autoComplete:"off",id:"dv-gc-input",value:n,onChange:this.handleInput,required:!0,disabled:s}))),i.createElement("div",{className:hs},i.createElement(Ji,{refTag:"atv_dp_apply_gcpc"},i.createElement(sr.Button,{textAlign:"center",use:sr.Purchase,type:"submit",className:_n.spacerAlignItems.center,disabled:s},i.createElement(z,{stringID:"DV_DP_UB_GC_popup_apply"})))))),i.createElement(wl,{formStatus:a,onDismiss:this.onDismiss}))}}const yl={className:`${us} ${fs}`,heading:"",dismissable:!0},wl=({formStatus:e,onDismiss:t})=>{switch(e){case vl:return i.createElement("div",{id:"codeFailedBlock"},i.createElement(vs.MessageBlock,pl({type:vs.MessageTypes.warning},yl,{onDismiss:t}),i.createElement(z,{stringID:"DV_DP_GC_wrong_code",dvStringAttrs:_l})));case bl:return i.createElement("div",{id:"codeSuccessBlock"},i.createElement(vs.MessageBlock,pl({type:vs.MessageTypes.success},yl),i.createElement(z,{stringID:"DV_DP_UB_GC_success_message"})));default:return null}},Tl=(0,zn.n)(El);function Dl(){return Dl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Dl.apply(this,arguments)}const Il="DVWebNodeDetail-GetGiftCard",Cl={url:{href:hl}};var Pl=0,Sl=1,kl=2;class Rl extends i.Component{constructor(e){var t,a,n;super(e),n=async e=>{try{const t={context:this.props.requestContext,balanceTypes:e};this.setState({balanceStatus:Sl});const a=await tl.GetGiftCard(t),{giftCardContent:n}=this.state,r=Ol(n&&n.balanceMap,a&&a.balances);this.setState({balanceStatus:Pl,giftCardContent:{csrfToken:a&&a.csrfToken,balanceMap:r}})}catch(e){this.props.logger.error("DVWebNodeDetail-GetGiftCard - GetGiftCard request failed",e).count(Il,1,!1),this.setState({balanceStatus:kl,giftCardContent:void 0})}},(a="updateBalance")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.state={balanceStatus:Sl}}componentDidMount(){this.updateBalance(["GiftCard","Promotion"])}render(){const{requestContext:e}=this.props,{giftCardContent:t,balanceStatus:a}=this.state;return i.createElement("div",null,i.createElement(Tl,{csrfToken:t&&t.csrfToken,requestContext:e,updateBalance:this.updateBalance,hideInput:a===kl}),i.createElement("p",{className:os},i.createElement(z,{stringID:"AVOD_DP_GC_promotion_message"})," ",i.createElement(Rn.Link,{href:"/help/video/giftcard",target:"_blank"},i.createElement(z,{stringID:"AVOD_DP_GC_toc_learn_more"}))),i.createElement("h3",{className:ls},i.createElement(z,{stringID:"DV_DP_DV_GCPC_window_title"})),a!==kl&&i.createElement("p",{className:cs},i.createElement(z,{stringID:"DV_DP_GC_balances_explanation"})),i.createElement("div",{className:ps},i.createElement(Al,{balanceStatus:a,balances:t&&t.balanceMap&&Object.values(t.balanceMap)})))}}const xl=(0,zn.n)(Rl),Nl={className:us,heading:"",dismissable:!1},Al=({balanceStatus:e,balances:t})=>{switch(e){case Pl:return i.createElement(bs,{balances:t});case Sl:return i.createElement(Xr.Spinner,null);case kl:return i.createElement("div",{id:"balanceUpdateFailedBlock"},i.createElement(vs.MessageBlock,Dl({type:vs.MessageTypes.warning},Nl),i.createElement(z,{stringID:"DV_DP_GC_balance_update_failed",dvStringAttrs:Cl})));default:return null}},Ol=(e,t)=>{const a=e?{...e}:{};return t&&t.forEach((e=>a[e.balanceType]=e)),a},Vl=({requestContext:e,isOpen:t,onClose:a})=>i.createElement(i.Fragment,null,t&&i.createElement(qa.Modal,{className:rs,isVisible:!0,onClose:a,header:i.createElement(Ll,null),modalId:"giftCardModal",size:"s"},i.createElement(xl,{requestContext:e}))),Ll=()=>i.createElement("div",{id:"giftCardModalHeader"},i.createElement("h3",{className:is},i.createElement("strong",null,i.createElement(z,{stringID:"DV_DP_GC_widget_heading"})))),Wl=({openModal:e})=>i.createElement(Ji,{refTag:"dv-gcp-modal"},i.createElement(Rn.Link,{className:ss,onClick:e},i.createElement(z,{stringID:"AVOD_DP_redeem_gift_card_or_promotion"}))),Ml="_3WZMgk",Bl=({titleID:e,parameters:t,originalURI:a,isRetail:n})=>{const r=ue({parameters:t,originalURI:a,isRetail:n},"dv_dp_gc_sign_in",me({parameters:t,originalURI:a,isRetail:n},e,"dv_dp_gc_sign_in"));return i.createElement(Rn.Link,{href:r},i.createElement(z,{stringID:"AVOD_DP_redeem_gift_card_or_promotion"}))},Ul=(...e)=>{e.forEach((e=>e&&e()))},jl=(0,J.$j)((e=>Pa(e)))((({isRedeemAndPromoRestricted:e,hasTvodWinnerOffer:t,titleID:a,moreWaysToWatch:n,placement:r,closeModal:s,requestContext:{isRecognizedCustomer:o,queryParameters:l,originalURI:c,isRetail:d},toggleGiftCardModal:u})=>!d||e||"ActionBox"===r&&(!t||_c(n))?null:i.createElement("div",{className:we(Ml,"dv-gift-card-wrapper")},o?i.createElement(Wl,{openModal:()=>Ul(s,u)}):i.createElement(Bl,{titleID:a,parameters:l,originalURI:c,isRetail:d})))),Fl="_3FevTR",$l="_18cEc-",Hl="BGWBAK",Gl="Fk_mk-",ql="_20rKJm",zl="_3VsqmF",Zl="xLG7dw",Xl="IcrXck",Ql=({Tag:e,className:t,message:a})=>a?i.createElement(e,{className:t},i.createElement(l.Text,{className:ye,string:a})):null,Yl=({Tag:e,messages:t,className:a})=>(0,Z.xb)(t)?null:i.createElement(i.Fragment,null,t.map(((t,n)=>i.createElement(Ql,{Tag:e,message:t,className:a,key:`conditional-text-${n}`})))),Jl="NgssYl",Kl="zNwind",ec="_2DUDiN",tc="_2uG3bk",ac="_3IwZL4",nc="_3GDbaV",rc="_2L84tL",ic="_3pCHEe";function sc(){return sc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},sc.apply(this,arguments)}const oc=({message:e})=>e?i.createElement("p",{className:ec},i.createElement(rn.Icon,{use:rn.IconType.LOCK,className:tc}),i.createElement(l.Text,{string:e})):null,lc=((0,zn.n)((({accessChangeMessages:e,className:t,logger:a})=>((0,i.useEffect)((()=>{e.length>0&&a.count("DVWebNode::Detail::AtfLeavingSoonMessages",1,!1)}),[]),i.createElement(Yl,{Tag:Ci.WarningAlert,messages:e,className:t})))),({preorder:e})=>{if(!e)return null;const{body:t,cancelOrderText:a,title:n,displayMessages:r}=e;return i.createElement("div",{className:nc},i.createElement("h2",null,n),i.createElement(l.Text,{string:t,tag:"p"}),r.map((e=>i.createElement(l.Text,{string:e,tag:"p"}))),i.createElement(l.Text,{string:a,tag:"p"}))}),cc=({acceptedPreorder:e,notificationWarnings:t,subProblemMessages:a,infoAlertMessages:n,messagesWithLogo:r,topLevelTvodMessages:s,maturityLockText:o,tapsExperimentToken:c,showCancellationWinback:d,hdPlaybackRestricted:u})=>i.createElement("div",{className:we(Jl,Kl,he,"av-playback-messages")},i.createElement(Yl,{Tag:Ci.ErrorAlert,messages:a}),i.createElement(oc,{message:o}),i.createElement(lc,{preorder:e}),i.createElement(Yl,{Tag:Ci.WarningAlert,messages:t}),i.createElement(Yl,{Tag:Ci.InfoAlert,messages:n}),i.createElement(Yl,{Tag:Ci.InfoAlert,messages:s}),i.createElement(Ql,{Tag:Ci.InfoAlert,message:u}),(({messagesWithLogo:e,tapsExperimentToken:t,showCancellationWinback:a})=>e?e.filter((e=>Boolean(e&&e.text&&e.text.string))).map(((e,n)=>{const r=i.createElement(l.Text,{string:e.text});if(r&&!e.logo)return i.createElement(Ci.InfoAlert,{key:`message-logo-alert-${n}`,className:rc},r);const s={alt:"",src:e.logo,baseValue:35,baseType:Ie.HEIGHT,format:Ce.png},o=t&&t.cancellationWinbackToken,c=o&&o.cancellationWinbackStringInfo&&o.cancellationWinbackStringInfo.playbackLabel,d=i.createElement(pt,sc({className:ac},s));return i.createElement("p",{key:`message-logo-${n}`,className:rc},e.channelLogoURL?i.createElement("a",{"data-automation-id":"channelLogo-link",href:e.channelLogoURL},d):d,i.createElement("strong",null,r,c&&a&&[i.createElement("br",null),i.createElement("span",{className:ic},c)]))})):null)({messagesWithLogo:r,tapsExperimentToken:c,showCancellationWinback:d}));function dc(){return dc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},dc.apply(this,arguments)}const uc=({label:e,sequenceNumber:t})=>{const a=t&&t.toString()||"";return i.createElement("h3",{className:Fl},(0,o.VJ)(e,{episodeNumber:a}))},pc={alt:"",baseValue:35,baseType:Ie.HEIGHT,format:Ce.png},mc=(e,t)=>i.createElement("div",{key:`actionGroup-${t}`,className:zl},e.children.map(((e,t)=>{return Vi(e)&&(0,Z.xb)(e.problems)&&i.createElement("div",{className:Zl,key:`SvodButton-${t}`},e.image&&(a=i.createElement("div",null,i.createElement(pt,dc({},pc,{src:e.image}))),(n=e.channelLink)?i.createElement("a",{href:n},a):a),e.message&&i.createElement("p",{className:$l},e.message),i.createElement(ns,{className:Hl,svodAction:e}));var a,n}))),gc=({moreWaysToWatch:e,closeModal:t,sequenceNumber:a,toggleGiftCardModal:n})=>{if(!e)return null;const r=(xi(s=e)&&s.children||[]).map((e=>Ni(e)&&e)).filter(Z.yb);var s;return(0,Z.xb)(r)?null:i.createElement("div",{className:`dv-mwtw-modal ${Gl}`},r.map(((e,n)=>(e=>e.children&&e.children[0]&&Vi(e.children[0]))(e)?mc(e,n):((e,t,a,n)=>i.createElement("div",{key:`actionGroup-${t}`,className:ql},e.metadata&&e.metadata.label&&i.createElement(uc,{label:e.metadata.label,sequenceNumber:a}),i.createElement(_n.Spacer,{space:_n.spacerSpacing.xs},i.createElement(Yl,{Tag:Ci.InfoAlert,messages:e.metadata.messages})),e.children.map(((e,t)=>Oi(e)&&i.createElement("div",{key:`TvodButton-${t}`,className:Xl},i.createElement(_n.Spacer,{space:_n.spacerSpacing.xs},i.createElement(Yl,{Tag:Ci.InfoAlert,messages:e.displayMessages})),i.createElement(as,{tvodAction:e,scope:ts.MORE_WAYS_TO_WATCH,closeModal:n}))))))(e,n,a,t))),i.createElement(jl,{placement:"MWTW",closeModal:t,toggleGiftCardModal:n}))},hc=({svodWinners:e})=>(0,Z.xb)(e.children)?null:i.createElement("div",{className:`dv-mwts-modal ${Gl}`},mc(e,0)),_c=e=>!!e&&(e.children||[]).length>0,fc=Xn((({moreWaysToWatch:e,sequenceNumber:t,titleId:a,toggleGiftCardModal:n,componentClassName:r,linkClassName:s})=>{if(!_c(e)||!a)return null;const o=e&&e.metadata&&e.metadata.refMarker||(0,de.i)("atv_dp_mpo_el");return i.createElement("div",{className:we(ve,r)},i.createElement(Ii,{size:"m",modalId:"dvui-close-overlay-btf-mwtw",modalContent:({closeModal:a})=>i.createElement(gc,{closeModal:a,moreWaysToWatch:e,sequenceNumber:t,toggleGiftCardModal:n}),toggle:({openModalClickHandler:e})=>i.createElement(Ji,{refTag:o},i.createElement(Rn.Link,{className:we(yi,s),"data-ux-click":!0,onClick:e},i.createElement(z,{stringID:"DV_MWTW_TITLE"})))}))})),vc="D4QHzV",bc="Z0BNXi",Ec="_3coi4u",yc="_2JPOKx",wc="_37IQB2",Tc=e=>({type:Pi.k.CreateBanner,payload:e}),Dc=({dispatch:e})=>e({type:Pi.k.RefundCancelled}),Ic=({dispatch:e})=>{e({type:Pi.k.RefundFailed})},Cc=e=>{const t=e.links&&e.links.map((t=>({...t,onClick:a=>{const n=document.getElementById(`av-droplist-${e.customDropListID}`);n&&n.checked&&(n.checked=!1),t.onClick(a)}}))),a={...e,links:t};return i.createElement(nn.DropList,a)};function Pc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Sc=(e,t,a)=>({string:t("DV_AB_CANCEL_ACCIDENTAL_PURCHASE"),attrs:{cancelLink:{href:e,...a}}});class kc extends i.Component{constructor(e){super(e),Pc(this,"updateSelected",((e,t)=>{this.setState({selectedLink:e,selectedIdx:t})})),Pc(this,"convertRefundOrdersToLinks",(e=>e.map(((e,t)=>({text:e.description,isHighlighted:this.state.selectedIdx===t,href:`#${t}`,onClick:a=>{this.updateSelected(e.singleRefundLink,t),a.preventDefault()}}))))),Pc(this,"addReturnUrl",(e=>`${e}&return_to=/dp/${this.props.pageTitleId}`)),this.state={selectedIdx:0,selectedLink:e.refundableOrders[0].singleRefundLink}}render(){const{refundableOrders:e,getString:t}=this.props;if(1===e.length)return i.createElement(l.Text,{string:Sc(e[0].singleRefundLink,t)});{const a=i.createElement("strong",null," ",t("DV_RBB_CANCEL_PURCH_MODAL_HEADER")," "),n=i.createElement(i.Fragment,null,i.createElement("div",{className:`${bc}`}," ",t("DV_DP_you_multiple_orders_for_this_title")," "),i.createElement("div",null," ",t("DV_DP_choose_order_to_cancel")," "),i.createElement("div",{className:`${Ec}`,"data-automation-id":"refund-drop-list"},i.createElement(Cc,{links:this.convertRefundOrdersToLinks(e),customDropListID:"av-atf-multiple-refund"})),i.createElement(sr.PrimeButton,{href:this.addReturnUrl(this.state.selectedLink),className:wc,"data-automation-id":"refund-submit-button"},t("DV_RBB_CANCEL_PURCH_MODAL_SUBMIT")));return i.createElement(Ii,{size:"xs",className:`${yc}`,modalHeader:a,modalContent:n,toggle:({openModalClickHandler:e})=>i.createElement(Rc,{triggerRefund:e,getString:t})})}}}const Rc=({triggerRefund:e,getString:t})=>{const a=t("DV_AB_CANCEL_ACCIDENTAL_PURCHASE"),n="{link|cancelLink}",r="{end}",s=a.indexOf(n),o=a.indexOf(r),l=a.substring(0,s),c=a.substring(s+n.length,o),d=a.substring(o+r.length);return i.createElement(i.Fragment,null,l&&i.createElement("span",null,l),i.createElement(Rn.Link,{href:"#",onClick:t=>e(t)},c),d&&i.createElement("span",null,d))},xc=(0,zn.n)((0,J.$j)(((e,{titleId:t})=>({refundFragment:e.refund.fragments[t],isRetail:At(e).isRetail,pageTitleId:t})),((e,{logger:t,titleId:a})=>({triggerRefund:()=>((e,t,a)=>{t.info(`Initiating refund of titleId ${a}`).count(`${Z.EZ}_Refund_Purchase`,1,!1),e({type:Pi.k.TriggerRefund,payload:{titleId:a}})})(e,t,a)})))((({refundFragment:e,isRetail:t,pageTitleId:a,triggerRefund:n})=>{const{getString:r}=i.useContext($.h);return e&&e.refundableOrders&&0!==e.refundableOrders.length?i.createElement("div",{className:we(vc,he,"refund-alert")},i.createElement(Ci.InfoAlert,null,i.createElement("span",{className:ye},t?i.createElement(kc,{refundableOrders:e.refundableOrders,pageTitleId:a,getString:r}):i.createElement(Rc,{triggerRefund:n,getString:r})))):null}))),Nc=(0,J.$j)((e=>({requestContext:At(e)})))((({svodWinners:e,forceDoubleHeight:t})=>{const a=e.metadata&&e.metadata.label,n=e.metadata&&e.metadata.refMarker||(0,de.i)("atv_unknown");return i.createElement(Ii,{modalId:"dvui-close-overlay-mwts",modalContent:i.createElement(hc,{svodWinners:e}),toggle:({openModalClickHandler:e})=>i.createElement(Ji,{refTag:n,className:fe},i.createElement(sr.PurchaseButton,{"data-ux-click":!0,onClick:e,className:we(fe,"more-subscription-options-button"),forceDoubleHeight:t},i.createElement(l.Text,{string:a})))})}));var Ac=a("./src/util/utils/history.ts");const Oc="_1Rf__P",Vc="_3oazIf",Lc="_3u1od2",Wc="_2zZu7L",Mc="_1MF2EW",Bc="C-sHj4";var Uc=a("./node_modules/@amzn/dvui/dist/TextBlock.js"),jc=a("./src/util/utils/pubSub.ts"),Fc=a("./src/util/utils/analytics/analytics.ts");const $c=()=>new Promise(((e,t)=>{const a=e=>{fetch(`/gp/video/ajax/log-device-info.html/ref=atv_log_device_info?description=DVWebPlayer${e}:LoadFailed`),t(`DVWebPlayer:${e}:load:failure`)};window.WebPlayer?e(new window.WebPlayer):null==document.getElementById("player-script")?a("Tag"):(()=>{let t,n=0;const r=()=>{n<60?(n+=1,window.WebPlayer?e(new window.WebPlayer):t=setTimeout(r,1e3)):a("Timeout")};r(),document.getElementById("player-script").onload=()=>{clearTimeout(t),window.WebPlayer?e(new window.WebPlayer):a("Loading")}})()}));var Hc=a("./src/shared/player/integration/config.ts"),Gc=a("./src/shared/player/integration/logger.ts");function qc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const zc=["closed","asinChanged","aborted"],Zc=e=>({trailer:e.trailer,position:Number(e.position||0),videoType:e.videoType,live:Boolean(e.lcid),asin:e.lcid||e.asin,ref:e.ref,playbackEnvelope:e.playbackEnvelope}),Xc=e=>({...e,startEpoch:Math.floor(Date.now()/1e3)}),Qc="dv_play_action";class Yc{constructor(e,t,a,n){qc(this,"player",void 0),qc(this,"logger",void 0),qc(this,"liveIncompatibleCallback",void 0),qc(this,"playerConfigData",void 0),qc(this,"playerConfig",void 0),qc(this,"currentContentConfig",null),qc(this,"pubSub",void 0),qc(this,"lastTitle",void 0),qc(this,"capabilities",void 0),qc(this,"_test",void 0),qc(this,"playbackLaunchedTime",void 0),this.player=e,this.logger=n,this._test={player:e},this.liveIncompatibleCallback=a,this.pubSub=(0,jc.M)(),this.playerConfigData=t,this.playerConfig=(0,Hc.it)(t),this.lastTitle=null,this.init(),this.capabilities=new Promise((t=>{e.on("playerCapabilities",(({capabilities:e})=>{t(e)}))}))}init(){const e=(0,Hc.QD)(this.playerConfigData.pageType);zc.forEach((e=>{this.player.on(e,(async t=>{await this.callAction(e),t&&"asinChanged"===e&&(this.lastTitle=Xc(Zc(t)))}))})),this.player.on("playing",(t=>{if(this.playbackLaunchedTime){const a=Date.now()-this.playbackLaunchedTime;this.logCounter("playbackdelay",a),this.playbackLaunchedTime=null,(0,Gc.r1)({action:Fc.m0.PlaybackStarted,refTag:Qc,pageType:e})(t)}})),this.on("closed",(0,Gc.r1)({action:Fc.m0.PlayerClosed,refTag:Qc,pageType:e})),this.on("asinChanged",(0,Gc.r1)({action:Fc.m0.PlayerTitleChanged,refTag:Qc,pageType:e})),this.on("beforePlay",(e=>this.liveIncompatibleCheck(e))),this.player.initialize(this.playerConfig)}async callAction(e){return await Promise.all(this.pubSub.query(e).map((e=>e(this.lastTitle))))}on(e,t){return this.pubSub.subscribe(e,t)}async prepare(e){await this.callAction("prepare"),this.player.prepare(this.playerConfig,Zc(e))}async liveIncompatibleCheck(e){var t;if(!("Live"!==(t=e).videoType&&!t.lcid&&!t.live||(await this.capabilities).supportsLive))throw this.liveIncompatibleCallback(),"Live Incompatible"}async play(e){const t=Zc(e);this.lastTitle=Xc(t),this.currentContentConfig=t,this.playbackLaunchedTime=Date.now(),await this.callAction("beforePlay"),await this.callAction("play");const a={clickstreamRefMarker:e.ref||"atv_dp_unknown",playbackInitiatedTime:Date.now()};this.player.play(this.playerConfig,t,a)}async stop(){await this.callAction("stop"),this.player.initialize(this.playerConfig),this.currentContentConfig=null,this.playbackLaunchedTime=null,await this.callAction("closed")}logCounter(e,t=1){const a=this.currentContentConfig&&this.currentContentConfig.videoType||"unknown",n=`dvweb:playback:${e}:${this.playerConfigData.pageType}:web:${a}`.toLocaleLowerCase();this.logger.count(n,t,!1)}}const Jc={instance:null};function Kc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ed=(e,t)=>{const a=document.createEvent("CustomEvent");a.initCustomEvent(e,!0,!0,t),document.dispatchEvent(a)},td=e=>{document.getElementsByTagName("body")[0].style.overflow=e},ad=e=>{document.getElementById(Hc.c6).className=e},nd=e=>{ad("dv-player-fullscreen"),td("hidden")},rd=e=>{ad(""),td("visible")},id=e=>{window.location.assign(e)};class sd extends i.Component{constructor(e){super(e),Kc(this,"logger",void 0),Kc(this,"player",void 0),Kc(this,"unsubscribeHandlers",void 0),Kc(this,"loadPlayer",(async(e=!1)=>{const{playerConfig:t,whisperCacheData:a,liveIncompatibleCallback:n,useXpStreaming:r,useXpDownload:i,onPlayerLoadErrorCallback:s}=this.props;try{this.player=await((e,t,a,n=!1)=>(Jc.instance=!n&&Jc.instance||$c().then((n=>new Yc(n,e,t,a))).catch((t=>{throw(0,Gc.cn)({action:Fc.m0.PlayerFailedToLoad,pageType:(0,Hc.QD)(e.pageType),refTag:Qc}),t})),Jc.instance))(t,n,this.logger,e),this.attachRefreshEventHandlers(),a&&await this.handlePrepareRequest(a)}catch(e){this.logFatal(e),s&&s()}})),Kc(this,"handleNetworkChange",(async()=>{!this.player&&window.navigator.onLine&&this.loadPlayer(!0)})),this.logger=e.logger||new ys.Oc(`DVWebNode:Player:${this.props.playerConfig.pageType}`),this.unsubscribeHandlers=[]}logFatal(e){this.count(e).fatal(e)}count(e){const{pageType:t}=this.props.playerConfig;return this.logger.count(`${e}:${t}`,1,!1)}async attachRefreshEventHandlers(){const{onPlay:e,onClosed:t,onClosedStoreResumeTime:a,onAsinChanged:n,onInitialized:r,onPrepare:i,onPlayerCapabilities:s}=this.props,o=this.player,l=(e,t)=>{this.unsubscribeHandlers.push(o.on(e,(e=>t(e))))};l("play",nd),l("play",(e=>ed("PVVideoPlayerPlay",e))),e&&l("play",e),l("closed",rd),l("closed",(e=>ed("PVVideoPlayerClosed",e))),t&&l("closed",t),a&&l("closed",a),l("asinChanged",(e=>ed("PVVideoPlayerTitleChanged",e))),n&&l("asinChanged",n),l("initialized",(()=>ed("PVVideoPlayerInitialized",void 0))),r&&l("initialized",r),l("prepare",(()=>ed("PVVideoPlayerPrepared",void 0))),i&&l("prepare",i),l("aborted",(()=>{this.count("DVWebPlayer:aborted")}));const c=await o.capabilities;c.supportsDrm||this.count("DVWebPlayer:missingDrm"),ed("PVVideoPlayerCapabilities",c),s&&s(c)}async componentDidMount(){this.loadPlayer(),window.addEventListener("online",this.handleNetworkChange)}componentDidUpdate({playbackLinkData:e,whisperCacheData:t}){const{playbackLinkData:a,whisperCacheData:n}=this.props;a&&!e&&this.handlePlayRequest(a),!a&&n&&n!==t&&this.handlePrepareRequest(n)}async componentWillUnmount(){this.unsubscribeHandlers.forEach((e=>e())),window.removeEventListener("online",this.handleNetworkChange)}async handlePrepareRequest(e){this.player&&this.player.prepare(e)}async handlePlayRequest({contentConfig:e,signInUrl:t}){const{onPlayFailure:a}=this.props;let n=!0;if(this.player)if(t)id(t);else try{await this.player.play(e)}catch(t){this.logger.fatal("Playback failed",{contentConfig:e},t),n=!1}else this.count("DVWebPlayer:notReady"),n=!1;!n&&a&&a()}render(){return null}}const od=(0,ti.cG)(sd);var ld=a("./src/util/utils/marketplace.ts");function cd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const dd=new s.eZ,ud=e=>i.createElement("div",{className:Lc},i.createElement("strong",null,e.title)),pd=e=>i.createElement(Uc.TextBlock,{className:Vc},e.message),md=e=>i.createElement("div",null,e.requestInProgress?i.createElement("div",{className:Mc},i.createElement(_n.Spacer,{space:_n.spacerSpacing.xs},i.createElement(Xr.Spinner,null),i.createElement(l.Text,{tag:"div",className:Bc},e.requestInProgressMessage))):i.createElement("div",null,i.createElement(_n.Spacer,{space:_n.spacerSpacing.xs},i.createElement(On.Jd,{refTag:(0,de.i)("atv_dp_ks_yes")},i.createElement(sr.PrimaryButton,{name:"keep-subscription-now",onClick:()=>{e.onKeepSubscription()}},i.createElement(l.Text,{string:e.confirmationLabel}))),i.createElement(On.Jd,{refTag:(0,de.i)("atv_dp_ks_no")},i.createElement(sr.Button,{name:"keep-subscription-not-now",onClick:e.closeModal},i.createElement(l.Text,{string:e.cancellationLabel})))),e.requestFailed&&i.createElement("div",{className:Wc},i.createElement(z,{stringID:"AVOD_DP_E_error_text"}))));class gd extends i.Component{constructor(e){super(e),cd(this,"keepSubscriptionUrlParam",void 0),cd(this,"closeModal",(()=>{this.setState({isModalOpen:!1})})),cd(this,"clearErrors",(()=>{this.setState({requestFailed:!1})})),cd(this,"onKeepSubscription",(async()=>{this.setState({requestInProgress:!0}),this.clearErrors();const e=[ld.HZ.US,ld.HZ.JP];dd.SetSubscriptionNextRenewal({__type:"atv.wps#SetSubscriptionNextRenewalInput",context:this.props.requestContext,enrollmentKey:this.props.enrollmentKey,renewEnabled:!0,token:this.props.token,allowsRecognized:e.includes(this.props.requestContext.marketplaceID)}).then((e=>{e.success?(this.closeModal(),this.props.updateShowCancellationWinback(!1)):this.setState({requestFailed:!0}),this.setState({requestInProgress:!1})})).catch((e=>{if(e instanceof vt.lY){var t=Object.assign({},this.props.requestContext.queryParameters);t[this.keepSubscriptionUrlParam]=["true"];const e=me({parameters:t,originalURI:this.props.requestContext.originalURI,isRetail:this.props.isRetail},this.props.pageTitleId,(0,de.i)("atv_dp_ks_sign_in")),a=ue({parameters:this.props.requestContext.queryParameters,originalURI:this.props.requestContext.originalURI,isRetail:this.props.isRetail},(0,de.i)("atv_dp_ks_sign_in"),e);id(a)}else this.setState({requestFailed:!0}),this.setState({requestInProgress:!1})}))})),cd(this,"validateProps",(()=>!!(this.props.message&&this.props.label&&this.props.token&&this.props.enrollmentKey&&this.props.cancellationLabel&&this.props.confirmationLabel))),this.state={isModalOpen:!1,requestInProgress:!1,requestFailed:!1},this.keepSubscriptionUrlParam="keepSubscription"}componentDidMount(){if(!this.state.isModalOpen&&!this.state.requestFailed&&this.props.requestContext.queryParameters[this.keepSubscriptionUrlParam]&&"true"===this.props.requestContext.queryParameters[this.keepSubscriptionUrlParam][0]){const e=new URL(window.location.href);e.searchParams.delete(this.keepSubscriptionUrlParam),(0,Ac.qA)(null,document.title,e.href),this.setState({isModalOpen:!0}),this.onKeepSubscription()}}render(){return this.validateProps()&&this.props.showCancellationWinback?i.createElement("div",{className:`${ve} ${fe}`},i.createElement(Ii,{size:"s",isOpen:this.state.isModalOpen,modalId:"dvui-close-overlay-atf-keepSubscriptionModal",className:Oc,modalContent:()=>i.createElement(pd,{message:this.props.message}),modalHeader:()=>i.createElement(ud,{title:this.props.confirmationLabel}),onClose:this.closeModal,modalFooter:()=>i.createElement(md,{closeModal:this.closeModal,onKeepSubscription:this.onKeepSubscription,confirmationLabel:this.props.confirmationLabel,cancellationLabel:this.props.cancellationLabel,requestFailed:this.state.requestFailed,requestInProgress:this.state.requestInProgress,requestInProgressMessage:this.props.requestInProgressMessage}),toggle:()=>i.createElement(On.Jd,{refTag:(0,de.i)("atv_dp_ks")},i.createElement(sr.PurchaseButton,{"data-ux-click":!0,onClick:()=>{this.clearErrors(),this.setState({isModalOpen:!0})},forceDoubleHeight:!0,name:"keep-subscription",className:`${he}`},i.createElement(l.Text,{string:this.props.label})))})):null}}const hd=(0,J.$j)((e=>({requestContext:At(e).rawContext,pageTitleId:e.pageTitleId,showCancellationWinback:e.winback.showCancellationWinback,originalURI:At(e).originalURI,isRetail:At(e).isRetail})),(e=>({updateShowCancellationWinback:t=>((e,t)=>{e({type:Pi.k.UpdateShowCancellationWinback,payload:{showCancellationWinback:t}})})(e,t)})))(gd),_d="Collapsed",fd="Expanded",vd=({forceDoubleHeight:e,titleId:t,svodWinners:a})=>{if(!a)return[];switch(a.metadata&&a.metadata.behaviour){case _d:return Ri(a)?[i.createElement(Nc,{key:"MsoButton",svodWinners:a,titleId:t,forceDoubleHeight:e})]:[];case fd:return(Ri(n=a)&&n.children||[]).filter((e=>(0,Z.xb)(e.problems))).map(((t,a)=>i.createElement(ns,{key:`SvodButton-${a}`,svodAction:t,forceDoubleHeight:e})));default:return[]}var n},bd=({acquisitionActions:e,titleId:t,tvodButtonScope:a,forceDoubleHeight:n,tapsExperimentToken:r})=>{const s=(e=>{const t=e&&e.cancellationWinbackToken&&e.cancellationWinbackToken.cancellationWinbackStringInfo,a=e&&e.cancellationWinbackToken;return t&&i.createElement(hd,{label:t.label,message:t.modalMessage,confirmationLabel:t.confirmationLabel,cancellationLabel:t.cancellationLabel,enrollmentKey:a.enrollmentId,token:a.csrfToken})})(r);if(!e)return s?i.createElement(_n.Spacer,{className:fe,alignItems:_n.spacerAlignItems.top},s):null;const{tvodWinners:o,svodWinners:l}=e,c=Ri(l)&&(0,Z.Db)(l.children),d=vd({forceDoubleHeight:n,titleId:t,svodWinners:l}),u=(({tvodWinners:e,tvodButtonScope:t,svodWinnerChildrenExists:a})=>Li(e).map(((e,n)=>i.createElement(as,{key:`TvodButton-${n}`,tvodAction:e,scope:t,svodWinnerChildrenExists:a}))))({tvodWinners:o,tvodButtonScope:a,svodWinnerChildrenExists:c}),p=[s,...d,...u].filter(Boolean);return(0,Z.xb)(p)?null:i.createElement(_n.Spacer,{className:fe,alignItems:_n.spacerAlignItems.top},p)};function Ed(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class yd extends i.Component{constructor(...e){super(...e),Ed(this,"elRef",i.createRef()),Ed(this,"timer",void 0)}getSnapshotBeforeUpdate(){const e=this.elRef.current;if(!e)return null;return{currentHeight:e.clientHeight}}componentDidUpdate(e,t,a){const n=a&&a.currentHeight,r=this.elRef.current;if(!r)return;r.removeAttribute("style");const i=r.clientHeight;if(i===n)return;const s=150+1.5*Math.abs(i-n);((e,t)=>{const a=Object.keys(t).reduce(((e,a)=>`${e} ${a}: ${t[a]};`),"");e.setAttribute("style",a)})(r,{height:`${n}px`,overflow:"hidden",transition:`height ${s}ms ease-out`}),setTimeout((()=>{r.style.height=`${i}px`}),1),this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{r.removeAttribute("style")}),s)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){return i.createElement("div",{className:this.props.className,ref:this.elRef},this.props.children)}}var wd=a("./node_modules/@amzn/dvui/dist/Callout.js"),Td=a("./node_modules/@amzn/dvui/dist/Icons/WatchParty.js");const Dd="_Oe4Xf",Id="_1l-91e",Cd="_10qeoA",Pd="_2tCfjd",Sd="_1wlxMN",kd="_3i_OT2",Rd="_2s3m69",xd="_2mS7op",Nd="_3WeIU5",Ad="_2jGOpa";function Od(){return Od=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Od.apply(this,arguments)}const Vd=({hiddenInputs:e={},method:t="POST",children:a,...n})=>i.createElement("form",Od({},n,{method:t}),a,Object.keys(e).map((t=>i.createElement("input",{key:t,type:"hidden",name:t,value:e[t]}))));function Ld(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Wd=({isButton:e,buttonClassName:t})=>{const{getString:a}=i.useContext($.h);return e?i.createElement(sr.Button,{className:Rd,"aria-label":a("DV_DP_CREATE_WATCH_PARTY"),testID:"watch-party-link",type:"submit"},i.createElement("span",{className:xd},i.createElement(Td.WatchParty,null))):i.createElement("button",{className:we(Dd,t),"data-automation-id":"watch-party-link"},i.createElement(z,{stringID:"DV_DP_CREATE_WATCH_PARTY"}))};class Md extends i.PureComponent{constructor(...e){super(...e),Ld(this,"state",{showFTUE:!1}),Ld(this,"onFTUEDismiss",(()=>{localStorage.setItem(Md.WP_FTUE_DISMISSED,Md.WP_FTUE_DISMISSED_VALUE)}))}componentDidMount(){const{queryParameters:e}=this.props.context,t=localStorage.getItem(Md.WP_FTUE_DISMISSED)===Md.WP_FTUE_DISMISSED_VALUE||!1,a=parseInt(localStorage.getItem(Md.WP_FTUE_SHOWN_COUNTER))||0,n=e.ref_&&e.ref_[0]||"";if(!t&&a<Md.WP_FTUE_MAX_TIMES_SHOWN||n.startsWith(Md.WP_FTUE_REFTAG_PREFIX)){const e=a+1;localStorage.setItem(Md.WP_FTUE_SHOWN_COUNTER,e.toString()),this.setState({showFTUE:!0})}}render(){const{header:e,body:t}=this.props;return this.state.showFTUE?i.createElement("div",{className:`${Cd} ${ye}`},i.createElement(wd.Callout,{position:"bottom",size:"m",use:"info",className:we(Id,"wp-ftue-tooltip"),content:i.createElement(Ud,{header:e,body:t}),startOpen:!0,onDismiss:this.onFTUEDismiss})):null}}Ld(Md,"WP_FTUE_SHOWN_COUNTER","dvWebWPFtueShownCounter"),Ld(Md,"WP_FTUE_DISMISSED","dvWebWPFtueDismissed"),Ld(Md,"WP_FTUE_REFTAG_PREFIX","atv_wp_merch_"),Ld(Md,"WP_FTUE_DISMISSED_VALUE","true"),Ld(Md,"WP_FTUE_MAX_TIMES_SHOWN",3);const Bd=(0,Q.s6)(Md),Ud=({header:e,body:t})=>i.createElement(i.Fragment,null,i.createElement(l.Text,{tag:"h3",className:Pd,string:e}),i.createElement(l.Text,{tag:"p",className:Sd,string:t})),jd=({watchPartyAction:e,withFTUETooltip:t,buttonOrLinkProps:a,containerRef:n})=>{const{getString:r}=i.useContext($.h);if(!e)return null;const{endpoint:{partialURL:s,query:o}}=e,l=s;return t=t,i.createElement(Vd,{action:l,method:"POST",hiddenInputs:o,className:we(ye,kd,"dv-dp-node-watchparty")},i.createElement(Pr.Tooltip,{position:"top",size:"s",className:we(Id,"wp-hover-tooltip",Ad),content:r("DV_DP_WATCH_PARTY_TOOLTIP"),id:a&&a.isButton&&"dv-dp-node-watchparty-button-tooltip",containerRef:n},i.createElement(Wd,a)),t&&i.createElement(Bd,{header:r("DV_DP_WATCH_PARTY_FTUE_HEADER"),body:r("DV_DP_WATCH_PARTY_FTUE_BODY")}),i.createElement("span",{className:Nd},i.createElement(z,{stringID:"DV_DP_CREATE_WATCH_PARTY"})))};const Fd=e=>{const t=ki(a=e)&&a.metadata&&a.metadata.messages||[];var a;return t.length>0?t.map(((e,t)=>i.createElement(l.Text,{key:`tvod-inner-${t}`,string:e}))):(0,Z.VF)(Li(e).filter((e=>!(0,Z.xb)(e.displayMessages))).map(((e,t)=>e.displayMessages.map(((e,a)=>i.createElement(l.Text,{key:`${t},${a}`,string:e}))))))},$d=({acquisitionActions:e})=>{if(!e)return null;const t=Fd(e.tvodWinners);return(0,Z.xb)(t)?null:i.createElement(_n.Spacer,{alignItems:_n.spacerAlignItems.stretch},t)},Hd=({watchPartyAction:e})=>{const t=i.useRef();return e?i.createElement("div",{className:we(ve,Zr.linkWrapper),ref:t},i.createElement("span",{className:Zr.watchParty},i.createElement(jd,{watchPartyAction:e,buttonOrLinkProps:{buttonClassName:Zr.linkWrapperTarget},containerRef:t}))):null};class Gd extends i.Component{constructor(e){var t,a,n;super(e),n=()=>{this.setState({giftCardModalIsVisible:!this.state.giftCardModalIsVisible})},(a="toggleGiftCardModal")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.state={giftCardModalIsVisible:!1}}render(){const{acquisitionActions:e,titleID:t,sequenceNumber:a,isPurchasing:n,isRefunding:r,rawContext:s,watchPartyAction:o}=this.props,l=e&&e.moreWaysToWatch,c=n||r;return i.createElement("div",{className:we({[Zr.isProcessingTransaction]:c},Zr.wrapper),"data-testid":"dp-btf-action-box"},i.createElement(yd,null,i.createElement($d,{acquisitionActions:e}),i.createElement(_n.Spacer,{alignItems:_n.spacerAlignItems.stretch},i.createElement("div",{className:we(Zr.acquisition,fe)},i.createElement(bd,{acquisitionActions:e,titleId:t,tvodButtonScope:ts.EPISODE_LIST,forceDoubleHeight:!1})),i.createElement(_n.Spacer,{alignItems:_n.spacerAlignItems.stretch},i.createElement(fc,{titleId:t,sequenceNumber:a,moreWaysToWatch:l,toggleGiftCardModal:this.toggleGiftCardModal,componentClassName:Zr.linkWrapper,linkClassName:Zr.linkWrapperTarget}),i.createElement(Hd,{watchPartyAction:o})),i.createElement(xc,{titleId:t})),c&&i.createElement(Qr,null)),i.createElement(Vl,{isOpen:this.state.giftCardModalIsVisible,onClose:this.toggleGiftCardModal,requestContext:s}))}}const qd="_3AyX4X",zd="_2_tMJv",Zd="_26dvnH",Xd="_3gPMDr",Qd="_1xmStQ",Yd="_3SVDaB",Jd="_20Oqf_",Kd="_3akVZ8",eu="_1c1IVD",tu="_2nY3e-",au="_3rBDNv",nu="_1wDsxJ",ru="_33tfc0",iu="PcQXez",su="gJ5nX5",ou="_2awoLH",lu="_1RTRpv",cu="_1tO9Wf",du="_2sDsWz",uu="_1AeKJC",pu="_18-IMw",mu="_3ris48",gu="_2ijjo6",hu="_3VjO1A",_u="_3i32fS",fu="_1Y9Jue",vu="_3KkSpY",bu="N9fBYq",Eu="_14mRBK",yu="_1Hl-5H",wu="_2ZkoCK",Tu="_1g0tVA",Du="_34INWL",Iu="_1Hb5tW",Cu="_3sYxmH";var Pu=a("./src/shared/SPA/UWPNotifier/index.ts"),Su=a("./src/util/utils/dvstring/utils.ts");function ku(){return ku=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ku.apply(this,arguments)}const Ru=Math.round(11*Math.PI*2),xu=(e=0)=>Math.round((100-Math.min(e,100))/100*Ru),Nu="undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Edge")>-1&&navigator.userAgent.indexOf("Windows NT 10.0")>-1?"":"js-deeplinkable",Au=({status:e,progress:t=0,hasLabel:a})=>{const n="#8197A4",r="#F2F4F6",s=e===Pu.lh.WAITING?xu(75):xu(t),o=e&&[Pu.lh.DOWNLOADING,Pu.lh.SEASON_DOWNLOADING,Pu.lh.PAUSED,Pu.lh.QUEUED,Pu.lh.SEASON_QUEUED,Pu.lh.ERROR,Pu.lh.SEASON_ERROR].includes(e),l=e&&[Pu.lh.DOWNLOADING,Pu.lh.PAUSED,Pu.lh.SEASON_DOWNLOADING].includes(e),c=e&&[Pu.lh.IDLE,Pu.lh.PAUSED,Pu.lh.QUEUED,Pu.lh.SEASON_QUEUED,Pu.lh.SEASON_IDLE,Pu.lh.REMOVED,Pu.lh.CANCELLED].includes(e),d=e&&[Pu.lh.IDLE,Pu.lh.SEASON_IDLE,Pu.lh.REMOVED,Pu.lh.CANCELLED].includes(e),u=e===Pu.lh.COMPLETED&&!a||e===Pu.lh.DISABLED,p=e===Pu.lh.WAITING;return i.createElement("svg",{height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:Te()({[vu]:p})},i.createElement("g",{fillRule:"nonzero",fill:"none"},d&&i.createElement("path",{className:hu,stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M2.997 18.087v4.972h18.03v-4.972"}),c&&i.createElement("path",{className:hu,d:"M12 5v12M7.5 12.5L12 17M16.5 12.5L12 17",stroke:e===Pu.lh.PAUSED||d?r:n,strokeWidth:"1.5",strokeLinecap:"round"}),o&&i.createElement("circle",{className:gu,stroke:n,strokeWidth:2,fill:"none",cx:"12",cy:"12",r:"11"}),(l||p)&&i.createElement("circle",{stroke:r,transform:"rotate(-90 12 12)",strokeWidth:2,fill:"none",cx:"12",cy:"12",r:"11",strokeDasharray:"69",strokeDashoffset:"69",strokeLinecap:"butt",style:{strokeDashoffset:s,transition:"strokeDashoffset 2s linear"}}),u&&i.createElement("g",{fill:r},i.createElement("path",{d:"M 14.121094 0.878906 C 15.292969 2.050781 15.292969 3.949219 14.121094 5.121094 C 12.949219 6.292969 11.050781 6.292969 9.878906 5.121094 C 8.707031 3.949219 8.707031 2.050781 9.878906 0.878906 C 11.050781 -0.292969 12.949219 -0.292969 14.121094 0.878906 M 14.121094 9.878906 C 15.292969 11.050781 15.292969 12.949219 14.121094 14.121094 C 12.949219 15.292969 11.050781 15.292969 9.878906 14.121094 C 8.707031 12.949219 8.707031 11.050781 9.878906 9.878906 C 11.050781 8.707031 12.949219 8.707031 14.121094 9.878906 M 14.121094 18.878906 C 15.292969 20.050781 15.292969 21.949219 14.121094 23.121094 C 12.949219 24.292969 11.050781 24.292969 9.878906 23.121094 C 8.707031 21.949219 8.707031 20.050781 9.878906 18.878906 C 11.050781 17.707031 12.949219 17.707031 14.121094 18.878906 "})),e===Pu.lh.COMPLETED&&a&&i.createElement("g",{fill:r},i.createElement("path",{d:"M15 18V8a1 1 0 012 0v11a1 1 0 01-1 1H4a1 1 0 01-1-1V8a1 1 0 112 0v10h10z"}),i.createElement("path",{d:"M7 8a1 1 0 112 0v7a1 1 0 01-2 0V8zm4 0a1 1 0 012 0v7a1 1 0 01-2 0V8zM1 5a1 1 0 110-2h18a1 1 0 010 2H1z"}),i.createElement("path",{d:"M6.8 2v2c0 .552-.403 1-.9 1S5 4.552 5 4V1c0-.552.403-1 .9-1h7.2c.497 0 .9.448.9 1v3c0 .552-.403 1-.9 1s-.9-.448-.9-1V2H6.8z"})),(e===Pu.lh.DOWNLOADING||e===Pu.lh.SEASON_DOWNLOADING)&&i.createElement("g",{fill:r},i.createElement("path",{d:"M10.3 16.012c0 .828-.335 1.054-.75 1.054-.414 0-.75-.226-.75-1.054V7.007C8.8 6.178 9.158 6 9.55 6s.75.178.75 1.007v9.005zM15.3 16.012c0 .828-.335 1.054-.75 1.054s-.75-.226-.75-1.054V7.007c0-.829.358-1.007.75-1.007s.75.178.75 1.007v9.005z"})),(e===Pu.lh.ERROR||e===Pu.lh.SEASON_ERROR)&&i.createElement("g",{fill:r},i.createElement("path",{d:"M13 13.024a.978.978 0 0 1-.975.976h-.05a.978.978 0 0 1-.975-.976V6.976c0-.537.439-.976.976-.976h.049c.536 0 .975.439.975.976v6.048zM11 16h2v2.04h-2z"})),e===Pu.lh.SEASON_COMPLETED&&i.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M20.03 4.28a1 1 0 00-1.42.03l-8.8 9.19-3.04-3.66a1 1 0 10-1.54 1.27l3.75 4.53a1 1 0 001.5.05l9.58-10a1 1 0 00-.03-1.41zM20 16v4H4v-4a1 1 0 10-2 0v5a1 1 0 001 1h18a1 1 0 001-1v-5a1 1 0 10-2 0z",clipRule:"evenodd"})))},Ou=({progress:e,status:t=Pu.lh.IDLE,downloadURL:a,fallbackURL:n,onClick:r,isDropList:s,label:o,id:c,containerRef:d})=>{const u=s?"button":"a",p={onClick:r,...!s&&{href:a},...(0,Su.Ol)({fallbackUrl:n})},m=i.createElement(u,ku({className:`${Nu} ${mu}`},p),i.createElement("span",{className:"avu-screen-reader-only"},o),i.createElement(Au,{hasLabel:!1,progress:e,status:t}));return c&&o?i.createElement(Pr.Tooltip,{content:i.createElement(l.Text,{string:o}),position:"top",size:"m",tabIndex:0,id:c,containerRef:d},m):m},Vu=({showIcon:e,progress:t,status:a,hasLabel:n})=>{const r=[Pu.lh.IDLE,Pu.lh.SEASON_IDLE,Pu.lh.CANCELLED,Pu.lh.REMOVED],s=[Pu.lh.SEASON_DOWNLOADING,Pu.lh.SEASON_COMPLETED,Pu.lh.SEASON_QUEUED,Pu.lh.SEASON_ERROR,Pu.lh.WAITING,Pu.lh.DOWNLOADING,Pu.lh.PAUSED,Pu.lh.ERROR,Pu.lh.QUEUED];return e?i.createElement("span",{className:Te()(bu,fu,{[yu]:r.includes(a),[wu]:s.includes(a),[Tu]:a===Pu.lh.COMPLETED,[Du]:a===Pu.lh.DISABLED,[Iu]:a===Pu.lh.SEASON_COMPLETED})},i.createElement(Au,{progress:t,status:a,hasLabel:n})):null},Lu=({onClick:e,progress:t,status:a,label:n,downloadURL:r,fallbackURL:s,forceDoubleHeight:o,containerRef:c,showIcon:d=!0,disabled:u=!1})=>{const p={...(0,Su.Ol)({fallbackUrl:s}),onClick:e,forceDoubleHeight:o,href:r,disabled:u,className:Te()(Nu,"dv-node-dp-download",_u,Eu,ye)},m={showIcon:d,progress:t,status:a,hasLabel:!0};return i.createElement(Pr.Tooltip,{position:"top",size:"s",content:i.createElement(l.Text,{tag:"span",string:n}),className:Cu,id:"dv-dp-node-download-tooltip",containerRef:c},i.createElement(sr.Button,ku({},p,{role:"button","aria-live":"polite","aria-label":n,testID:"download-button"}),i.createElement(Vu,m)))};var Wu=a("./src/widgets/DVWebNodeDetail/utils/downloadActionHelper.ts");function Mu(){return Mu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Mu.apply(this,arguments)}const Bu=(e,t,a,n)=>{const r=i.createElement(z,{stringID:e}),s=i.createElement(i.Fragment,null,i.createElement("div",{className:su},r),i.createElement("span",{className:ou},i.createElement(F,{string:t,dir:"auto"})));return i.createElement(Pr.Tooltip,{content:s,position:"top",size:"m",tabIndex:0,id:a,containerRef:n},r)};function Uu({packshotUrl:e,isWatched:t}){if(!e)return i.createElement("div",{className:`${Yd} ${Jd}`},i.createElement(rn.Icon,{use:rn.IconType.SMILE}));const a={alt:"",src:e,baseValue:268,srcSizes:[{"max-phablet":148},{"min-desktop":268}],isLazy:!0},n=we(Yd,{[Kd]:t});return i.createElement("div",{className:n,"data-is-watched":t},i.createElement(pt,a))}const ju=(e,t)=>{const a=ji(e);return!a||a.details&&a.details.canonicalId!==t&&!(0,vt.aP)(a.details.offer.purchaseData.isSeasonPurchase)?null:a},Fu=(0,J.$j)(((e,t)=>({playerConfigData:ea(e),action:e.action[di.L5][t.titleId],detail:e.detail[_i.Xt][t.titleId],requestContext:At(e),pageTitleId:e.pageTitleId,purchaseDetails:ju(e,t.titleId),isRefunding:Boolean(e.refund.refunding&&e.refund.refunding.titleId===t.titleId),isMShop:He(e),downloadLaunchType:e.pageContext.downloadLaunchType})))((0,ti.cG)((e=>{const{getString:t}=i.useContext($.h),a=i.useRef(),{playerConfigData:n,detail:r,action:s,titleId:o,epListIndex:l,isFirstEpisode:c,isBonus:d,pageTitleId:u,requestContext:{rawContext:p},purchaseDetails:m,isRefunding:g,isMShop:h,downloadLaunchType:_,downloads:f}=e,{title:v,ratingBadge:b,subtitles:E,audioTracks:y,playbackTracks:w,images:T,releaseDate:D,runtime:I,synopsis:C}=r,P=s&&s.playbackActions,S=s&&s.downloadActions,k=s&&s.notificationActions,R=s&&s.watchPartyAction,x=s&&s.acquisitionActions,N=(0,Qt.MG)(P),A=(0,Wu.L)(S),O=Boolean(N),V=r&&r.episodeNumber,L=(0,sa.N)(k),W={title:v,playbackActions:P,playerConfigData:n,sequenceNumber:V,notificationActions:k,entityType:r&&r.entityType,isBonus:d,titleId:o,purchaseDetails:m,isRefunding:g,duration:r&&r.duration,isMShop:h},M="NONE"===_||"EMBEDDED"===_?void 0:e=>{e.preventDefault(),Qi.b[_]({url:A.downloadURL,fallbackUrl:A.fallbackURL})},B=A&&{...A,isMovie:!1,episodeNumber:V,onClick:M,downloadURL:h?void 0:A.downloadURL,playbackTracks:w,title:v}||f&&f[o]&&{label:"",downloadURL:"",titleID:o,episodeNumber:r.episodeNumber,isMovie:"Movie"===r.entityType,onClick:M,playbackTracks:w,title:v},U={packshotUrl:T&&T.packshot,isWatched:Boolean(N&&(0,Mr.Nw)(N.progress))},j=t("DV_comma_separator"),F=(E||[]).join(j),H=(y||[]).join(j),G=Li(x&&x.tvodWinners).map((e=>e.asin||null)).filter(Boolean),q=Wi(x&&x.moreWaysToWatch).map((e=>Ai(e)&&e.asin||null)).filter(Boolean),z=Array.from(new Set([...q,...G])),X=Boolean(B),Q=we(qd,"js-node-episode-container",{[cu]:O,[du]:X}),Y={notificationActions:k,acquisitionActions:x,sequenceNumber:V,pageTitleId:u,titleID:o,isPurchasing:Boolean(m),isRefunding:g,rawContext:p,watchPartyAction:R},J=`av-ep-${l}`;return i.createElement("li",{id:J,"data-aliases":z.join(","),className:Q,ref:a},i.createElement("input",{id:`selector-${o}`,name:"highlight-list-selector",className:zd,type:"checkbox",defaultChecked:c&&!d}),i.createElement("label",{className:Qd,htmlFor:`selector-${o}`}),i.createElement("label",{className:Xd,htmlFor:`selector-${o}`},i.createElement(rn.Icon,{use:rn.IconType.BREADCRUMB_CHEVRON,className:Zd})),i.createElement("div",{"data-automation-id":`ep-title-${e.epListIndex}`,className:tu},i.createElement(ci,W),X&&i.createElement(Ou,Mu({},B,{containerRef:a,id:`download-ep-${J}`}))),i.createElement("div",{className:we(au,uu)},D&&i.createElement("div",null,D),I&&i.createElement("div",null,I),i.createElement("div",{className:nu},i.createElement(kn,{ratingBadge:b})),(0,Z.Db)(E)&&i.createElement("div",{className:ru},Bu("DV_TW_title_subtitles",F,`subt-${J}`,a)),(0,Z.Db)(y)&&i.createElement("div",{className:iu},Bu("DV_TW_title_languages",H,`lang-${J}`,a))),i.createElement("div",{className:uu},i.createElement(Uu,U)),i.createElement("div",{className:we(eu,uu)},i.createElement(en,{synopsis:String(C),numOfLines:2,expanderId:`synopsis-${o}`})),i.createElement("div",{className:we(Kr,pu,he,uu)},i.createElement(Gd,Y)),(0,Z.Db)(L)&&i.createElement("div",{className:we(uu,lu)},i.createElement(Yl,{Tag:Ci.WarningAlert,messages:L})))}))),$u="y2P7qQ",Hu="XR0d6P",Gu="_2LDRL1",qu="_19o-TA",zu="ObkQ-7",Zu="_1kuDbg",Xu="gbhO61",Qu="_1xQD-Q";const Yu=0;let Ju;!function(e){e.EpisodeNumberAscending="EpisodeNumberAscending",e.EpisodeNumberDescending="EpisodeNumberDescending",e.Available="Available"}(Ju||(Ju={}));const Ku={EpisodeNumberAscending:"DV_DP_EPISODE_NUM_ASCENDING",EpisodeNumberDescending:"DV_DP_EPISODE_NUM_DESCENDING",Available:"DV_DP_EPISODE_AVAILABLE"},ep={EpisodeNumberAscending:(0,de.i)("atv_dp_ep_ena"),EpisodeNumberDescending:(0,de.i)("atv_dp_ep_end"),Available:(0,de.i)("atv_dp_ep_av")},tp={EpisodeNumberAscending:e=>e,EpisodeNumberDescending:e=>[...e].reverse(),Available:(e,t)=>[...e.filter((e=>t[e])),...e.filter((e=>!t[e]))]},ap=[Ju.EpisodeNumberAscending,Ju.EpisodeNumberDescending,Ju.Available],np=(e,t)=>t?Ku[e]:"DV_DP_EPISODE_SORT_BY";class rp extends i.Component{constructor(e){var t,a,n;super(e),n=(e,t,a,n)=>r=>{const{requestContext:i,pageTitleId:s,isElcano:o,totalEpisodeSize:l,cardTitleIds:c,requestEpisodes:d}=this.props;r.preventDefault(),a&&this.state.sortingState===a||(0,On.XQ)(a?ep[a]:(0,de.i)("atv_dp_ep_exp"),e,t,n),this.setState((e=>a&&e.sortingState===a?e:{episodesHidden:!1,sortingState:a||e.sortingState,sortingChanged:e.sortingChanged||void 0!==a})),c.length<l&&d(i.rawContext,s,o,Zo.Wq,l-Zo.Wq)},(a="onClickHandler")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.state={episodesHidden:e.cardTitleIds.length<e.totalEpisodeSize,sortingState:Ju.EpisodeNumberAscending,sortingChanged:!1}}componentDidMount(){const{requestContext:e,pageTitleId:t,episodesWithAccessChange:a,isElcano:n,collectionType:r,totalEpisodeSize:i,cardTitleIds:s,episodesSeen:o,requestEpisodes:l,logger:c}=this.props;"episodes"===r&&s.length<i&&(o>=Zo.Wq&&(l(e.rawContext,t,n,Zo.Wq,i-Zo.Wq),this.setState({episodesHidden:!1})),a>0&&c.count("DVWebNode::Detail::BtfLeavingSoonMessages",a,!1))}shouldComponentUpdate(e,t){return e.cardTitleIds!==this.props.cardTitleIds||t.sortingState!==this.state.sortingState||t.episodesHidden!==this.state.episodesHidden}render(){const{header:e,cardTitleIds:t,totalEpisodeSize:a,collectionType:n,pageTitleId:r,requestContext:s,titleIdToAvailable:o}=this.props,{episodesHidden:l,sortingState:c,sortingChanged:d}=this.state,u=t.length<a;if(!n)return null;const p="episodes"!==n||u?t:tp[c](t,o);return i.createElement($.h.Consumer,null,(({getString:t,pageType:o,subPageType:m,refTagTitleId:g})=>{const h=p.map(((e,t)=>{const a={titleId:e,collectionType:n,epListIndex:`${n}-${t}`,isFirstEpisode:0===t,isBonus:"bonus"===n};return i.createElement(i.Fragment,{key:`episode-${e}-${t}`},i.createElement(Fu,a))}));if(0===(h||[]).length)return null;const _=ap.map((e=>{const a=e===c,n=Ku[e];return{id:e,name:e,text:i.createElement("span",{className:a?Qu:""},i.createElement(z,{stringID:n})),isHighlighted:a,onClick:this.onClickHandler(o,m,e,g),ariaLabel:t(n)}})),f={get:{episodeListSize:`${a}`}},v=s.makeUrl(pe(r),f);if("episodes"===n)return i.createElement("div",{className:$u},i.createElement("div",{className:Xu},e&&i.createElement("h1",{className:Zu},e," (",a,")"),i.createElement(Cc,{links:_,customDropListID:"sorting-droplist",isCustomTrigger:!0,right:!0,customText:t(np(c,d))})),i.createElement("ol",{className:Hu},h.slice(Yu,Zo.Wq),i.createElement("span",{className:l?Gu:""},u?i.createElement("div",{className:zu},i.createElement(Xr.Spinner,null)):h.slice(Zo.Wq))),l&&i.createElement(Rn.Link,{className:qu,href:v,onClick:this.onClickHandler(o,m,void 0,g),"data-automation-id":"ep-expander","data-testid":"ep-expander",ariaLabel:t("DV_DP_EPISODE_EXPANDER",{episodeCount:`${a}`})},i.createElement(z,{stringID:"DV_DP_EPISODE_EXPANDER",replace:{episodeCount:`${a}`}})));{const t={totalEpisodeSize:a,collectionType:n};return i.createElement("div",{className:$u},e&&i.createElement("h1",{className:Zu},e," (",a,")"),i.createElement("ol",{className:Hu},h),i.createElement(zo,t))}}))}}const ip=(0,zn.n)((0,J.$j)((e=>({requestContext:At(e),pageTitleId:e.pageTitleId,isElcano:Boolean(e.features.isElcano),episodesSeen:(0,Zt.C9)(e),titleIdToAvailable:(0,Zt.ZA)(e),episodesWithAccessChange:(0,Zt.BN)(e)})),(e=>({requestEpisodes:(t,a,n,r,i)=>e(((e,t,a,n,r)=>async i=>{const s=await X({context:e,api:tl.api,operation:i=>i.GetDetailPage(Qo({context:e,titleID:t,isElcano:a},["Episodes"],n,r))});i({type:Cs.k.STORE_MERGE,payload:{...No(s.operationResponse,Jo)}})})(t,a,n,r,i))})))(rp));var sp=a("./node_modules/@amzn/dvui/dist/Carousel.js"),op=a("./node_modules/@amzn/dvui/dist/Packshot.js");const lp="_3nLd6J",cp="_3Cq6JO",dp="_32IiXp",up="_1EcvsB",pp="mWsquZ",mp="_1qXSbl",gp="i7Ilo5",hp="_2Pakoo",_p="_1JCQut",fp="_1yGQE6",vp="XGzKjH",bp="_2E_W5F",Ep="_1kj931",yp="_3nGLRK",wp="_2COy4O",Tp="_1mzYKQ",Dp=(e,t,a,n=3,r=1e3)=>new Promise(((i,s)=>{const o=e=>(a(),s(e));e().then(i).catch((l=>{setTimeout((()=>{if(1===n){const a=window.DVWEBNODE_MANIFESTS[`${t}.js`],n=`https://m.media-amazon.com/images/I/${a}`;a?fetch(n).then((async t=>{if(t.ok){const a=await t.text(),n=document.createElement("script");n.type="text/javascript",n.innerHTML=a,document.head.appendChild(n),i(e())}else o(l)})).catch(o):o(new Error(`assetUrl does not exist for ${t}`))}else Dp(e,t,a,n-1,r).then(i,s)}),r)}))}));var Ip=a("./src/widgets/Explore/Hover/utils.ts"),Cp=a("./src/widgets/Explore/ClientImpressions/ImpressionTracker.tsx");function Pp(){return Pp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Pp.apply(this,arguments)}function Sp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const kp=i.lazy((()=>Dp((()=>Promise.all([a.e(351),a.e(539),a.e(584)]).then(a.bind(a,"./src/widgets/Explore/Hover/index.ts"))),"detail-hover",(()=>{var e;return null===(e=window.ue)||void 0===e?void 0:e.count("DVWebNode:ChunkFailedToLoad:Hover",1)})).then((({Hover:e})=>({default:e}))))),Rp=i.lazy((()=>Dp((()=>a.e(918).then(a.bind(a,"./src/widgets/Explore/EntitlementCue/EntitlementCue.tsx"))),"detail-entitlement",(()=>{var e;return null===(e=window.ue)||void 0===e?void 0:e.count("DVWebNode:ChunkFailedToLoad:EntitlementCue",1)})).then((({EntitlementCue:e})=>({default:e}))))),xp=({detail:e})=>{const t=e.liveState&&(0,Z.JQ)(e.liveState.isLive),a=e.liveState&&e.liveState.text,n=e.liveState&&e.liveState.id,r=e.dateTimeBadge,s=t?sn.badges.LIVE:sn.badges.CRITICAL;return i.createElement("div",{className:fp},hi(n)||t?a&&i.createElement("span",{className:vp},i.createElement(sn.Badge,{use:s},a)):r&&i.createElement("span",{className:vp},i.createElement(sn.Badge,{use:sn.badges.WHITE},r)))};class Np extends i.PureComponent{constructor(e){super(e),Sp(this,"elementRef",void 0),Sp(this,"setElementRef",(e=>{var t;const{impressionData:a,carouselIndex:n,idx:r,detail:i,requestContext:s,titleId:o,pageLink:l,impressionAnalytics:c}=this.props,d=null==i||null===(t=i.images)||void 0===t?void 0:t.covershot;this.elementRef=e,a&&d&&Cp.F.observe(this.elementRef,{collectionImpressionData:a,titleID:(s.isRetail?null==i?void 0:i.asin:null==i?void 0:i.gti)||o,carouselPosition:n,itemPosition:r,imageURL:d,refMarker:(0,Cp.$)(l),widgetType:"TitleCard",itemAnalytics:c},s.rawContext)})),this.state={isHoverReady:!1,entitlementCue:e.entitlementCue,hoverIsExpanded:!1}}componentDidMount(){this.state.isHoverReady||this.setState({isHoverReady:!0})}componentWillUnmount(){this.props.impressionData&&Cp.F.unobserve(this.elementRef)}render(){const{detail:e,imdb:t,titleId:a,idx:n,requestContext:r,pageContext:s,pageLink:o,watchlistAction:l,refTagPrefix:c,isElcano:d,enableAutoPlayingInBTF:u,resetFocusForCarousel:p,requestFocusForCarousel:m,impressionData:g}=this.props,{isHoverReady:h,entitlementCue:_}=this.state,f=r.isRetail;if(!e)return null;const v=(f?e.asin:e.compactGti)||a,b=(f?e.asin:e.gti)||(0,Ot.rM)(a)?a:void 0,E=c?`${c}${n+1}`:`atv_dp_sims_c_${n+1}`,y=me({parameters:r.queryParameters,originalURI:r.originalURI,isRetail:f},v,E),w=s.features&&"true"===s.features.offerClarityEnabled,T=o||y,D=(f||d)&&(0,Z.JQ)(e.isPrime)&&!w,I=e.images&&e.images.covershot,C={alt:e.title,src:I,baseValue:329,srcSizes:[{"max-tablet-landscape":266},{"max-phone-landscape":216}],skipStripTags:!0,isLazy:!0},P={url:T,alt:e.title,isPrime:D},S=b&&s.enableHover,k=S?"dv-universal-hover-enabled":void 0,R=i.createElement("div",{className:mp},i.createElement(op.Packshot,Pp({},P,{className:k,asin:b}),i.createElement("div",{className:dp},i.createElement("div",{className:gp},i.createElement(rn.Icon,{use:rn.IconType.SMILE})),I&&i.createElement(pt,Pp({className:up,classNameContainer:up},C)))),h&&w&&_&&i.createElement(i.Suspense,{fallback:i.createElement(i.Fragment,null)},i.createElement(Rp,Pp({},_,{containerRef:this.props.carouselContainerRef,hoverIsExpanded:this.state.hoverIsExpanded,increaseZIndex:this.state.hoverIsExpanded,tooltip:this.state.hoverIsExpanded?_.tooltip:void 0}))),i.createElement(xp,{detail:e})),x=e.liveState&&(0,Z.JQ)(e.liveState.isLive)?e.liveState.text:void 0,N=e.liveState||e.dateTimeBadge||e.location?{status:e.liveState&&e.liveState.id,label:e.liveState&&e.liveState.text,timeBadge:e.dateTimeBadge,venue:e.location}:void 0,A=e.ratingBadge,O=A?wn(A)?{rating:A.simplifiedId,locale:A.countryCode.toLowerCase(),title:A.description,link:A.localRatingLink}:{rating:A.displayText,title:A.description,link:A.localRatingLink}:void 0,V=f?e.amazonRating:void 0,L=t&&t.scoreFormatted;return h&&S?i.createElement("div",{ref:this.setElementRef},i.createElement(i.Suspense,{fallback:R},i.createElement("div",(0,Ip.Wx)((e=>h&&this.setState({hoverIsExpanded:e}))),i.createElement(kp,{className:hp,title:e.title,titleID:b,synopsis:e.synopsis,liveBadgeLabel:x,imdbRating:L,releaseYear:e.releaseYear,runtime:e.runtime,hasSubtitles:(0,Z.Db)(e.subtitles),showPrerollsInHover:u,watchlistAction:l,placementType:"DETAIL_BTF",url:T,customerReviews:V,liveInfo:N,contentMaturityRating:O,onMouseOver:()=>m&&m(),onMouseLeave:()=>p&&p(),entitlementCue:_,prefetchOnVisible:w,onEnrich:e=>this.setState({entitlementCue:e.cardBundle&&e.cardBundle.entitlementCue}),signInTrailerURL:e.signInTrailerURL,isOnLastCarousel:this.props.isOnLastCarousel,isFirstCard:this.props.isFirst,impressionsRef:g?this.elementRef:void 0,liveDateTime:null==N?void 0:N.timeBadge,carouselRefTag:(0,Cp.$)(o)},R)))):R}}const Ap=(0,J.$j)(((e,t)=>({detail:e.detail[_i.Xt][t.titleId],imdb:e.imdb[t.titleId],watchlistAction:e.hoverWatchlist[t.titleId],requestContext:At(e),pageContext:e.pageContext,pageLink:e.pageLink[t.titleId],isElcano:Boolean(e.features.isElcano),entitlementCue:e.entitlementCue[t.titleId],enableAutoPlayingInBTF:et(e),impressionAnalytics:e.impressionAnalytics[t.titleId]})))(Np);function Op(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Vp extends i.PureComponent{constructor(e){super(e),Op(this,"state",void 0),Op(this,"containerRef",void 0),this.state={isCarouselFocused:!1},this.containerRef=i.createRef()}setFocusedCarousel(e){this.setState({isCarouselFocused:e===this.props.index})}resetFocusedCarousel(){this.setState({isCarouselFocused:!1})}componentDidUpdate(){if(!this.state.isCarouselFocused){const e=document.activeElement,t=this.containerRef&&this.containerRef.current;t&&e&&t.contains(e)&&e.blur()}}getCarouselCollectionItem(e,t,a){const{refTagPrefix:n,index:r,isLast:s,impressionData:o}=this.props;return i.createElement("div",{className:Tp},i.createElement(Ap,{key:`carousel-collection${a?`-${a}`:""}-${e}-${t}`,idx:t,titleId:e,refTagPrefix:n,requestFocusForCarousel:()=>this.setFocusedCarousel(r),resetFocusForCarousel:()=>this.resetFocusedCarousel(),carouselContainerRef:this.containerRef,isFirst:0==t,isOnLastCarousel:s,impressionData:o,carouselIndex:r}))}render(){const{header:e,cardTitleIds:t,totalEpisodeSize:a,isLast:n}=this.props;return 0===t.length?null:i.createElement("div",{className:we(`dv-hover-packshot-container ${lp}`,{[bp]:1===a}),ref:this.containerRef},e&&i.createElement("h1",{className:cp}," ",e," "),i.createElement($.h.Consumer,null,(({formFactor:e})=>{const a=["Tablet","Phone"].includes(e);return i.createElement(sp.Carousel,{className:we(pp,{[Ep]:this.state.isCarouselFocused,[wp]:n}),leftScrollButtonClassName:we(yp,{[_p]:a}),rightScrollButtonClassName:we(yp,{[_p]:a})},t.map(((e,t)=>this.getCarouselCollectionItem(e,t))))})))}}const Lp=Jn(Xn((e=>{switch(e.collectionType){case"schedule":return i.createElement(Ei,e);case"carousel":return i.createElement("div",{className:be},i.createElement(Vp,e));default:return i.createElement(ip,e)}}))),Wp=(0,We.P)(Me.bS.pageTitleId,Me.bS.collections,((e,t)=>Mp(t[e]))),Mp=e=>e?e.map((({collectionType:e,titleIds:t,header:a,totalCardSize:n,impressionData:r},i)=>{const s=(e||"").toLowerCase();return o=s,$o.includes(o)&&0!==(t||[]).length?{header:a,collectionType:s,totalEpisodeSize:n||0,cardTitleIds:t,index:i,impressionData:r}:null;var o})).filter(Boolean):[],Bp=(0,We.P)(Wp,(e=>e&&e.map((e=>{return e&&e.collectionType&&(t=e.collectionType,Ho.includes(t))?e:null;var t})).filter(Boolean))),Up=(0,We.P)(Bp,(e=>Boolean(e&&e.length>0)));function jp(){return jp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},jp.apply(this,arguments)}const Fp=(0,J.$j)((e=>({showTabCollections:Up(e),collections:Bp(e)})))((({collections:e,showTabCollections:t})=>{if(!t)return null;const a=e.map(((e,t)=>i.createElement(Lp,jp({},e,{key:`collection-${e.index}-${t}`}))));return i.createElement(Ha.Container,null,a)})),$p=(0,We.P)(Me.bS.pageTitleId,Me.bS.carousel,((e,t)=>Mp(t[e]))),Hp=(0,We.P)($p,(e=>Boolean(null==e?void 0:e.length)));function Gp(){return Gp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Gp.apply(this,arguments)}const qp=(0,J.$j)((e=>({showCarousels:Hp(e),carousels:$p(e)})))((({carousels:e,showCarousels:t})=>t?i.createElement(Ha.Container,{className:be,testID:"caw-carousel-section"},e.map(((e,t)=>null===e?null:i.createElement(Vp,Gp({},e,{key:`carousel-collection-${e.index}-${t}`}))))):null)),zp="_3gXPVg",Zp="_1a0uyP",Xp=(0,We.P)(Me.mZ.otherFormats,(e=>Boolean(e&&e.actions&&e.actions.length))),Qp=(0,J.$j)((e=>({showOtherFormats:Xp(e),otherFormats:Me.mZ.otherFormats(e)})))((({otherFormats:e,showOtherFormats:t})=>{const{getString:a}=i.useContext($.h);return t&&e?i.createElement(Ha.Container,{className:be},i.createElement("div",{"data-automation-id":"other-formats"},i.createElement("h1",{className:zp}," ",a("DV_DP_CL_other_formats_title")," "),e.actions.map(((e,t)=>i.createElement("div",{className:Zp,key:`other-format-${t}`},i.createElement(sr.PrimaryButton,{href:e.link,forceDoubleHeight:!0},i.createElement(l.Text,{tag:"span",string:e.text}))))))):null})),Yp="_3MUwh1",Jp="_2qxCUH",Kp="_1EDVkk",em="_2cWRFD",tm="BOWhoV",am="_2HvOya",nm="_3A_0MI",rm="_8Yq3WS",im="VSf1a7",sm="p8Afly",om="_1DMa3P",lm=(0,We.P)(Me.mZ.castAndCrew,(e=>Boolean(e&&e.castAndCrews.length>0))),cm="_2xP0Cm",dm="_19bcWO",um="_1Ay6Wu",pm="Dpi33q";var mm=a("./src/util/types/wps/following.ts");function gm(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const hm=({errorMessage:e})=>i.createElement(wd.Callout,{use:"error",content:e,position:"bottom",startOpen:!0,size:"s",dismissSeconds:5});class _m extends i.Component{constructor(e){super(e),gm(this,"constructInput",(e=>{const{endpoint:t,context:a}=e,{query:n}=t,{tagValue:r,scopeValue:i,personIdValue:s,tokenValue:o,personNameValue:l}=this.getQueryValues(n);return{context:a,personId:s,personName:l,tag:r,scope:i,token:o}})),gm(this,"onSubmit",(e=>{e.preventDefault(),this.submitForm()})),gm(this,"updateErrorMessage",(e=>{this.setState({errorMessage:e})})),gm(this,"submitForm",(()=>{const{logger:e,onSuccess:t,onFailureWithMessage:a,onUnexpectedFailure:n}=this.props;(new s.eZ).ToggleFollowing(this.constructInput(this.props)).then((e=>{(0,vt.aP)(e.success)?t&&t(e):a?a(e):this.updateErrorMessage(e.message)})).catch((t=>{n&&n(t),e.error(t)}))})),gm(this,"getQueryValues",(e=>({tagValue:e.tag,scopeValue:e.scope,personIdValue:e.personId,tokenValue:e.token,personNameValue:e.personName}))),gm(this,"getButtonStyle",((e,t)=>{const a=t?um:dm;switch(e){default:return a;case"secondary":return dm;case"undo-link":return pm}})),this.state={errorMessage:e.errorMessage}}componentDidUpdate(e){e.errorMessage!==this.props.errorMessage&&this.updateErrorMessage(this.props.errorMessage)}render(){const{tag:e,buttonType:t,text:a,endpoint:n,className:r,enableErrorMessage:s}=this.props,{errorMessage:o}=this.state,l=e===mm.Ou.Unfollow,{partialURL:c,query:d}=n,{tagValue:u,scopeValue:p,personIdValue:m,tokenValue:g,personNameValue:h}=this.getQueryValues(d),_=this.getButtonStyle(t||"primary",l),f=we(cm,null!=r?r:"");return i.createElement("div",{className:f},i.createElement("form",{action:c,method:"POST",onSubmit:this.onSubmit},i.createElement("input",{name:"token",type:"hidden",value:g}),i.createElement("input",{name:"tag",type:"hidden",value:u}),i.createElement("input",{name:"scope",type:"hidden",value:p}),i.createElement("input",{name:"personId",type:"hidden",value:m}),h&&i.createElement("input",{name:"personName",type:"hidden",value:h}),i.createElement("button",{type:"submit",className:_},a)),s&&o&&i.createElement(hm,{errorMessage:o}))}}function fm(){return fm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},fm.apply(this,arguments)}const vm=e=>{const{tag:t,text:a,endpoint:n}=e;return{tag:t,text:a,endpoint:n}};class bm extends i.Component{constructor(e){var t,a,n;super(e),n=e=>{e.newAction&&this.setState({toggleFollowingAction:e.newAction})},(a="onToggleFollowingSuccess")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.state={toggleFollowingAction:vm(e.toggleFollowingAction)}}render(){const{buttonType:e,className:t,enableErrorMessage:a,context:n,logger:r}=this.props,{toggleFollowingAction:s}=this.state;return i.createElement(_m,fm({},s,{context:n,logger:r,onSuccess:this.onToggleFollowingSuccess,buttonType:e,className:t,enableErrorMessage:a}))}}const Em=(0,Q.s6)((0,Y.ty)(bm));var ym=a("./node_modules/@amzn/dvui/dist/Icons/LogoImdbOutline.js"),wm=a.n(ym);function Tm(){return Tm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Tm.apply(this,arguments)}const Dm=({castMember:e,showCastImages:t,index:a,isLast:n})=>{const r={collectionType:"carousel",cardTitleIds:e.titles,totalEpisodeSize:e.titles.length,index:a,isLast:n},s=(e,t)=>t?`${e} - ${t}`:e,{imageUrl:o,name:c,role:d,personPageLink:u,personPageImageLink:p,personPageFollowingAction:m}=e.cast;return i.createElement(i.Fragment,null,i.createElement("div",{className:Kp},i.createElement("h3",{className:Jp},s(c,d)),u&&i.createElement(l.Text,{className:em,string:u,testID:"person-page-link"}),m&&i.createElement(Em,{toggleFollowingAction:m,className:sm,enableErrorMessage:!0})),i.createElement("div",{className:we(tm,"cast-and-crew-member",{[am]:t})},t&&i.createElement("div",{className:`${rm}`},((e,t,a)=>{const n={alt:"",src:e,baseValue:175,srcSizes:[{"max-phone-landscape":112}],isLazy:!0},r=e&&"\\N"!==e,s=i.createElement(i.Fragment,null,i.createElement("div",{className:im},i.createElement(rn.Icon,{use:rn.IconType.LOGO_PRIMEVIDEO})),r&&i.createElement(pt,Tm({className:nm},n)));return t?i.createElement("a",{href:t,"data-automation-id":"person-page-image-link",className:"personPageImageLink","aria-label":a}," ",s," "):s})(o,p,s(c,d))),i.createElement(Vp,r)))},Im=(0,J.$j)((e=>({showCastAndCrew:lm(e),castAndCrew:Me.mZ.castAndCrew(e)})))((({castAndCrew:e,showCastAndCrew:t})=>{if(!t)return null;const a=e&&e.castAndCrews,n=!!a&&a.some((e=>e.cast.imageUrl&&"\\N"!==e.cast.imageUrl));return i.createElement(Ha.Container,{className:`${be} cast-and-crew-section`,testID:"cast-and-crew-section"},i.createElement("h2",{className:Yp},i.createElement(z,{stringID:"DV_DP_CAST_CREW_HEADING"}),i.createElement("span",{className:om},i.createElement(z,{stringID:"DV_DP_powered_by"})),i.createElement(wm(),null)),a&&a.map(((e,t)=>i.createElement(Dm,{castMember:e,showCastImages:n,key:`cast-member-${t}`,index:t,isLast:t===a.length-1}))))}));var Cm=a("./node_modules/@amzn/dvui/dist/MoreContent.js");const Pm="_266mZB",Sm="_3u-3mI",km="_2y5Q0c",Rm="_3XUVYC",xm="_30UT8H",Nm=(0,We.P)([xt,Me.mZ.moreDetails],((e,t)=>Boolean(e&&t)||Boolean(t&&t.ratingBadge))),Am=(0,We.P)([Me.bS.context],(e=>e.marketplaceID===ld.HZ.UK)),Om=3;let Vm;!function(e){e[e.Directors=0]="Directors",e[e.Starring=1]="Starring",e[e.Genres=2]="Genres",e[e.Subtitles=3]="Subtitles",e[e.AudioTracks=4]="AudioTracks",e[e.Actors=5]="Actors",e[e.Producers=6]="Producers",e[e.ReleaseYear=7]="ReleaseYear",e[e.Studios=8]="Studios",e[e.RegRating=9]="RegRating",e[e.ContentDescriptors=10]="ContentDescriptors",e[e.PurchaseRights=11]="PurchaseRights",e[e.Format=12]="Format",e[e.Amr=13]="Amr",e[e.Devices=14]="Devices"}(Vm||(Vm={}));const Lm={[Vm.Subtitles]:2,[Vm.AudioTracks]:2},Wm=(e,t,a)=>[i.createElement(Rn.Link,{key:`type-content-link-${a}`,text:e,href:t})],Mm=(e,t)=>[i.createElement(i.Fragment,{key:`type-content-text-${t}`},e)];function Bm(e){switch(e&&e.toUpperCase()){case"US":return i.createElement(z,{stringID:"DV_TW_title_mpaarating"});case"UK":return i.createElement(z,{stringID:"DV_TW_title_bbfcrating"});case"DE":return i.createElement(z,{stringID:"DV_TW_title_fskrating"});default:return i.createElement(z,{stringID:"DV_TW_title_eirinrating"})}}function Um(e,t,a,n){return{header:e,items:a&&a.length>0?a.map(((e,a)=>t(e,a))):null,stylingClasses:n}}function jm(e,t,a){return{header:e,items:t&&t.length>0?[t]:null,stylingClasses:a}}const Fm=(e,t)=>Wm(i.createElement(F,{string:e.name}),e.searchLink,t),$m=(e,t)=>Mm(i.createElement(F,{string:e.name}),t),Hm=(e,t)=>Wm(i.createElement(F,{string:e.text}),e.searchLink,t),Gm=(e,t)=>Mm(i.createElement(F,{string:e.text}),t),qm=(e,t)=>e.link?Wm(i.createElement(F,{string:e.text}),e.link,t):Mm(i.createElement(F,{string:e.text}),t),zm=(e,t)=>Mm(i.createElement(F,{string:e.text}),t),Zm=(e,t)=>{const a=0===t?`${e.charAt(0).toUpperCase()}${e.slice(1)}`:e;return Mm(i.createElement(F,{string:a}),t)},Xm=(e,t)=>Mm(i.createElement(F,{string:e}),t),Qm=e=>{return[[i.createElement(z,{stringID:"DV_TW_data_purchaserights_streaming",key:0})," ",(t=i.createElement("div",{className:`${Rm}`},i.createElement(z,{stringID:"DV_WEB_DP_popover_purchase_rights",dvStringAttrs:{compatibleDeviceLink:{href:e("/ontv/devices",{refTag:"atv_dp_hd_dev"})},touLink:{href:e("/dv/tou",{refTag:"atv_dp_tou",isShortUrl:!0})},learnDownloading:{href:e("/gp/help/customer/display.html?nodeId=201460820",{refTag:"atv_dp_learn_download",isShortUrl:!0})}}})),a=i.createElement(z,{stringID:"DV_TW_Detail_text"}),n=1,i.createElement(Ii,{modalContent:t,toggle:({openModalClickHandler:e})=>i.createElement(Rn.Link,{onClick:e},a),key:`type-content-modal-${n}`}))]];var t,a,n},Ym=e=>[[Mm(i.createElement(z,{stringID:"DV_TW_data_available_to_watch_devices",dvStringAttrs:{supportedDevicesLink:{href:e("/watchAnywhere",{refTag:"atv_dp_watch_anywhere",isShortUrl:!0})}}}),0)]],Jm=({header:e,items:t,moreString:a,type:n,expandedItemsCount:r,stylingClasses:s})=>{let o=(e=>{const[t,...a]=e;return[t,...a.reduce(((e,t,a)=>[...e,i.createElement("span",{"aria-hidden":!0,key:`separator-${a}`},i.createElement(z,{stringID:"DV_comma_separator"})),...t]),[])]})(t);const l=2*r;if(o.length>l){const e=o.slice(0,l),t=o.slice(l);o=[i.createElement(Cm.MoreContent,{visible:e,hidden:t,key:"more-content",moreString:a,index:n})]}const c=s?we(s):void 0;return i.createElement("dl",{key:`dl-${n}`,className:c},i.createElement("dt",null,e),i.createElement("dd",null,o))},Km=(0,J.$j)((e=>({requestContext:At(e),isPurchaseRestricted:je(e),isCerberusChild:Ue(e),questLinksEnabled:Am(e)})))((e=>{const{getString:t}=i.useContext($.h),{fields:a,showHeader:n=!1,expandedItemsCount:r=Om,id:s}=e,o=t("DV_DP_more_items"),l=(({ratingBadge:e,titleType:t,contributors:a,genres:n,subtitles:r,enhancedSubtitles:s,audioTracks:o,studios:l,releaseYear:c,isPurchaseRestricted:d,contentDescriptors:u,entityType:p,requestContext:{makeUrl:m,rawContext:g},isCerberusChild:h,questLinksEnabled:_},f)=>{const v=En(e)&&e,b=yn(e)&&e,E=t&&"MOVIE"===t.toUpperCase(),y=f("DV_brand_av"),w=f("DV_DP_ARIA_learn_more_amr"),T=f("DV_DP_none_available"),D=(0,Z.xb)(r)&&!(0,ld.D1)(g.marketplaceID)?[T]:r,I=(0,Z.xb)(s)&&!(0,ld.D1)(g.marketplaceID)?[{text:T}]:s,C=(0,Z.JQ)(h)?$m:Fm,P=(0,Z.JQ)(h)?Gm:Hm,S=(0,Z.JQ)(h)?zm:qm;return{[Vm.Directors]:Um(i.createElement(z,{stringID:"DV_TW_title_directors"}),C,a&&a.directors),[Vm.Producers]:Um(i.createElement(z,{stringID:"DV_TW_title_producers"}),C,a&&a.producers),[Vm.Actors]:Um(i.createElement(z,{stringID:"DV_TW_title_actors"}),C,a&&a.supportingActors),[Vm.Starring]:Um(i.createElement(z,{stringID:"DV_TW_title_starring"}),C,a&&a.starringActors),[Vm.Genres]:Um(i.createElement(z,{stringID:"DV_TW_title_genres"}),P,n),[Vm.Subtitles]:_?Um(i.createElement(z,{stringID:"DV_TW_title_subtitles"}),S,I,[km]):Um(i.createElement(z,{stringID:"DV_TW_title_subtitles"}),Xm,D,[km]),[Vm.AudioTracks]:Um(i.createElement(z,{stringID:"DV_TW_title_languages"}),Xm,o,[km]),[Vm.Studios]:Um(E?i.createElement(z,{stringID:"DV_TW_title_studio"}):i.createElement(z,{stringID:"DV_TW_title_network"}),Xm,l),[Vm.Amr]:jm(i.createElement(z,{stringID:"DV_TW_title_amr"}),v&&(k=v&&v.displayText,R=v&&Tn(v)&&v.description||"",x=i.createElement(z,{stringID:"DV_DP_learn_more"}),N="/amr/ref=atv_hp_dp_amr",A=0,O=w,[i.createElement("span",{key:`amr-span-${A}`,dir:"ltr"},k)," ",R," ",i.createElement(Rn.Link,{key:`amr-link-${A}`,text:x,href:N,ariaLabel:O})])||[]),[Vm.RegRating]:jm(b&&Bm(b.countryCode),E&&b&&b.description&&Mm(b.description,0)||[]),[Vm.ContentDescriptors]:Um(i.createElement(z,{stringID:"DV_TW_title_content_descriptors"}),Zm,u,[km]),[Vm.ReleaseYear]:jm(i.createElement(z,{stringID:"DV_TW_title_seasonyear"}),!E&&c&&Mm(c,0)||[]),[Vm.PurchaseRights]:jm(i.createElement(z,{stringID:"DV_TW_title_purchaserights"}),!d&&Qm(m)||[]),[Vm.Format]:jm(i.createElement(z,{stringID:"DV_TW_title_format"}),Mm(i.createElement(z,{stringID:"DV_TW_data_format_streaming",replace:{brand:y}}),0)),[Vm.Devices]:jm(i.createElement(z,{stringID:"DV_TW_title_devices"}),p&&!d&&!Ut(p)&&Ym(m)||[])};var k,R,x,N,A,O})(e,t),c=a.map(((e,t)=>{const a=Lm[e]||r,n=l[e];return n&&n.items&&n.items.length>0&&i.createElement(Jm,{key:`row-${s}-${t}`,header:n.header,items:n.items,moreString:o,type:e,expandedItemsCount:a,stylingClasses:n.stylingClasses})})),d=n&&c&&c.filter(Boolean).length?i.createElement(z,{stringID:"DV_DP_more_details"}):null;return i.createElement("div",{className:we(he,xm),id:s,"data-automation-id":s},d&&i.createElement("h1",null," ",d," "),i.createElement("div",{className:Pm},c))}));function eg(){return eg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},eg.apply(this,arguments)}const tg=e=>[...e?[Vm.Directors]:[],Vm.Actors,Vm.Producers,Vm.ReleaseYear,Vm.Studios,Vm.RegRating,Vm.ContentDescriptors,Vm.PurchaseRights,Vm.Format,Vm.Devices],ag=e=>[...e?[Vm.Directors]:[],Vm.Producers,Vm.Studios,Vm.Amr,Vm.ContentDescriptors,Vm.Actors],ng=(0,J.$j)((e=>({productDetails:Me.mZ.moreDetails(e),requestContext:At(e)})))((({productDetails:e,requestContext:t})=>{if(e){const a=jt(e);return i.createElement(Ha.Container,{className:be},i.createElement(Km,eg({},e,{fields:t.isRetail?tg(a):ag(a),showHeader:!0,expandedItemsCount:5,id:"btf-product-details"})))}return null})),rg=(0,We.P)(Me.bS.pageTitleId,Me.bS.extras,((e,t)=>Mp(t[e]))),ig=(0,We.P)(rg,(e=>Boolean(null==e?void 0:e.length))),sg="_3g0WlT",og="ROp-tf",lg="_lKdJJ",cg="Rrkogn",dg="_3fKOS8",ug="_2emfkv",pg="_1VOMz_",mg="_28m62t",gg="_1fs8wE",hg="_3kpEBJ",_g="_3NSDON",fg="_3p-Unh",vg="_3O66SI",bg="_3g93Un";var Eg=a("./node_modules/@amzn/dvui/dist/Beard.js");const yg="_3y6hZ6",wg=({subtitles:e,isClosedCaption:t})=>{const{getString:a}=i.useContext($.h);return Boolean(e&&e.length||(0,Z.JQ)(t))&&i.createElement("span",{"data-automation-id":"subtitles-badge","aria-label":a("DV_WEB_SETTINGS_HEAD_SUBTITLES"),role:"text"},i.createElement(rn.Icon,{className:yg,use:rn.IconType.SUBTITLES}))||null},Tg="Ps5WvF",Dg=({isAd:e})=>{const{getString:t}=i.useContext($.h);return(0,Z.JQ)(e)&&i.createElement("span",{"data-automation-id":"ad-badge",className:Tg,title:t("DV_DP_ARIA_audio_description"),"aria-label":t("DV_DP_ARIA_audio_description"),role:"text"},i.createElement(rn.Icon,{use:rn.IconType.AUDIO_DESCRIPTION}))||null},Ig="_3kXILr",Cg=({playbackActionData:e,isMShop:t,index:a,sequenceNumber:n})=>{const{onPlay:r}=i.useContext(ei.ET);if(!e)return null;const s=(0,o.VJ)(e.label,{lineBreak:", "}),l={contentConfig:{asin:e.playbackID,trailer:!1,position:e.resumeTime,ref:e.playerRefMarker,videoType:e.videoMaterialType,useFullView:!0,playbackEnvelope:(0,Yt.D)(e)},signInUrl:e.signInURL,playbackUrl:e.playbackURL,fallbackUrl:e.fallbackURL,sequenceNumber:n,isBonus:!0,subscriptionName:e.subscriptionName,triggerLocation:"Extras",refMarker:e.refMarker};return i.createElement(Ji,{refTag:`atv_dp_extras_pb_${a}`},i.createElement("span",{"data-automation-id":"extras-playbutton"},i.createElement(Ar,{className:Ig,href:t?void 0:e.playbackURL,isSeeThrough:!0,isLarge:!1,ariaLabel:s,onClick:e=>{r(l),e.preventDefault()}})))};function Pg(){return Pg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Pg.apply(this,arguments)}const Sg=(0,J.$j)(((e,t)=>({detail:e.detail[_i.Xt][t.titleId],action:e.action[di.L5][t.titleId],requestContext:At(e),isMShop:He(e),isRefunding:Boolean(e.refund.refunding&&e.refund.refunding.titleId===t.titleId),purchaseDetails:ju(e,t.titleId)})))((e=>{var t;const{detail:a,action:n,titleId:r,requestContext:s,purchaseDetails:o,isMShop:l,idx:c,isRefunding:d,carouselIndex:u}=e;if(!a)return null;const p=(s.isRetail?a.asin:a.gti)||r,m=null===(t=a.images)||void 0===t?void 0:t.covershot,g=null==a?void 0:a.episodeNumber,h=(0,Qt.MG)(null==n?void 0:n.playbackActions),_=Boolean(o),f=_||d,v={alt:a.title,src:m,baseValue:329,srcSizes:[{"max-tablet-landscape":266},{"max-phone-landscape":216}],skipStripTags:!0,isLazy:!0},b={playbackActionData:h,isMShop:l,index:c,sequenceNumber:g},E={alt:a.title,className:bg,overlay:f?i.createElement(Yr,{className:gg,useSmallSpinner:!0}):i.createElement(Cg,b)},y=null==a?void 0:a.ratingBadge,w={subtitles:null==a?void 0:a.subtitles,isClosedCaption:a.isClosedCaption},T=Boolean((null==n?void 0:n.acquisitionActions)&&!(0,Z.xb)(Object.keys(n.acquisitionActions))),D={acquisitionActions:null==n?void 0:n.acquisitionActions,sequenceNumber:g,titleID:r,isPurchasing:_,rawContext:s.rawContext,isRefunding:d},I={synopsis:null==a?void 0:a.synopsis,modalId:`extras-synopsis-${u}-${c}`,header:a.title},C={title:a.title,secondLine:i.createElement("div",null,i.createElement("div",{className:dg},i.createElement("div",{className:ug},i.createElement(wg,w)),i.createElement("div",{className:ug},i.createElement(vn,{runtime:a.runtime})),i.createElement("div",{className:ug},i.createElement(Dg,{isAd:a.isAd})),i.createElement("div",{className:ug},i.createElement(kn,{ratingBadge:y}))),i.createElement(an,I),i.createElement("div",{className:pg},i.createElement(Gd,D)))};return i.createElement(Eg.Beard,Pg({className:we({[hg]:T},_g)},C),i.createElement(op.Packshot,Pg({},E,{asin:p}),i.createElement("div",{className:lg},i.createElement("div",{className:fg},i.createElement(rn.Icon,{use:rn.IconType.SMILE})),m&&i.createElement(pt,Pg({className:cg,classNameContainer:cg},v)))))})),kg=e=>{const{cardTitleIds:t,index:a,impressionData:n,header:r}=e;if((0,Z.xb)(t))return null;const s=t.map(((e,t)=>((e,t,r)=>i.createElement(Sg,{key:`extras-carousel-collection${r?`-${r}`:""}-${e}-${t}`,idx:t,titleId:e,impressionData:n,carouselIndex:a}))(e,t)));return i.createElement("div",{className:sg},r&&i.createElement("h1",{className:og}," ",r," "),i.createElement($.h.Consumer,null,(({formFactor:e})=>{const t=["Tablet","Phone"].includes(e);return i.createElement(sp.Carousel,{className:mg,leftScrollButtonClassName:we({[vg]:t}),rightScrollButtonClassName:we({[vg]:t})},s)})))};function Rg(){return Rg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Rg.apply(this,arguments)}const xg=(0,J.$j)((e=>({showExtrasTab:ig(e),extrasCollections:rg(e)})))((({extrasCollections:e,showExtrasTab:t})=>{if(!t)return null;const a=e.map(((e,t)=>i.createElement("div",{className:be},i.createElement(kg,Rg({},e,{key:`extras-collection-${e.index}-${t}`})))));return i.createElement(Ha.Container,null,a)}));var Ng=a("./node_modules/react-dom/index.js");const Ag=(0,We.P)([Gt,qe,Me.bS.exploreTabContent],((e,t,a)=>"true"!==t.disableExploreTab&&Boolean(e&&a&&a.staticPageContent))),Og="StarlightPlayRequest",Vg=({content:e,showExploreTab:t,requestContext:a,titleId:n,logger:s})=>{const{onPlay:o}=i.useContext(ei.ET),{isRecognizedCustomer:l,queryParameters:c,originalURI:d,isRetail:u}=a,p=()=>{const e="dv_dp_explore_sign_in",t=me({parameters:c,originalURI:d,isRetail:u},n,e);return ue({parameters:c,originalURI:d,isRetail:u},e,t)};return i.useEffect((()=>{if(t&&e){(0,r._U)("pv-starlight-detail-page");const e=({detail:e})=>{e&&(s.count(`${Z.EZ}_Starlight_Playback`,1,!1),o(Object.assign(e,!l&&{signInUrl:p()})))};return document.addEventListener(Og,e),()=>{const t=document.getElementById("starlight-root");t&&Ng.unmountComponentAtNode(t),document.removeEventListener(Og,e)}}}),[]),t&&e&&e.staticPageContent?i.createElement("div",{dangerouslySetInnerHTML:{__html:e.staticPageContent}}):null},Lg=(0,zn.n)((0,J.$j)((e=>({content:Me.bS.exploreTabContent(e),showExploreTab:Ag(e),requestContext:At(e),titleId:Me.bS.pageTitleId(e)})))(i.memo(Vg))),Wg=(0,We.P)([Ke,xt,Ue,Me.mZ.comingSoon],((e,t,a,n)=>(t||e)&&!Boolean(n)&&!a)),Mg=(0,We.P)([Ze,Me.mZ.reviewSubmission],((e,t)=>e&&void 0!==(null==t?void 0:t.isEligible)&&!t.isEligible)),Bg="O4Kxlz",Ug="_2hFdht",jg="_3AQ-tz",Fg="_1w2Mfb",$g="eph53l",Hg="W27_oz",Gg="_3XbWV6",qg="_2lZKCy",zg="_3campH",Zg="_2dVGOh",Xg="_2jVHh-",Qg="_1vYcYX",Yg="_1OnCd3",Jg="_3zF9LN",Kg="_3BAKUi",eh="_1dW6n4",th="C9h022",ah="_1O9NWx",nh="u_JfyW",rh="_3gvi4K",ih="_21cmh7",sh="TtG3yR",oh="cQzc0Q",lh="_1ylCCx",ch="ddqfkl",dh="_1p1TF6",uh="_3Z6a5Q",ph=e=>e.url?i.createElement("a",{href:e.url,className:e.className,"aria-label":e.ariaLabel,"data-automation-id":e.automationId,target:e.target},e.children):i.createElement("span",{"aria-label":e.ariaLabel,className:e.className,"data-automation-id":e.automationId,role:"img"},e.children);var mh=a("./node_modules/@amzn/dvui/dist/Icons/LinkArrow.js"),gh=a.n(mh);const hh="HEXDrZ",_h="_2yoYLR",fh="D9LaaU",vh="_3hGUnl",bh="Km2bko",Eh="_3rWEr0",yh="_2r1IO_",wh="_2D1hub",Th="_26VrVp",Dh="KFiIwp",Ih="_3txQ2v",Ch="oZ_Fl8",Ph="_1wTVMS",Sh="_276_lE",kh="_6g7nQt",Rh="_3jXUWZ",xh="_37VAqj";var Nh=a("./node_modules/@amzn/dvui/dist/StarRating.js");const Ah=(e,t=500)=>{const[a,n]=i.useState(e);return i.useEffect((()=>{const a=setTimeout((()=>n(e)),t);return()=>clearTimeout(a)}),[e,t]),a},Oh="R1WOyM",Vh="_2fz2VR",Lh="_1Eprhn",Wh="_1cnOtx",Mh="_1hZk0r",Bh="_2Zfa10",Uh="iJceYa",jh="_22wNbf",Fh="LMMzLm",$h="_1yiEiK",Hh="_1ZVGCG",Gh="_3RWny_",qh="_25m6au",zh="_2WPhMS",Zh="_3GBxxG",Xh="_1QGa1c",Qh="_3T_hpD",Yh="_2pD8ZD",Jh="_3Dy9V6",Kh="_3Zzfrt",e_="_2J9xB9",t_="_3OvXyf",a_="_3Yf6pO",n_="_1L4oZL",r_="_2IWcgA",i_="PpVn91",s_="ywwSly",o_=({numStar:e,onMouseEnter:t,onMouseLeave:a,selectedRating:n,hoveredRating:r,onClick:s})=>{const o=`star-rating-selector-item-${e}`,l=i.useMemo((()=>r?r===e?"selected":r<e?"empty":"hovered":n<e?"empty":"selected"),[n,r,e]);return i.createElement("div",{onMouseEnter:()=>t(e),onMouseLeave:a,onFocus:()=>t(e),onClick:s,className:t_,tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||s()},"data-automation-id":o,"data-testid":o},i.createElement(rn.Icon,{use:rn.IconType.AMAZON_RATING,className:we(a_,{[n_]:"empty"===l,[r_]:"hovered"===l})}))},l_=({ratingSavedText:e,rating:t,starRatingOnClick:a})=>{const[n,r]=i.useState(t&&Math.round(t)||0),[s,o]=i.useState(0),l=e=>o(e),c=()=>o(0),d=e=>()=>{r(e),a(e,n)};return i.createElement("div",{className:i_},i.createElement("div",{className:e_},[1,2,3,4,5].map((e=>i.createElement(o_,{numStar:e,onMouseEnter:l,onMouseLeave:c,hoveredRating:s,selectedRating:n,onClick:d(e),key:e})))),e&&i.createElement("p",{className:s_},e))},c_=(e,t,a)=>(n,r)=>{n({type:a?Pi.k.UpdateRatingState:Pi.k.UpdateSubmissionState,nextState:"inProgress",payload:{pageTitleId:t}}),((e,t)=>ul({input:e,operation:Ko.SubmitCustomerReview},dl,t))(e,(r=>{var i;return e.reviewContent&&!e.reviewID&&null!==(i=r.output)&&void 0!==i&&i.isSuccessful&&ol(e.context,t,$s)(n),{type:Pi.k.SubmitCustomerReview,input:e,output:Uo(e,r),isToUpdateRating:a,payload:{pageTitleId:t}}}))(n,r)},d_=(e,t)=>(a,n)=>{a({type:Pi.k.UpdatePublicNameState,nextState:"inProgress",payload:{pageTitleId:t}}),((e,t)=>ul({input:e,operation:Ko.SetPublicNameInput},cl,t))(e,(a=>({type:Pi.k.SetPublicName,input:e,output:a,payload:{pageTitleId:t}})))(a,n)},u_=i.createContext({}),p_="_2hHNJ_",m_="_3qhzDI",g_="_2CM2Jx",h_="_231yhh",__="_2iKiEU",f_="_2L9jor",v_="_1S351v",b_="_3Zue2Q",E_="bSPXCp",y_="lXypfd",w_=(0,J.$j)(null,(e=>({setPublicName:(t,a)=>e(d_(t,a)),clearPublicNameState:t=>e((e=>t=>{t({type:Pi.k.UpdatePublicNameState,nextState:"idle",payload:{pageTitleId:e}})})(t))})))((({publicNameState:e,publicNameToken:t,setPublicName:a,clearPublicNameState:n})=>{const{requestContext:r,pageTitleId:s,getString:o}=i.useContext($.h),{publicName:l,state:c,isValidName:d}=e,[u,p]=i.useState({isEditing:!1}),[m,g]=i.useState(l);i.useEffect((()=>{switch(c){case"successful":p({isEditing:!1});break;case"unsuccessful":p({isEditing:!0,errorState:void 0===d||d?"serverError":"invalid"})}}),[c]);const h=()=>{p({isEditing:!1}),g(l),n(s)},_=()=>i.createElement("div",{className:__},i.createElement(Ga.Expander,{numOfLines:1,uniqueId:"public-name-expander",testID:"public-name-container-display"},l));return i.createElement("form",{className:g_,onSubmit:e=>{e.preventDefault(),0===(null==m?void 0:m.trim().length)?p({isEditing:!0,errorState:"invalid"}):m===l?h():a({token:t,publicName:m,context:r},s)}},i.createElement("p",{className:h_},`${o("DV_CR_public_name_rating_as")}:`),u.isEditing?i.createElement("div",{className:v_},i.createElement("input",{className:we(p_,b_),name:"publicNameInput",type:"text",onChange:e=>g(e.target.value),autoComplete:"off",value:m,maxLength:100,required:!0,dir:"auto","data-automation-id":"public-name-container-input","data-testid":"public-name-container-input"}),u.errorState&&i.createElement("div",{className:m_,"data-automation-id":"public-name-failure"},i.createElement(rn.Icon,{use:rn.IconType.ALERT_CRITICAL}),i.createElement("p",null,(()=>{switch(u.errorState){case"invalid":return o("DV_CR_public_name_failure");case"serverError":return o("DV_CR_review_submission_failure");default:return}})()))):i.createElement(_,null),u.isEditing&&"successful"!==c?"inProgress"===c?i.createElement(Xr.Spinner,null):i.createElement("div",{className:E_},i.createElement(sr.PrimaryButton,{className:y_,type:"submit",testID:"public-name-container-submit-button"},o("DV_CR_submission_submit")),i.createElement(or(),{className:y_,onClick:()=>h(),testID:"public-name-container-cancel-button"},o("DV_common_cancel"))):i.createElement("button",{className:f_,onClick:()=>{n(s),p({isEditing:!0})},"data-automation-id":"public-name-container-edit-button","data-testid":"public-name-container-edit-button"},o("DV_CR_public_name_change")))})),T_=({isOptional:e,text:t,optionalText:a})=>i.createElement("div",{className:Qh},i.createElement("p",null,t),e&&i.createElement("p",{className:Yh},`(${a})`)),D_=(e,t)=>t?e.verifiedPurchaseLimit:e.unverifiedPurchaseLimit,I_=({closeModal:e,submitCustomerReview:t,createSuccessBanner:a})=>{var n,r,s,o;const{pageType:l,subPageType:c,getString:d,isMobile:u,pageTitleId:p,requestContext:m,refTagTitleId:g}=i.useContext($.h),{maybeDetailFragment:h,reviewSubmission:_,reviewTitleId:f}=i.useContext(u_),{customerSubmittedReview:v,reviewSubmissionLimits:b,publicNameState:E,publicNameToken:y,reviewSubmissionToken:w,ratingState:T,reviewSubmissionState:D}=_,I=i.useRef(null),[C,P]=i.useState(Boolean(v)||u),[S,k]=i.useState((null==v||null===(n=v.customerSubmittedReviewContent)||void 0===n?void 0:n.reviewTitle)||""),[R,x]=i.useState((null==v||null===(r=v.customerSubmittedReviewContent)||void 0===r?void 0:r.reviewContent)||""),[N,A]=i.useState(),[O,V]=i.useState(),L=d("DV_CR_submission_optional"),W=Boolean(null==v?void 0:v.isVerifiedPurchase);i.useEffect((()=>{switch(T){case"successful":V(void 0),C||P(!0);break;case"unsuccessful":V(d("DV_CR_review_submission_failure"))}switch(D){case"successful":var t;A(void 0),a(),e(),null===(t=window)||void 0===t||t.scrollTo({left:0,top:0,behavior:"smooth"});break;case"unsuccessful":A("serviceFailure")}}),[T,D]);const M=i.useMemo((()=>({minimumCharactersLimit:D_(b.minimumCharacters,W)||1,maximumCharactersLimit:D_(b.maximumCharacters,W)||2e4,minimumWordLimit:D_(b.minimumWords,W)||1,maximumWordLimit:D_(b.maximumCharacters,W)||100})),[W]),B=Ah(S,200),U=Ah(R,200),j=e=>0===e.trim().length,F=i.useMemo((()=>!j(B)&&!j(U)),[B,U]),H=i.useMemo((()=>{var e,t;return W&&0===B.length&&0===U.length||F&&B===(null==v||null===(e=v.customerSubmittedReviewContent)||void 0===e?void 0:e.reviewTitle)&&U===(null==v||null===(t=v.customerSubmittedReviewContent)||void 0===t?void 0:t.reviewContent)}),[U,B,W]);if(!E.publicName)return null;const G=()=>{const{minimumCharactersLimit:e,maximumCharactersLimit:t,maximumWordLimit:a,minimumWordLimit:n}=M,r=R.split(/\b\W+\b/).length;if(R.length<e)A("minimumCharacters");else if(R.length>t)A("maximumCharacters");else if(r<n||j(R))A("minimumWords");else if(r>a)A("maximumWords");else{if(Boolean(v))return!0;A("ratingMissing")}return!1},q={alt:"",src:(null==h||null===(s=h.images)||void 0===s?void 0:s.covershot)||(null==h||null===(o=h.images)||void 0===o?void 0:o.packshot),baseValue:268,srcSizes:[{"max-phablet":148},{"min-desktop":268}],isLazy:!0},z=(e,t,a)=>({context:m,titleID:f,ratingValue:e,token:w,reviewContent:t,reviewID:a});return i.createElement("div",{className:Vh},i.createElement(w_,{publicNameState:E,publicNameToken:y}),i.createElement("div",{className:Lh},(null==h?void 0:h.images)&&i.createElement("div",{className:jh},i.createElement(pt,q)),i.createElement("div",{className:Fh},h&&i.createElement("p",{className:$h},h.title),i.createElement("h1",null,d("DV_CR_submission_overall_rating")),i.createElement(l_,{ratingSavedText:!u&&W?d("DV_CR_submission_rating_saved"):void 0,starRatingOnClick:(e,a)=>{var n;if(e!==a)if((0,On.XQ)((0,de.i)("atv_dp_cr_sub_sr_{ratingNumber}",{ratingNumber:`${e}`}),l,c,g),Boolean(null==v?void 0:v.customerSubmittedReviewContent)){const{reviewID:a,reviewContent:n,reviewTitle:r}=null==v?void 0:v.customerSubmittedReviewContent;t(z(e,{bodyText:n,titleText:r},a),p,!0)}else t((e=>({context:m,titleID:f,ratingValue:e,token:w}))(e),p,!0);null===(n=I.current)||void 0===n||n.focus()},rating:null==v?void 0:v.rating}),O&&i.createElement("div",{className:Jh},i.createElement(rn.Icon,{use:rn.IconType.ALERT_CRITICAL}),i.createElement("p",null,O)))),i.createElement("form",{className:C?Mh:Wh,onSubmit:a=>{if(a.preventDefault(),(0,On.XQ)("atv_dp_cr_sub_rev",l,c,g),H)e();else if(G()){var n;const e=null==v||null===(n=v.customerSubmittedReviewContent)||void 0===n?void 0:n.reviewID,a={bodyText:R,titleText:S};t(z(v.rating,a,e),p,!1)}},"data-automation-id":"submission-modal-form","data-testid":"submission-modal-form"},!u&&W&&i.createElement("p",{className:Hh},d("DV_CR_submission_add_more")),i.createElement(T_,{text:d("DV_CR_submission_add_headline"),isOptional:!u&&W,optionalText:L}),i.createElement("input",{placeholder:d("DV_CR_submission_headline_placeholder"),className:we(qh,Gh),type:"text",name:"headline",id:"headline-input",onChange:e=>k(e.target.value),autoComplete:"off",value:S,maxLength:100,required:!H,ref:I,dir:S.length>0?"auto":""}),i.createElement(T_,{text:d("DV_CR_submission_add_written_review"),isOptional:!u&&W,optionalText:L}),i.createElement("textarea",{placeholder:d("DV_CR_submission_body_placeholder"),className:we(zh,Gh,{[Zh]:Boolean(N)}),name:"body",id:"body-input",onChange:e=>x(e.target.value),autoComplete:"off",value:R,maxLength:M.maximumCharactersLimit,required:!H,dir:R.length>0?"auto":""}),N&&i.createElement("div",{className:Jh,"data-automation-id":"review-submission-failure"},i.createElement(rn.Icon,{use:rn.IconType.ALERT_CRITICAL}),i.createElement("p",null,(e=>{const{minimumWordLimit:t,maximumWordLimit:a,minimumCharactersLimit:n,maximumCharactersLimit:r}=M;switch(e){case"maximumCharacters":return d("DV_CR_submission_max_chars",{count:`${r}`});case"minimumCharacters":return 1===n?d("DV_CR_submission_min_chars_one"):d("DV_CR_submission_min_chars",{count:`${n}`});case"maximumWords":return d("DV_CR_submission_max_words",{count:`${a}`});case"minimumWords":return 1===t?d("DV_CR_submission_min_chars_one"):d("DV_CR_submission_min_chars",{count:`${t}`});case"ratingMissing":return d("DV_CR_rating_missing");case"serviceFailure":return d("DV_CR_review_submission_failure")}})(N))),i.createElement(sr.PrimaryButton,{className:Xh,type:"submit",testID:"submission-modal-submit-button"},d("DV_CR_submission_submit"))))},C_=({openModalClickHandler:e,buttonText:t,className:a,refTag:n,testID:r,updateReviewEligibility:s,createEligibilityBanner:o,createReviewLink:l,showButtonWithFailure:c=!1})=>{const{pageType:d,subPageType:u,pageTitleId:p,requestContext:m,getString:g,refTagTitleId:h,isRetail:_}=i.useContext($.h),{reviewSubmission:f,reviewTitleId:v}=i.useContext(u_),[b,E]=i.useState("idle"),y="unsuccessful"===b?c:"inProgress"!==b;return i.createElement("div",{className:Uh},"inProgress"===b?i.createElement(Xr.Spinner,{className:Kh}):y&&i.createElement(or(),{disabled:void 0!==f.isEligible&&!f.isEligible,className:a,role:"button","aria-live":"polite",onClick:t=>{if(Boolean(m.customerID)){var a;if((0,On.XQ)(n,d,u,h),f.isEligible)if(_)l&&(null===(a=window)||void 0===a||a.location.assign(l));else e(t);else E("inProgress"),(async(e,t,a)=>{const n={context:e,titleID:t,token:a};return await tl.FetchReviewEligibility(n)})(m,v,f.reviewSubmissionToken).then((a=>{var n,r;null!=a&&a.eligibilityResponse?(E("successful"),s(a,p),a.eligibilityResponse.isEligible?_?l&&(null===(n=window)||void 0===n||n.location.assign(l)):e(t):a.eligibilityResponse.eligibilityMessage&&(o(a.eligibilityResponse.eligibilityMessage),null===(r=window)||void 0===r||r.scrollTo({left:0,top:0,behavior:"smooth"}))):E("unsuccessful")})).catch((e=>{E("unsuccessful")}))}else{var r;const e=ge(m,p,"atv_dp_cr_sign_rev","atv_dp_cr_sign_rev");null===(r=window)||void 0===r||r.location.assign(e)}},"aria-label":t,"data-automation-id":r,"data-testid":r},t),"unsuccessful"===b&&i.createElement("div",{className:Jh,"data-automation-id":"review-eligibility-failure"},i.createElement(rn.Icon,{use:rn.IconType.ALERT_CRITICAL}),i.createElement("p",null,g("DV_CR_review_submission_failure"))))},P_=(0,J.$j)(null,(e=>({submitCustomerReview:(t,a,n)=>e(c_(t,a,n)),clearSubmissionState:t=>e((e=>t=>{t({type:Pi.k.ClearSubmissionStates,payload:{pageTitleId:e}})})(t)),updateReviewEligibility:(t,a)=>e(((e,t)=>a=>{a({type:Pi.k.FetchReviewEligibility,output:e,payload:{pageTitleId:t}})})(t,a)),createSuccessBanner:()=>e(Tc({type:vs.MessageTypes.success,stringId:"DV_CR_review_submission_processing",headingStringId:"DV_CR_review_submission_success",automationId:"review-submission-success"})),createEligibilityBanner:({header:t,body:a})=>e(Tc({type:vs.MessageTypes.info,heading:t.string,bodyDVString:a,automationId:"review-eligibility-banner"}))})))((({buttonText:e,refTag:t,className:a,testID:n,createSuccessBanner:r,submitCustomerReview:s,clearSubmissionState:o,updateReviewEligibility:l,showButtonWithFailure:c,createEligibilityBanner:d,createReviewLink:u})=>{const{getString:p,pageTitleId:m,pageType:g,subPageType:h,refTagTitleId:_}=i.useContext($.h),{reviewSubmission:f,isReviewsSubmissionEnabled:v}=i.useContext(u_);if(!f||!v)return null;const b=p(null!=f&&f.customerSubmittedReview?"DV_CR_edit_review":"DV_CR_create_review");return i.createElement(Ii,{size:"m",className:Oh,modalHeader:i.createElement("p",{className:Bh},b),modalContent:({closeModal:e})=>i.createElement(I_,{closeModal:e,createSuccessBanner:r,submitCustomerReview:s}),modalId:"reviews-submission-modal",toggle:({openModalClickHandler:r})=>i.createElement(C_,{testID:n,refTag:t,buttonText:e,openModalClickHandler:r,className:a,updateReviewEligibility:l,showButtonWithFailure:c,createEligibilityBanner:d,createReviewLink:u}),onClose:()=>{(0,On.XQ)("atv_dp_cr_sub_close",g,h,_),o(m)}})})),S_=({ratingsExplanationHeader:e,ratingsExplanationText:t})=>{const[a,n]=i.useState(!1),{pageType:r,subPageType:s,refTagTitleId:o}=i.useContext($.h);return i.createElement("button",{className:Ph,onClick:()=>{a||(0,On.XQ)((0,de.i)("atv_dp_cr_rev_exp"),r,s,o),n(!a)},"data-automation-id":"ratings-explanation-expander",role:"button"},i.createElement(rn.Icon,{className:xh,use:a?rn.IconType.TOGGLE_COLLAPSE:rn.IconType.TOGGLE_EXPAND}),i.createElement("div",{className:Sh},i.createElement("p",{className:kh},e),a&&i.createElement("p",{className:Rh,"data-automation-id":"ratings-explanation-body"},t)))},k_=({ratingDisplayLabel:e,percentageDisplay:t})=>i.createElement("div",{className:wh},i.createElement("span",{className:Th},e),i.createElement("div",{className:Ih},i.createElement("span",{style:{width:t}})),i.createElement("span",{className:Dh},t)),R_=({createReviewLink:e,writeReviewText:t})=>i.createElement(or(),{className:Ch,role:"button","aria-live":"polite","aria-label":t,testID:"write-review-button",href:e},t),x_=({reviewRatingInfo:e})=>{const{starCount:t,hasHalfStar:a,averageRatingLabel:n,totalReviewCountText:r}=e;return i.createElement("div",null,i.createElement(_n.Spacer,{alignItems:_n.spacerAlignItems.center,space:_n.spacerSpacing.xs},i.createElement(Nh.StarRating,{rating:t+(a?.5:0),className:fh}),i.createElement("strong",{className:vh},n)),i.createElement("p",{className:bh},r))},N_=e=>{const{reviewsAnalysisModel:t,createReviewLink:a,reviewsHistogramStrings:n,isRetail:r,checkReviewEligibility:s}=e,{ratingsHistogram:o,reviewRatingInfo:c}=t,{oneStar:d,twoStar:u,threeStar:p,fourStar:m,fiveStar:g}=o,h=i.useRef(null),_=[g,m,p,u,d];return i.createElement("div",{className:hh,"data-automation-id":"reviews-histogram-container",ref:h},i.createElement("h1",{className:_h},n.reviewsHeader),c&&i.createElement(x_,{reviewRatingInfo:c}),i.createElement("ol",{className:Eh},_.map(((e,t)=>{const{hoverText:a,ratingDisplayLabel:n,percentageDisplay:s,url:o}=e,c={url:o,ariaLabel:n,automationId:`histogram-row-${t}`,target:r?void 0:"_blank"},d={ratingDisplayLabel:n,percentageDisplay:s};return i.createElement("li",{key:t,className:yh},a?i.createElement(Pr.Tooltip,{content:i.createElement(l.Text,{tag:"span",string:a,testID:`review-histogram-tooltip-${t}`}),size:"s",id:"histogram-tooltip-id",containerRef:h},i.createElement(ph,c,i.createElement(k_,d))):i.createElement(k_,d))}))),i.createElement(S_,n),r&&!s?i.createElement(R_,{writeReviewText:n.writeReviewText,createReviewLink:a}):i.createElement(P_,{buttonText:n.writeReviewText,refTag:(0,de.i)("atv_dp_cr_sub_open"),className:Ch,testID:"histogram-submission-modal-button",createReviewLink:a,showButtonWithFailure:!0}))},A_="_1O7K2I",O_="_28lp9F",V_="_2W8dUp",L_="_1JSxwM",W_="_2voCuO",M_="_1ZRB-9",B_="zfFfQG",U_="_2zZQbA",j_="_1IKrsj",F_="_1OmNVz",$_="GeQkE2",H_="_2kTylK",G_={};let q_;!function(e){e.Origin="Origin",e.Translated="Translated",e.Unsuccessful="Unsuccessful",e.Translating="Translating"}(q_||(q_={}));const z_=e=>Object.keys(e).reduce(((t,a)=>{const n=e[a].translatedReviewItem;var r,i;return t.reviewIdToTranslatedReview[a]={...n,status:(r=e[a].isSuccessful,i=n.isTranslationPending,r?i?q_.Translating:q_.Translated:q_.Unsuccessful)},t}),{reviewIdToTranslatedReview:{}}),Z_=(e,t,a)=>e.reduce(((e,n)=>({...e,[n]:{...a[n],status:t}})),{...a}),X_=(e=G_,t)=>{switch(t.type){case Cs.k.GetTranslatedReviews:return t.output.translatedReviews[t.payload.pageTitleId]?((e,t={},a)=>{const n=a?{}:{status:q_.Translated};return Object.keys(t).reduce(((e,a)=>{if(e[a]){const r={...e[a],reviewIdToTranslatedReview:{...e[a].reviewIdToTranslatedReview,...z_(t[a]).reviewIdToTranslatedReview},...n};e[a]={...r}}else e[a]=z_(t[a]);return e}),{...e})})(e,t.output.translatedReviews,t.payload.isSingleReview):e;case Cs.k.TranslatedReviewsFailed:return t.payload.isSingleReview?((e,t,a)=>{var n;return{...e,[a]:{...e[a],reviewIdToTranslatedReview:{...Z_(t,q_.Unsuccessful,null===(n=e[a])||void 0===n?void 0:n.reviewIdToTranslatedReview)}}}})(e,t.payload.failedReviewIDs,t.payload.pageTitleId):((e,t)=>{var a;const n=null===(a=e[t])||void 0===a?void 0:a.reviewIdToTranslatedReview;return{...e,[t]:{status:q_.Unsuccessful,reviewIdToTranslatedReview:{...Z_(Object.keys(n),q_.Origin,n)}}}})(e,t.payload.pageTitleId);case Cs.k.UpdatedBatchTranslationStatus:const a=t.payload.pageTitleId;return{...e,[a]:{...e[a],status:t.payload.status}};case Cs.k.ChangeTranslatedReviewStatus:const{reviewIDs:n,pageTitleId:r,status:i}=t.payload;return((e,t,a,n)=>t.reduce(((e,t)=>{var r;return e[a]?e[a]={...e[a],reviewIdToTranslatedReview:{...e[a].reviewIdToTranslatedReview,[t]:{...null===(r=e[a].reviewIdToTranslatedReview)||void 0===r?void 0:r[t],status:n}}}:e[a]={reviewIdToTranslatedReview:{[t]:{status:n}}},e}),{...e}))(e,n,r,i);default:return e}},Q_=(e,t,a)=>({type:Pi.k.ChangeTranslatedReviewStatus,payload:{pageTitleId:e,reviewIDs:t,status:a}}),Y_=(e,t,a,n)=>({type:Pi.k.GetTranslatedReviews,input:t,output:Bo(a,e),payload:{pageTitleId:a,isSingleReview:n}}),J_=(e,t,a,n,r,i,s=0)=>{if(e){const l=(o=e.translatedReviews,Object.keys(o).filter((e=>{var t;return null===(t=o[e].translatedReviewItem)||void 0===t?void 0:t.isTranslationPending})));if(s<2){return((e,t,a,n,r,i=0)=>{e.reviewsToTranslate.length>0&&setTimeout((()=>{K_(e,t,a,i+1)(n,r)}),1e3)})({...t,reviewsToTranslate:t.reviewsToTranslate.filter((e=>l.includes(e.reviewID)))},a,n,r,i,s+1),Y_(e,t,a,n)}{l.length>0&&r(Q_(a,l,q_.Unsuccessful));const i=Object.keys(e.translatedReviews).filter((e=>!l.includes(e))).reduce(((t,a)=>({...t,[a]:e.translatedReviews[a]})),{}),s={...e,translatedReviews:i};return Y_(s,t,a,n)}}return((e,t,a)=>({type:Pi.k.TranslatedReviewsFailed,payload:{isSingleReview:a,pageTitleId:t,failedReviewIDs:e.reviewsToTranslate.map((e=>e.reviewID))}}))(t,a,n);var o},K_=(e,t,a,n=0)=>(r,i)=>{((e,t)=>ul({input:e,operation:Ko.GetTranslatedReviews},ll,t))(e,(s=>J_(s,e,t,a,r,i,n)))(r,i)},ef=(0,We.P)(Me.mZ.translatedReviews,(e=>null==e?void 0:e.reviewIdToTranslatedReview)),tf=({requestContext:e,onSuccess:t,reviewID:a,reviewItemStrings:n,titleID:r,buttonLabel:s,testID:o,interactionType:l,interactionValue:c,token:d})=>{const{pageType:u,subPageType:p,refTagTitleId:m}=i.useContext($.h),[g,h]=i.useState("idle"),{inProgressLabel:_,successfulMessage:f,unsuccessfulMessage:v}=n;i.useEffect((()=>{h("idle")}),[a]);const b=()=>{if(e.isRecognizedCustomer)h("inProgress"),(0,On.XQ)((0,de.i)("Helpful"===l?"atv_dp_cr_helpful":"atv_dp_cr_rep"),u,p,m),async function(e,t,a,n,r,i){const s={context:e,titleID:t,reviewID:a,interactionType:n,value:r,token:i};return await tl.PostReviewInteraction(s)}(e.rawContext,r,a,l,c,d).then((e=>{h(e.isSuccessful?"successful":"unsuccessful"),e.isSuccessful&&t&&t()})).catch((e=>{h("unsuccessful")}));else{var n;const t=ge(e.rawContext,r,"atv_dp_cr_sign_vote","atv_dp_cr_sign_vote_dp");null===(n=window)||void 0===n||n.location.assign(t)}};switch(g){case"inProgress":return i.createElement("p",{className:H_},_);case"successful":return i.createElement("div",{className:U_,"data-automation-id":"review-interaction-success"},i.createElement(rn.Icon,{use:rn.IconType.ALERT_SUCCESS}),i.createElement("p",null,f));case"unsuccessful":return i.createElement("div",{className:U_,"data-automation-id":"review-interaction-failure"},i.createElement(rn.Icon,{use:rn.IconType.ALERT_CRITICAL}),i.createElement("p",null,v));default:return i.createElement(or(),{className:B_,role:"button","aria-live":"polite","aria-label":s,testID:o,textAlign:"center",onClick:b},s)}},af=({reviewItemStrings:e,reviewListIndex:t,reviewInteractionButtonProps:a})=>{const{reportAbuseMessage:n,reportAbuseText:r}=e,{pageType:s,subPageType:o}=i.useContext($.h);return i.createElement(Ii,{size:"xs",modalHeader:i.createElement("p",{className:V_},r),modalContent:({closeModal:e})=>(e=>{const t={...a,onSuccess:()=>setTimeout(e,2e3)};return i.createElement("div",{className:L_},i.createElement("p",{className:W_},n),i.createElement(tf,t))})(e),modalId:"report-abuse-modal",toggle:({openModalClickHandler:e})=>i.createElement(On.Jd,{refTag:(0,de.i)("atv_dp_cr_rep_open"),className:O_,pageType:s,subPageType:o},i.createElement("button",{id:"reportAbuseTrigger",className:A_,"aria-label":r,"data-automation-id":`report-abuse-link-${t}`,onClick:e},r))})},nf=(0,J.$j)((e=>({reviewIdToTranslatedReview:ef(e),isFirestormReviewsEnabled:Ke(e),isReviewsTranslationEnabled:Je(e)})),(e=>({changeTranslatedReviewStatus:(t,a,n)=>e(Q_(t,a,n)),fetchTranslatedReviews:(t,a)=>e(K_(t,a,!0))})))((({reviewListIndex:e,titleID:t,reviewID:a,requestContext:n,translationToken:r,reviewMarketplace:s,versionNumber:o,reviewLanguage:l,localeLanguage:c,reviewIdToTranslatedReview:d,reviewItemStrings:u,isFirestormReviewsEnabled:p,isReviewsTranslationEnabled:m,changeTranslatedReviewStatus:g,fetchTranslatedReviews:h})=>{var _;const{getString:f,pageType:v,subPageType:b,refTagTitleId:E}=i.useContext($.h);if(!p||!m||l==c)return null;const{showOriginalReviewLabel:y,translationErrorMessage:w,translatingMessage:T}=u,D=f("DV_CR_translate_single_review",{targetLanguage:c}),I=()=>{var e;(0,On.XQ)("atv_dp_cr_trans_single",v,b,E);if(null==d||null===(e=d[a])||void 0===e?void 0:e.translation)g(t,[a],q_.Translated);else{g(t,[a],q_.Translating);const e={token:r,reviewsToTranslate:[{reviewID:a,reviewMarketplaceId:s,versionNumber:o}],context:n.rawContext};h(e,t)}};switch(null==d||null===(_=d[a])||void 0===_?void 0:_.status){case q_.Translated:const n=f("DV_CR_translated_review",{originalLanguage:d[a].translation.originLanguage});return i.createElement("div",{className:j_},i.createElement("span",{className:$_},n),i.createElement("button",{id:"showOriginReview",className:A_,"aria-label":y,"data-automation-id":`show-origin-review-${e}`,onClick:()=>{(0,On.XQ)("atv_dp_cr_show_ori_single",v,b,E),g(t,[a],q_.Origin)}},y));case q_.Unsuccessful:return i.createElement("div",{className:Te()(j_,F_),"data-automation-id":"review-translation-unsuccessful"},i.createElement(rn.Icon,{use:rn.IconType.ALERT_CRITICAL}),i.createElement("p",null,w));case q_.Translating:return i.createElement("div",{className:j_},i.createElement("span",null,T));default:return i.createElement("div",{className:j_},i.createElement("button",{id:"getReviewTranslation",className:A_,"aria-label":D,"data-automation-id":`review-translation-link-${e}`,onClick:I},D))}})),rf=({reviewItemStrings:e,requestContext:t,reviewID:a,reviewListIndex:n,titleID:r,token:s,translationToken:o,reviewLanguage:l,reviewMarketplace:c,versionNumber:d,localeLanguage:u,enableInteractionActions:p})=>{const m=(n,i,o,l,c)=>({reviewItemStrings:e,requestContext:t,titleID:r,reviewID:a,buttonLabel:n,onSuccess:c,testID:i,interactionType:o,interactionValue:l,token:s}),g=m(e.helpfulButtonText,`helpful-button-${n}`,"Helpful",1),h={reviewItemStrings:e,reviewListIndex:n,reviewInteractionButtonProps:m(e.confirmLabel,`confirm-report-abuse-${n}`,"Inappropriate",1)},_={reviewItemStrings:e,reviewListIndex:n,requestContext:t,titleID:r,reviewID:a,translationToken:o,reviewLanguage:l,reviewMarketplace:c,versionNumber:d,localeLanguage:u};return i.createElement("div",{className:M_},p&&i.createElement(tf,g),p&&i.createElement(af,h),i.createElement(nf,_))},sf="_11vbpI",of="_26lnXE",lf="_3tuFnQ",cf="_1ax4B5",df="_3prPK1",uf="_2xtnTD",pf="_3fUewt",mf="_1aDu4R",gf="_1_nj5Y";let hf;!function(e){e.Idle="Idle",e.InProgress="InProgress",e.Successful="Successful",e.Unsuccessful="unsuccessful"}(hf||(hf={}));const _f=(0,J.$j)((e=>({requestContext:At(e)})),(e=>({deleteCustomerReview:t=>e((e=>t=>{t({type:Pi.k.DeleteCustomerReview,payload:{pageTitleId:e}})})(t))})))((({closeModal:e,deleteCustomerReview:t,requestContext:a})=>{const{getString:n,pageType:r,subPageType:s,pageTitleId:o,refTagTitleId:l}=i.useContext($.h),{reviewSubmission:c,reviewTitleId:d}=i.useContext(u_),[u,p]=[c.customerSubmittedReview.customerSubmittedReviewContent.reviewID,c.reviewSubmissionToken],[m,g]=i.useState(hf.Idle),h=n("DV_common_yes"),_=n("DV_common_no"),f=()=>{g(hf.InProgress),(0,On.XQ)((0,de.i)("atv_dp_cr_del_rev"),r,s,l),async function(e,t,a,n){const r={context:e,titleID:t,reviewID:a,token:n};return await tl.DeleteCustomerReview(r)}(a.rawContext,d,u,p).then((e=>{g(e.isSuccessful?hf.Successful:hf.Unsuccessful),e.isSuccessful&&setTimeout((()=>t(o)),2e3)})).catch((e=>{g(hf.Unsuccessful)}))};switch(m){case hf.InProgress:return i.createElement("p",{className:mf},n("DV_CR_review_deleting"));case hf.Successful:return i.createElement("div",{className:gf,"data-automation-id":"review-deletion-success"},i.createElement(rn.Icon,{use:rn.IconType.ALERT_SUCCESS}),i.createElement("p",null,n("DV_CR_review_deleted")));case hf.Unsuccessful:return i.createElement("div",{className:gf,"data-automation-id":"review-deletion-failure"},i.createElement(rn.Icon,{use:rn.IconType.ALERT_CRITICAL}),i.createElement("p",null,n("DV_CR_review_submission_failure")));default:return i.createElement(i.Fragment,null,i.createElement("p",{className:uf},n("DV_CR_delete_review_warning")),i.createElement("div",{className:lf},i.createElement(or(),{className:cf,role:"button","aria-live":"polite","aria-label":h,testID:"delete-review-yes-button",textAlign:"center",onClick:f},h),i.createElement(or(),{className:cf,role:"button","aria-live":"polite","aria-label":_,testID:"delete-review-no-button",textAlign:"center",onClick:e},_)))}})),ff=()=>{const{getString:e,pageType:t,subPageType:a,refTagTitleId:n}=i.useContext($.h),r=e("DV_common_delete");return i.createElement(Ii,{size:"xs",modalHeader:i.createElement("p",{className:df},e("DV_CR_delete_review")),modalContent:({closeModal:e})=>(e=>i.createElement("div",{className:pf},i.createElement(_f,{closeModal:e})))(e),modalId:"delete-review-modal",toggle:({openModalClickHandler:e})=>i.createElement(On.Jd,{refTag:(0,de.i)("atv_dp_cr_delete_review_open"),pageType:t,subPageType:a},i.createElement(or(),{className:of,role:"button","aria-live":"polite","aria-label":r,testID:"delete-review-button",textAlign:"center",onClick:e},r)),onClose:()=>(0,On.XQ)("atv_dp_cr_delete_review_close",t,a,n)})},vf=()=>{const{getString:e}=i.useContext($.h);return i.createElement("div",{className:sf},i.createElement(P_,{buttonText:e("DV_common_edit"),refTag:(0,de.i)("atv_dp_cr_edit"),className:of,testID:"edit-review-button",showButtonWithFailure:!1}),i.createElement(ff,null))},bf=({width:e,height:t,className:a})=>i.createElement("svg",{viewBox:`0 0 ${e} ${t}`,xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2,width:e,height:t,className:a},i.createElement("path",{fill:"none",d:"M0.316 0.123H219.316V219.123H0.316z"}),i.createElement("clipPath",{id:"a"},i.createElement("path",{d:"M0.316 0.123H219.316V219.123H0.316z"})),i.createElement("g",{clipPath:"url(#a)"},i.createElement("circle",{cx:110.316,cy:117.993,r:93.61,fill:"url(#_Linear2)"}),i.createElement("path",{d:"M40.927 110.193a2.463 2.463 0 011.571 1.132l14.997 24.881 29.112-2.848a2.464 2.464 0 012.088 4.083L69.44 159.264 81.085 185.8a2.463 2.463 0 01-3.213 3.26l-26.926-11.35-21.96 19.277a2.464 2.464 0 01-4.079-2.078l2.663-28.856-25.164-14.621a2.464 2.464 0 01.691-4.532l28.52-6.498 6.366-28.345a2.464 2.464 0 012.944-1.864z",fill:"url(#_Linear3)"}),i.createElement("path",{d:"M182.027 110.59c.572.355.973.927 1.112 1.585l5.994 28.426 28.433 6.871a2.464 2.464 0 01.631 4.542l-25.353 14.289 2.284 28.888a2.465 2.465 0 01-4.106 2.025l-21.705-19.563-27.073 10.996a2.465 2.465 0 01-3.17-3.303l11.991-26.381-18.966-22.073a2.464 2.464 0 012.141-4.055l29.073 3.229 15.321-24.682a2.464 2.464 0 013.393-.794z",fill:"url(#_Linear4)"}),i.createElement("path",{d:"M112.239 40.341a3.928 3.928 0 012.169 2.194L131.414 85.6l46.51 3.207a3.927 3.927 0 012.204 6.967l-36.022 29.22 11.299 44.782a3.928 3.928 0 01-5.911 4.277l-39.326-24.945-39.603 24.504a3.927 3.927 0 01-5.863-4.343l11.8-44.652-35.693-29.621a3.926 3.926 0 012.281-6.943l46.543-2.687 17.486-42.872a3.928 3.928 0 015.12-2.153z",fill:"url(#_Linear5)"})),i.createElement("defs",null,i.createElement("linearGradient",{id:"_Linear2",x1:0,y1:0,x2:1,y2:0,gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(90 42.603 68.34) scale(187.794)"},i.createElement("stop",{offset:0,stopColor:"#050709"}),i.createElement("stop",{offset:1,stopColor:"#0f171e"})),i.createElement("linearGradient",{id:"_Linear3",x1:0,y1:0,x2:1,y2:0,gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(0 142.46 -142.46 0 110.316 84.83)"},i.createElement("stop",{offset:0,stopColor:"#2a4761"}),i.createElement("stop",{offset:.56,stopColor:"#1d3041"}),i.createElement("stop",{offset:1,stopColor:"#182633"})),i.createElement("linearGradient",{id:"_Linear4",x1:0,y1:0,x2:1,y2:0,gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(0 142.46 -142.46 0 110.316 84.83)"},i.createElement("stop",{offset:0,stopColor:"#2a4761"}),i.createElement("stop",{offset:.56,stopColor:"#1d3041"}),i.createElement("stop",{offset:1,stopColor:"#182633"})),i.createElement("linearGradient",{id:"_Linear5",x1:0,y1:0,x2:1,y2:0,gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(66.704 23.26 59.668) scale(226.6303)"},i.createElement("stop",{offset:0,stopColor:"#19b8ef"}),i.createElement("stop",{offset:1,stopColor:"#017ca6"}))));function Ef(){return Ef=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ef.apply(this,arguments)}const yf=["byHelpfulVotesDescending","bySubmissionDateDescending"],wf={byHelpfulVotesDescending:"atv_dp_cr_srt_mh",bySubmissionDateDescending:"atv_dp_cr_srt_mr"},Tf={byHelpfulVotesDescending:"DV_CR_sorting_top_reviews",bySubmissionDateDescending:"DV_CR_sorting_most_recent"},Df=({rating:e,reviewTitle:t,hoverText:a,testId:n,containerRef:r})=>i.createElement(_n.Spacer,{className:Qg,alignItems:_n.spacerAlignItems.center,space:_n.spacerSpacing.xs},i.createElement(Pr.Tooltip,{content:i.createElement(l.Text,{tag:"span",string:a,testID:n}),size:"s",containerRef:r},i.createElement(Nh.StarRating,{rating:e,className:Yg})),i.createElement("strong",{dir:"auto"},t)),If=(0,J.$j)(null,(e=>({changeTranslatedReviewStatus:(t,a,n)=>e(Q_(t,a,n)),fetchTranslatedReviews:(t,a)=>e(K_(t,a,!1)),updatedBatchTranslationStatus:(t,a)=>e(((e,t)=>({type:Pi.k.UpdatedBatchTranslationStatus,payload:{pageTitleId:e,status:t}}))(t,a))})))((({reviewIdToReview:e,reviewIdToTranslatedReview:t,reviewItemStrings:a,pageTitleId:n,requestContext:r,localeLanguage:s,batchTranslationStatus:o,changeTranslatedReviewStatus:l,fetchTranslatedReviews:c,updatedBatchTranslationStatus:d})=>{const{getString:u,pageType:p,subPageType:m,refTagTitleId:g}=i.useContext($.h),{showOriginalReviewLabel:h,translationErrorMessage:_,translatingMessage:f}=a,v=Object.keys(e),b=u("DV_CR_translate_all_reviews",{targetLanguage:s}),E=()=>{(0,On.XQ)("atv_dp_cr_trans_all",p,m,g);const a=v.filter((e=>{var a;return Boolean(null==t||null===(a=t[e])||void 0===a?void 0:a.translation)})),i=v.filter((e=>{var a;return!Boolean(null==t||null===(a=t[e])||void 0===a?void 0:a.translation)}));if(0==i.length)d(n,q_.Translated),l(n,a,q_.Translated);else{d(n,q_.Translating),l(n,a,q_.Translated),l(n,i,q_.Translating);const t=i.map((t=>({reviewID:t,reviewMarketplaceId:e[t].reviewMarketplaceID,versionNumber:e[t].versionNumber}))),s={token:e[i[0]].getTranslationsToken,reviewsToTranslate:t,context:r};c(s,n)}};switch(o){case q_.Translated:return i.createElement("div",{className:dh},i.createElement("button",{id:"showOriginalReviews","aria-label":h,"data-automation-id":"show-origin-reviews",onClick:()=>{(0,On.XQ)("atv_dp_cr_show_ori_all",p,m,g),d(n,q_.Origin),l(n,v,q_.Origin)}},h));case q_.Unsuccessful:return i.createElement("div",{className:dh,"data-automation-id":"reviews-translation-unsuccessful"},i.createElement(rn.Icon,{use:rn.IconType.ALERT_CRITICAL}),i.createElement("p",null,_));case q_.Translating:return i.createElement("div",{className:dh},i.createElement("span",null,f));default:return i.createElement("div",{className:dh},i.createElement("button",{id:"getReviewsTranslation","aria-label":b,"data-automation-id":"reviews-translation-link",onClick:E},b))}})),Cf=({submissionRecord:e,ariaLabel:t,isRetail:a,automationId:n,pendingApprovalLabel:r,isPendingApproval:s})=>{const{customerProfile:o,submittedOnText:l}=e,c={url:o.profileUrl,ariaLabel:t,automationId:n,className:ih,target:a?void 0:"_blank"};return i.createElement(_n.Spacer,{className:Qg,alignItems:_n.spacerAlignItems.center,space:_n.spacerSpacing.xs},i.createElement(ph,c,i.createElement("img",{className:th,"aria-label":t,loading:"lazy",src:o.avatarUrl,alt:""}),i.createElement("span",{className:o.profileUrl?ah:nh},o.customerName)),i.createElement("span",{className:rh},l),s&&i.createElement("span",{className:uh},r))},Pf=({htmlContent:e,uniqueId:t})=>i.createElement(Ga.Expander,{numOfLines:4,uniqueId:t,className:Jg},i.createElement("div",{dangerouslySetInnerHTML:{__html:e},dir:"auto"})),Sf=({fallbackMessage:e,buttonText:t})=>i.createElement("div",{className:jg},i.createElement(bf,{width:220,height:220,className:Fg}),i.createElement("p",{className:ch},e),i.createElement(P_,{buttonText:t,refTag:(0,de.i)("atv_dp_cr_sub_open_fb"),className:lh,testID:"fallback-submission-modal-button",showButtonWithFailure:!0})),kf=({reviewListIndex:e,reviewModel:t,reviewItemStrings:a,pageTitleId:n,requestContext:r,isInternational:s,localeLanguage:o,translatedReviewModel:l})=>{const{reviewContent:c,helpfulVotes:d}=t,u=i.useRef(null),p=t.submissionRecord.customerProfile.isCurrentCustomer,m={reviewItemStrings:a,reviewListIndex:e,requestContext:r,titleID:n,reviewID:t.reviewID,token:t.postReviewInteractionToken,translationToken:t.getTranslationsToken,reviewLanguage:t.reviewLanguage,reviewMarketplace:t.reviewMarketplaceID,versionNumber:t.versionNumber,localeLanguage:o,enableInteractionActions:!p&&!s},g=l&&l.status,h=l&&l.translation,_=g===q_.Translated&&h?h.textTranslation:c,f=g===q_.Translated&&h?h.titleTranslation:t.reviewTitle;return i.createElement("div",{key:e,className:Zg,"data-automation-id":`review-item-${e}`,ref:u},i.createElement(Cf,{submissionRecord:t.submissionRecord,ariaLabel:a.profileAriaLabel,automationId:`customer-profile-link-${e}`,isRetail:r.isRetail}),i.createElement(Df,{rating:t.rating,reviewTitle:f,hoverText:t.hoverText,testId:`review-rating-tooltip-${e}`,containerRef:u}),t.isVerifiedPurchase&&i.createElement("span",{className:Kg},a.verifiedPurchaseLabel),i.createElement(Pf,{htmlContent:_,uniqueId:`review-expander-${e}`}),d.helpfulVotesText&&i.createElement("span",{className:eh},d.helpfulVotesText),i.createElement(rf,m))},Rf=({submittedReview:e,reviewItemStrings:t,requestContext:a,isFirestormReviewsEnabled:n,isReviewsSubmissionEnabled:r})=>{const s=i.useRef(null);if(!n||null==e||!e.customerSubmittedReviewContent)return null;const{rating:o,isVerifiedPurchase:l,isUnprocessed:c}=e,{reviewContent:d,reviewTitle:u,reviewID:p,hoverText:m,submissionRecord:g,helpfulVotes:h}=null==e?void 0:e.customerSubmittedReviewContent;return i.createElement("div",{className:we(Zg,Xg),"data-automation-id":"user-submitted-review",ref:s},i.createElement(Cf,{submissionRecord:g,ariaLabel:t.profileAriaLabel,isRetail:a.isRetail,automationId:"current-customer-profile-link",isPendingApproval:c,pendingApprovalLabel:t.pendingApprovalLabel}),i.createElement(Df,{rating:o,reviewTitle:u,hoverText:m,testId:"current-customer-review-rating-tooltip",containerRef:s}),l&&i.createElement("span",{className:Kg},t.verifiedPurchaseLabel),i.createElement(Pf,{htmlContent:d,uniqueId:`review-expander-${p}`}),h.helpfulVotesText&&i.createElement("span",{className:eh},h.helpfulVotesText),r&&i.createElement(vf,null))},xf=({reviewIds:e,isInternational:t,reviewIdToReview:a,reviewItemStrings:n,pageTitleId:r,requestContext:s,localeLanguage:o,reviewIdToTranslatedReview:l})=>i.createElement(i.Fragment,null,e.map(((e,c)=>{const d=a[e],u=null==l?void 0:l[e];if(!d||d.submissionRecord.customerProfile.isCurrentCustomer)return null;const p={reviewModel:d,reviewListIndex:c,reviewItemStrings:n,pageTitleId:r,requestContext:s,isInternational:t,localeLanguage:o,translatedReviewModel:u};return i.createElement(kf,Ef({},p,{key:c}))}))),Nf=(0,J.$j)((e=>({reviews:Me.mZ.reviews(e),translatedReviews:Me.mZ.translatedReviews(e),requestContext:At(e),pageTitleId:e.pageTitleId,isFirestormReviewsEnabled:Ke(e),isReviewsTranslationEnabled:Je(e),maybeDetailFragment:Me.mZ.moreDetails(e),reviewSubmission:Me.mZ.reviewSubmission(e),isReviewsSubmissionEnabled:tt(e),checkReviewEligibility:Ze(e)})),(e=>({fetchReviews:(t,a,n)=>e(ol(t,a,n))})))((({reviews:e,requestContext:t,pageTitleId:a,isFirestormReviewsEnabled:n,maybeDetailFragment:r,isReviewsTranslationEnabled:s,translatedReviews:o,fetchReviews:l,reviewSubmission:c,isReviewsSubmissionEnabled:d,checkReviewEligibility:u})=>{var p,m;const{getString:g,pageType:h,subPageType:_,refTagTitleId:f}=i.useContext($.h),[v,b]=i.useState($s);if(!e)return null;const E=null==o?void 0:o.reviewIdToTranslatedReview,y=null==o?void 0:o.status,{reviewIdToReview:w,reviewsOrdering:T,internationalReviewsOrdering:D,localeLanguage:I,reviewTitleId:C}=e,P=Hs(v),S=(T[P]||[]).filter((e=>!w[e].submissionRecord.customerProfile.isCurrentCustomer)),k=Boolean(null===(p=c.customerSubmittedReview)||void 0===p?void 0:p.customerSubmittedReviewContent),R=g(t.isRetail?"DV_CR_write_review_label":"DV_CR_write_review_label_other"),x={reviewsHeader:g("DV_CR_reviews_header"),ratingsExplanationHeader:g("DV_CR_reviews_explanation_header"),ratingsExplanationText:g("DV_CR_reviews_explanation_text"),writeReviewText:R},N={helpfulButtonText:g("DV_CR_helpful_button_label"),reportAbuseText:g("DV_CR_report_abuse_label"),reportAbuseMessage:g("DV_CR_report_abuse_message",{site:(0,ld.c3)(t.rawContext.marketplaceID)}),profileAriaLabel:g("DV_CR_profile_aria_label"),successfulMessage:g("DV_CR_thank_you_feedback"),unsuccessfulMessage:g("DV_CR_vote_unsuccessful"),confirmLabel:g("DV_CR_confirm_label"),inProgressLabel:g("DV_CR_sending_feedback"),verifiedPurchaseLabel:g("DV_CR_verified_purchase"),showOriginalReviewLabel:g("DV_CR_show_original_review"),translationErrorMessage:g("DV_CR_translation_error"),translatingMessage:g("DV_CR_translating_review"),pendingApprovalLabel:g("DV_CR_approval_pending")},A={reviewsAnalysisModel:e.reviewsAnalysisModel,createReviewLink:e.createReviewLink,isRetail:t.isRetail,reviewsHistogramStrings:x,checkReviewEligibility:u},O=!(0,Z.xb)(S)||v!==$s,V=null===(m=e.reviewsAnalysisModel)||void 0===m?void 0:m.reviewRatingInfo,L=V?g("DV_CR_fallback_with_ratings",{ratingCount:`${V.totalReviewCount}`}):g("DV_CR_fallback_no_ratings"),W=g(V?"DV_CR_first_to_review":"DV_CR_first_to_rate");if((0,Z.xb)(D)&&!O)return i.createElement(u_.Provider,{value:{reviewSubmission:c,maybeDetailFragment:r,isReviewsSubmissionEnabled:d,reviewTitleId:C}},i.createElement(Ha.Container,{className:we(be,Bg),testID:jf},i.createElement(N_,A),i.createElement("div",{className:Ug},i.createElement(Rf,{submittedReview:c.customerSubmittedReview,reviewItemStrings:N,requestContext:t,isFirestormReviewsEnabled:n,isReviewsSubmissionEnabled:d}),n?!k&&i.createElement(Sf,{buttonText:W,fallbackMessage:L}):i.createElement("div",{id:jf,className:jg},i.createElement("p",{className:$g},L)))));const M=g(Tf[v]),B=t.isRetail?g((()=>{switch(t.rawContext.marketplaceID){case ld.HZ.UK:return"UK_DV_CR_sorting_header";case ld.HZ.DE:return"DE_DV_CR_sorting_header";case ld.HZ.JP:return"JP_DV_CR_sorting_header";default:return"US_DV_CR_sorting_header"}})(),{sortingType:M}):M,U=e=>()=>{const n=Hs(e);T[n]||l(t.rawContext,a,e),e!==v&&(0,On.XQ)((0,de.i)(wf[e]),h,_,f),b(e)},j=yf.map((e=>{const t=e===v,a=g(Tf[e]),n=`dropList-option-${e}`;return{id:n,name:e,text:i.createElement("span",{className:we({[zg]:t})},a),isHighlighted:t,onClick:U(e),ariaLabel:a,testID:n}})),F=()=>Object.keys(w).some((e=>w[e].reviewLanguage!=I))&&s&&n?i.createElement(If,{reviewIdToReview:w,pageTitleId:a,requestContext:t.rawContext,reviewIdToTranslatedReview:E,reviewItemStrings:N,localeLanguage:I,batchTranslationStatus:y}):null,H=()=>i.createElement(i.Fragment,null,i.createElement("div",{className:qg},i.createElement("span",null,`${g("DV_CR_sorted_by")}:`),i.createElement(Cc,{links:j,customDropListID:"reviews-sorting-droplist",isCustomTrigger:!0,right:!1,customText:M})),i.createElement("p",{className:Hg},B),i.createElement(F,null),i.createElement(xf,{reviewIds:S,reviewIdToReview:w,requestContext:t,isInternational:!1,pageTitleId:a,reviewItemStrings:N,localeLanguage:I,reviewIdToTranslatedReview:E}),!T[P]&&i.createElement(Xr.Spinner,{className:oh}),i.createElement(Rn.Link,{className:sh,href:e.allReviewsLink,testID:"see-all-reviews-link",target:t.isRetail?void 0:"_blank"},i.createElement(z,{stringID:"DV_CR_see_all_reviews"}),i.createElement(gh(),null)));return i.createElement(u_.Provider,{value:{reviewSubmission:c,maybeDetailFragment:r,isReviewsSubmissionEnabled:d,reviewTitleId:C}},i.createElement(Ha.Container,{className:we(be,Bg),testID:jf},i.createElement(N_,A),i.createElement("div",{id:jf,className:Ug},i.createElement(Rf,{submittedReview:c.customerSubmittedReview,reviewItemStrings:N,requestContext:t,isFirestormReviewsEnabled:n,isReviewsSubmissionEnabled:d}),O?i.createElement(H,null):!k&&i.createElement(Sf,{buttonText:W,fallbackMessage:L}),D&&i.createElement(i.Fragment,null,i.createElement("p",{className:Gg},i.createElement(z,{stringID:"DV_CR_other_countries_header"})),!O&&i.createElement(F,null),i.createElement(xf,{reviewIds:D,reviewIdToReview:w,requestContext:t,isInternational:!0,pageTitleId:a,reviewItemStrings:N,localeLanguage:I,reviewIdToTranslatedReview:E})))))})),Af=({tabId:e,isVisible:t,isLazy:a,children:n})=>{const[r,s]=i.useState(t||!a);return t&&!r&&s(!0),i.createElement("div",{className:Ln,id:`tab-content-${e}`},r&&n)};function Of(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let Vf;!function(e){e.EPISODES_TAB_ID="episodes",e.EXPLORE_TAB_ID="explore",e.RELATED_TAB_ID="related",e.DETAILS_TAB_ID="details",e.EXTRAS_TAB_ID="extras"}(Vf||(Vf={}));const Lf=()=>{var e;return null===(e=document)||void 0===e?void 0:e.getElementById(`tab-selector-${Vf.DETAILS_TAB_ID}`)},Wf=[Vf.EPISODES_TAB_ID,Vf.EXPLORE_TAB_ID,Vf.EXTRAS_TAB_ID,Vf.RELATED_TAB_ID,Vf.DETAILS_TAB_ID];class Mf extends i.Component{constructor(e){var t,a;super(e),Of(this,"navHeight",void 0),Of(this,"navIo",void 0),Of(this,"navRef",void 0),Of(this,"tabEnabledMap",(({showTabCollections:e,showCarousels:t,showOtherFormats:a,showCastAndCrew:n,showProductDetails:r,showExploreTab:i,showReviews:s,showExtras:o})=>({[Vf.EPISODES_TAB_ID]:e,[Vf.EXPLORE_TAB_ID]:i,[Vf.EXTRAS_TAB_ID]:o,[Vf.RELATED_TAB_ID]:t||n,[Vf.DETAILS_TAB_ID]:r||a||s}))(this.props)),Of(this,"queryTabId",(e=>{const t=e.tab?e.tab[0]:void 0;return Object.values(Vf).includes(t)?t:void 0})(this.props.queryParameters)),Of(this,"defaultTabId",(t=this.tabEnabledMap,(a=this.queryTabId)&&t[a]?a:t[Vf.EXPLORE_TAB_ID]?Vf.EXPLORE_TAB_ID:Wf.find((e=>t[e]))||"")),Of(this,"defaultTab",`tab-content-${this.defaultTabId}`),this.navRef=i.createRef(),this.state={selectedTab:this.defaultTab,navIsActive:!1,pvNavSticky:!1}}componentDidMount(){var e,t;const a=document.getElementById("pv-nav"),n=this.props.isPhablet?0:60;this.navHeight=a&&a.getBoundingClientRect()&&a.getBoundingClientRect().height||n,this.navIo=new IntersectionObserver((([e])=>{const t=Boolean(a)||!this.props.isPhablet&&(()=>{const e=document.querySelector(".av-retail-m-nav-container");return e&&void 0!==e&&void 0!==e.dataset&&"true"===e.dataset.stickinessready})();this.setState({navIsActive:!e.isIntersecting,pvNavSticky:t})}),{rootMargin:`-${this.navHeight}px`,threshold:1}),null!=this&&null!==(e=this.navIo)&&void 0!==e&&e.observe&&null!=this&&null!==(t=this.navRef)&&void 0!==t&&t.current&&this.navIo.observe(this.navRef.current),this.navRef&&this.navRef.current&&this.queryTabId&&this.tabEnabledMap[this.queryTabId]&&this.moveToSelected()}componentWillUnmount(){var e,t;null!=this&&null!==(e=this.navIo)&&void 0!==e&&e.unobserve&&null!=this&&null!==(t=this.navRef)&&void 0!==t&&t.current&&this.navIo.unobserve(this.navRef.current)}moveToSelected(){const e=this.navRef.current.getBoundingClientRect().top-this.navHeight+5;window.scrollBy({top:Math.ceil(e),behavior:"smooth"})}setSelectedAndScroll(e){const t=`tab-content-${e}`;this.moveToSelected(),this.setState({selectedTab:t})}getTabs(){const e="hor",t=this.tabEnabledMap[Vf.EPISODES_TAB_ID]&&{header:i.createElement(z,{stringID:"DV_DP_TAB_episodes"}),content:i.createElement(Fp,null),refTag:(0,de.i)("atv_dp_btf_tab_{tabType}_ep",{tabType:e}),automationId:"btf-episodes-tab",tabId:Vf.EPISODES_TAB_ID},a=this.tabEnabledMap[Vf.EXPLORE_TAB_ID]&&{header:i.createElement(z,{stringID:"DV_DP_TAB_explore"}),content:i.createElement(Lg,null),refTag:(0,de.i)("atv_dp_btf_tab_{tabType}_exp",{tabType:e}),automationId:"btf-explore-tab",tabId:Vf.EXPLORE_TAB_ID},n=this.tabEnabledMap[Vf.RELATED_TAB_ID]&&{header:i.createElement(z,{stringID:"DV_DP_TAB_related"}),content:i.createElement("div",{className:we({[jn]:!this.props.isRetail})},i.createElement(qp,null),i.createElement(Im,null)),refTag:(0,de.i)("atv_dp_btf_tab_{tabType}_rel",{tabType:e}),automationId:"btf-related-tab",tabId:Vf.RELATED_TAB_ID},r=this.tabEnabledMap[Vf.DETAILS_TAB_ID]&&{header:i.createElement(z,{stringID:"DV_DP_TAB_details"}),content:i.createElement(i.Fragment,null,i.createElement(ng,null),i.createElement(Qp,null),this.props.showReviews&&i.createElement(Nf,null)),refTag:(0,de.i)("atv_dp_btf_tab_{tabType}_det",{tabType:e}),automationId:"btf-details-tab",tabId:Vf.DETAILS_TAB_ID};return[t,a,this.tabEnabledMap[Vf.EXTRAS_TAB_ID]&&{header:i.createElement(z,{stringID:"DV_DP_TAB_extras"}),content:i.createElement(xg,null),refTag:(0,de.i)("atv_dp_btf_tab_{tabType}_ext",{tabType:e}),automationId:"btf-extras-tab",tabId:Vf.EXTRAS_TAB_ID},n,r].filter(Boolean)}render(){const e=this.getTabs(),{selectedTab:t}=this.state;if((0,Z.xb)(e))return null;const a=e.map(((e,a)=>{const n=`tab-content-${e.tabId}`===t;return i.createElement(i.Fragment,{key:`btf-content-${a}`},i.createElement("input",{id:`tab-selector-${e.tabId}`,name:"btf-content-selector",className:Wn,type:"radio",checked:n,onClick:()=>this.setSelectedAndScroll(e.tabId)}),i.createElement(Af,{tabId:e.tabId,isVisible:n,isLazy:!1},e.content))})),n=i.createElement("div",{className:we($n,{[qn]:this.state.navIsActive&&this.navRef.current.getBoundingClientRect().top-this.navHeight<0,[Hn]:!this.state.pvNavSticky,[Gn]:!1})},i.createElement(Ha.Container,null,i.createElement("div",{className:Mn},e.map(((e,t)=>i.createElement("h2",{key:`btf-nav-${t}`,className:Bn},i.createElement(Ji,{refTag:e.refTag},i.createElement("label",{className:we(Un,{[Fn]:this.state.selectedTab===`tab-content-${e.tabId}`}),htmlFor:`tab-selector-${e.tabId}`,"data-automation-id":e.automationId},e.header))))))));return i.createElement("div",null,i.createElement("div",{ref:this.navRef}),n,i.createElement("div",{className:Vn},a))}}const Bf=(0,J.$j)((e=>({showTabCollections:Up(e),showCarousels:Hp(e),showOtherFormats:Xp(e),showCastAndCrew:lm(e),showProductDetails:Nm(e),showExploreTab:Ag(e),showReviews:Wg(e),showExtras:ig(e),isPhablet:$e(e),isRetail:xt(e),queryParameters:St(e)})))(Mf),Uf="customer-review-badge",jf="customer-review-section",Ff=`#${jf}`,$f=({titleId:e,useDetailsTab:t})=>i.createElement(Rn.Link,{href:t?Ff:`/review/create-review/ref=acr_dpinstantvideo_solicit?ie=UTF8&asin=${e}`,onClick:e=>{const a=Lf();t&&a&&(e.preventDefault(),a.click())}},i.createElement(z,{stringID:"DV_DP_first_review"})),Hf=({amazonRating:e,pageTitleId:t,isRetail:a,reviewsNotAllowed:n=!1,isCerberusChild:r,isFirestormReviewsEnabled:s,isReviewsSubmissionEnabled:o,checkReviewEligibility:l})=>{const{getString:c,pageType:d,subPageType:u,refTagTitleId:p}=i.useContext($.h);if(!a&&!s)return null;const m=e&&e.value,g=e&&e.count,h=e&&e.countFormatted;if(!g||!m)return n||(0,Z.JQ)(r)||s&&!o?null:i.createElement($f,{titleId:t,useDetailsTab:s||l});const _=c("DV_DP_ARIA_amazon_rating",{ratingValue:xn(m,10).toString(),customerCount:g.toString()}),f=e=>{(0,On.XQ)((0,de.i)("atv_dp_cr_atf_rl"),d,u,p);const t=Lf();t&&(e.preventDefault(),t.click())};return v=i.createElement("div",{className:Nn},i.createElement(Nh.StarRating,{rating:m,className:An}),i.createElement("span",null,"(",h,")")),(0,Z.JQ)(r)?i.createElement("span",{"aria-label":_,"data-automation-id":Uf,role:"img"},v):i.createElement("a",{href:Ff,onClick:f,"aria-label":_,"data-automation-id":Uf},v);var v},Gf="FDDgZI",qf=({imdb:e})=>{const{getString:t}=i.useContext($.h);return e&&e.score&&i.createElement("span",{className:Gf},i.createElement(wm(),null),i.createElement("span",{role:"text","data-automation-id":"imdb-rating-badge","aria-label":t("DV_DP_ARIA_imdb_rating",{ratingValue:xn(e.score,10).toString()})},e.scoreFormatted))||null},zf=({releaseYear:e})=>{const{getString:t}=i.useContext($.h);return e&&i.createElement(sn.Badge,{use:sn.badges.TEXT},i.createElement("span",{role:"text","aria-label":t("DV_DP_ARIA_release_year",{releaseYear:String(e)}),"data-automation-id":"release-year-badge"},e))||null},Zf=({location:e})=>{const{getString:t}=i.useContext($.h);return e&&i.createElement(sn.Badge,{use:sn.badges.TEXT},i.createElement("span",{"data-automation-id":"location-badge","aria-label":t("DV_DP_ARIA_located",{location:e}),role:"text"},e))||null},Xf=({isXRay:e})=>(0,Z.JQ)(e)&&i.createElement(sn.Badge,{use:sn.badges.BORDERED_TEXT},i.createElement("span",{"data-automation-id":"x-ray-badge"},"X-Ray"))||null,Qf=({dateTimeBadge:e})=>{const{getString:t}=i.useContext($.h);return e&&i.createElement(sn.Badge,{use:sn.badges.TEXT},i.createElement("span",{"data-automation-id":"date-time-badge","aria-label":t("DV_DP_ARIA_scheduled",{dateTime:e}),role:"text"},e))||null},Yf=({isHdr:e})=>(0,Z.JQ)(e)&&i.createElement(sn.Badge,{use:sn.badges.BORDERED_TEXT},i.createElement("span",{"data-automation-id":"hdr-badge"},"HDR"))||null,Jf=({isUhd:e})=>(0,Z.JQ)(e)&&i.createElement(sn.Badge,{use:sn.badges.BORDERED_TEXT},i.createElement("span",{"data-automation-id":"uhd-badge"},"UHD"))||null,Kf=(0,We.P)([xt,Me.bS.pageTitleId,Ue,Ke,tt,Ze,Me.mZ.comingSoon,Me.mZ.headerDetail],((e,t,a,n,r,i,s,o)=>o&&t&&{amazonRating:o.amazonRating,isRetail:e,pageTitleId:t,isCerberusChild:a,reviewsNotAllowed:s,isFirestormReviewsEnabled:n,isReviewsSubmissionEnabled:r,checkReviewEligibility:i}||void 0)),ev=(0,We.P)(Me.mZ.headerDetail,(e=>e&&{subtitles:e.subtitles,isClosedCaption:e.isClosedCaption}||void 0)),tv=(0,We.P)(Me.mZ.headerDetail,(e=>e&&e.releaseYear&&{releaseYear:e.releaseYear}||void 0)),av=(0,We.P)(Me.mZ.headerDetail,(e=>e&&e.runtime&&{runtime:e.runtime}||void 0)),nv=(0,We.P)(Me.mZ.headerDetail,(e=>e&&e.ratingBadge&&{ratingBadge:e.ratingBadge}||void 0)),rv=(0,We.P)([Me.mZ.headerDetail],(e=>e&&e.pageDateTimeBadge&&{dateTimeBadge:e.pageDateTimeBadge}||void 0)),iv=(0,We.P)(Me.mZ.imdb,(e=>e&&{imdb:e}||void 0)),sv=(0,We.P)(Me.mZ.headerDetail,(e=>e&&e.location&&{location:e.location}||void 0)),ov=(0,We.P)(Me.mZ.headerDetail,(e=>e&&e.isXRay&&{isXRay:e.isXRay}||void 0)),lv=(0,We.P)(Me.mZ.headerDetail,(e=>e&&e.isHdr&&{isHdr:e.isHdr}||void 0)),cv=(0,We.P)(Me.mZ.headerDetail,(e=>e&&e.isUhd&&{isUhd:e.isUhd}||void 0)),dv=(0,We.P)(Me.mZ.headerDetail,(e=>e&&e.isAd&&{isAd:e.isAd}||void 0));function uv(){return uv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},uv.apply(this,arguments)}const pv=(0,J.$j)((e=>({amazonRating:Kf(e),imdb:iv(e),ratingBadge:nv(e),dateTimeBadge:rv(e),releaseYear:tv(e),runtime:av(e),subtitles:ev(e),location:sv(e),xRay:ov(e),hdr:lv(e),uhd:cv(e),ad:dv(e)})))((({amazonRating:e,imdb:t,ratingBadge:a,dateTimeBadge:n,releaseYear:r,runtime:s,subtitles:o,location:l,xRay:c,hdr:d,uhd:u,ad:p})=>{var m;const{getString:g}=i.useContext($.h);return i.createElement(_n.Spacer,{className:`dv-node-dp-badges ${fn} ${ye}`,space:_n.spacerSpacing.s,alignItems:_n.spacerAlignItems.center},e&&i.createElement(Hf,e),i.createElement(Qf,n),i.createElement(Zf,l),i.createElement(qf,t),i.createElement(vn,uv({},s,{ariaLabel:(null==s?void 0:s.runtime)&&g("DV_DP_ARIA_runtime",{runtime:s.runtime})})),i.createElement(zf,r),i.createElement(Xf,c),i.createElement(Yf,d),i.createElement(Jf,u),i.createElement(Dg,p),i.createElement(kn,uv({},a,{notRatedString:g("DV_TW_amr_nr_text"),suitableForAriaLabel:(null==a||null===(m=a.ratingBadge)||void 0===m?void 0:m.displayText)&&g("DV_DP_ARIA_suitable_for",{ageGroup:a.ratingBadge.displayText})})),i.createElement(wg,o))})),mv="_2RTMpg",gv=({messages:e})=>e&&e.length?i.createElement(i.Fragment,null,e.map(((e,t)=>i.createElement(Ql,{key:`text-block-conf-text-${t}`,Tag:Uc.TextBlock,className:mv,message:e})))):null,hv="_1K5BOV",_v="_2-dqbX",fv="_2_k77h",vv=({playbackData:e,isMShop:t,containerRef:a,isPrimaryButton:n=!0})=>{if(!e)return null;const r={contentConfig:{asin:e.playbackID,trailer:!0,position:0,ref:Jt,videoType:e.videoMaterialType,useFullView:!0},playbackUrl:e.playbackURL,fallbackUrl:e.fallbackURL,signInUrl:e.signInURL,sequenceNumber:0,isBonus:!0};return i.createElement(ei.ET.Consumer,null,(({onPlay:s})=>i.createElement("div",{className:n?fe:_v},i.createElement(Ji,{refTag:Jt,className:"dv-dp-node-trailer"},i.createElement(Wr,{onClick:e=>{s(r),e.preventDefault()},forceDoubleHeight:n,href:t?void 0:e.playbackURL,tooltipText:e&&e.text.replace("{conditionalLineBreak}",""),"aria-label":e&&e.text.replace("{conditionalLineBreak}",""),containerRef:a,isPrimaryButton:n},n&&i.createElement(l.Text,{tag:"span",string:e.text}))),!n&&i.createElement(l.Text,{tag:"span",string:e.text,className:fv}))))},bv=(e,t)=>((e,t)=>ul({input:e,operation:Ko.WatchlistToggle},il,t))(e,(a=>a?{type:Pi.k.WatchlistToggle,input:e,output:Oo(t,a),payload:{pageTitleId:t}}:{type:Pi.k.WatchlistToggleFailed,input:e,payload:{pageTitleId:t}})),Ev=(0,We.P)([Me.mZ.watchlist],(e=>{if(!e)return;const t=e.endpoint.query,{tag:a,titleID:n,token:r,titleType:i,returnUrl:s}=t,o={tag:a,titleID:n,token:r,titleType:i,returnUrl:s},l="season"===i,c=((e,t)=>{const a=((e,t)=>`atv_dp_wtls_${"Remove"===e?"rmv":"add"}_${t?"seas":"mov"}`)(e.tag,t);return(e.endpoint.partialURL||"").replace("atv_unknown",a)})(e,l);return{partialURL:c,query:o,isSeason:l,tag:e.tag,formatCode:e.formatCode,text:e.text,ajaxEnabled:e.ajaxEnabled,failed:Boolean(e.failed)}})),yv=((0,We.P)([Ea,Fe],((e,t)=>e&&t)),"_2umowe"),wv="nPT-xD",Tv="_1gVrns",Dv="_2adLl2";function Iv(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Cv extends i.Component{constructor(...e){super(...e),Iv(this,"timer",null),Iv(this,"state",{showSpinner:!1})}componentDidMount(){this.ensureTimer(this.props)}componentWillUnmount(){this.destroyTimer()}componentDidUpdate(e){e.isLoading!==this.props.isLoading&&this.ensureTimer(this.props)}ensureTimer({isLoading:e,delay:t=350}){e?this.timer||(this.timer=setTimeout((()=>{this.timer=null,this.setState({showSpinner:!0})}),t)):this.destroyTimer()}destroyTimer(){clearTimeout(this.timer),this.timer=null,this.setState({showSpinner:!1})}render(){const{spinner:e=i.createElement(Pv,null),children:t}=this.props;return i.createElement(i.Fragment,null,this.state.showSpinner&&e,t&&i.createElement("span",{className:we(Tv,{[Dv]:this.state.showSpinner})},t))}}const Pv=()=>i.createElement("div",{className:yv},i.createElement("div",{className:wv},i.createElement(Xr.Spinner,{fillHeight:!0}))),Sv="voFxU5",kv="y1nGLG",Rv="_2rjFFc",xv="_2GxJOn",Nv="_2WWNPa";var Av=a("./node_modules/@amzn/dvui/dist/Icons/Add.js"),Ov=a.n(Av),Vv=a("./node_modules/@amzn/dvui/dist/Icons/WatchlistOn.js"),Lv=a.n(Vv);a("./src/shared/deviceProxy/PVClickstreamClient.ts"),a("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts");function Wv(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Mv="Remove";class Bv extends i.Component{constructor(...e){super(...e),Wv(this,"state",{disabled:!1,isLoading:!1}),Wv(this,"clickHandler",(e=>{var t,a;wi(e),this.setState({disabled:!0,isLoading:!0});const n=this.props.watchlist.query;n.relatedRequestId=this.props.relatedRequestId,this.props.dispatch(bv(n,this.props.pageTitleId));const r=null===(t=this.props.watchlist)||void 0===t?void 0:t.tag,i=null===(a=this.props.watchlist)||void 0===a?void 0:a.formatCode;if(r&&i){const e=r===Mv,t=(0,de.i)("atv_dp_{format}_wtl_{action}",{action:""+(e?"rmv":"add"),format:i}),a=e?"RemoveFromWatchlist":"AddToWatchlist";(0,On.XQ)(t,this.context.pageType,this.context.subPageType,this.context.refTagTitleId,a,"pageTouch")}e.preventDefault()}))}componentDidUpdate(e){e!==this.props&&this.setState({disabled:!1,isLoading:!1})}render(){const{dispatch:e,watchlist:t,containerRef:a}=this.props;if(!t)return null;const{partialURL:n,query:r,tag:s,ajaxEnabled:o,isSeason:l,failed:c}=t,d=s===Mv,u=d?l?"DV_DP_WL_removeTv":"DV_DP_WL_removeMovie":l?"DV_DP_WL_addTv":"DV_DP_WL_addMovie",{returnUrl:p,titleID:m,token:g,titleType:h}=r,_={returnUrl:p,tag:s,titleID:m,token:g,titleType:h};return i.createElement("span",{className:we(Sv,"dv-dp-node-watchlist",ye)},i.createElement(Vd,{action:n,method:"POST",hiddenInputs:_},i.createElement(Pr.Tooltip,{position:"top",size:"s",content:i.createElement(z,{stringID:d?"DV_DP_WL_removeMovie":"DV_DP_WL_addMovie",replace:{conditionalLineBreak:""}}),className:Nv,id:"dv-dp-node-watchlist-tooltip",containerRef:a},i.createElement(sr.Button,{disabled:this.state.disabled,className:kv,onClick:o?this.clickHandler:void 0,"data-ux-click":!0,type:"submit","data-added":d,"aria-label":this.context.getString(d?"DV_DP_WL_removeMovie":"DV_DP_WL_addMovie").replace("{conditionalLineBreak}",""),testID:"watchlist-button"},i.createElement("span",{className:Rv},i.createElement(Cv,{isLoading:this.state.isLoading},d?i.createElement(Lv(),null):i.createElement(Ov(),null)))))),i.createElement(Ii,{modalId:"dvui-close-overlay-watchlist-failed",isOpen:c,modalHeader:i.createElement(z,{stringID:u}),modalContent:i.createElement(z,{stringID:"AVOD_WL_error_msg"}),modalFooter:({closeModal:e})=>i.createElement(sr.Button,{className:_e,onClick:()=>e()},i.createElement(z,{stringID:"AVOD_DP_E_error_ok"})),onClose:()=>{return e((t=this.props.pageTitleId,e=>{e({type:Pi.k.ClearWatchlistToggleFailure,payload:{pageTitleId:t}})}));var t}}),i.createElement("span",{className:xv},i.createElement(z,{stringID:d?"DV_DP_WL_removeMovie":"DV_DP_WL_addMovie"})))}}Wv(Bv,"contextType",$.h);const Uv=(0,J.$j)((e=>({watchlist:Ev(e),pageTitleId:e.pageTitleId,relatedRequestId:e.requestContext.requestID})))(Bv),jv="Lbo-R4",Fv=({message:e,returnLink:t})=>e&&t?i.createElement("div",{className:we(fe,"dv-dp-node-dma",jv),"data-automation-id":"dma-button"},i.createElement(Rn.Link,{href:t,ariaLabel:e,text:e})):null,$v="_19ueOW",Hv="_1ndhb4",Gv=({messages:e})=>e&&e.length?i.createElement("div",{className:$v},e.map(((e,t)=>i.createElement("div",{key:`secondary-offer-${t}`,className:Hv},i.createElement(l.Text,{string:e}))))):null,qv=Xn((({shouldShowMoreWaysToWatch:e,moreWaysToWatch:t,titleId:a,toggleGiftCardModal:n})=>{const r=t&&t.metadata&&t.metadata.refMarker||(0,de.i)("atv_dp_mpo");return e&&a?i.createElement("div",{className:`${ve} ${fe}`},i.createElement(Ii,{size:"m",modalId:"dvui-close-overlay-atf-mwtw",modalContent:({closeModal:e})=>i.createElement(gc,{closeModal:e,moreWaysToWatch:t,toggleGiftCardModal:n}),toggle:({openModalClickHandler:e})=>i.createElement(Ji,{refTag:r},i.createElement(sr.Button,{"data-ux-click":!0,onClick:e,name:"more-purchase-options",className:he},i.createElement(z,{stringID:"DV_MWTW_TITLE_MAIN"})))})):null})),zv=Xn((({playbackData:e,duration:t,isStartOver:a,downloads:n,isOfferClarityEnabled:r,isMShop:s})=>{if(!e.playbackActionData)return null;const o=e.playbackActionData,c=o.playbackID,d=e.self&&e.self.sequenceNumber,u={contentConfig:{asin:c,trailer:!1,position:o.resumeTime,ref:o.playerRefMarker,videoType:o.videoMaterialType,useFullView:!0,playbackEnvelope:(0,Yt.D)(o)},signInUrl:o.signInURL,playbackUrl:o.playbackURL,fallbackUrl:o.fallbackURL,sequenceNumber:d,isBonus:(0,Ot.Hv)(e.self&&e.self.titleType,d),subscriptionName:o.subscriptionName,triggerLocation:"ATF",refMarker:o.refMarker},p=r&&"IMDb TV"===o.subscriptionName;return i.createElement(ei.ET.Consumer,null,(({onPlay:e})=>{const r=Math.max((0,Mr.fZ)(n,c,t),(0,Mr._y)(o.progress));return i.createElement(i.Fragment,null,i.createElement("div",{className:`${fe} ${hv} dv-dp-node-playback`},i.createElement(Lr,{href:s?void 0:o.playbackURL,onClick:t=>{e(u),t.preventDefault()},progress:r,forceDoubleHeight:!0,isStartOver:a,useFreeButton:p},i.createElement(l.Text,{tag:"span",string:o.label}))))}))})),Zv=(0,ti.cG)(zv);function Xv(){return Xv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Xv.apply(this,arguments)}const Qv=Xn((({playbackDataList:e,isRetail:t,playerConfigData:a,duration:n,isOfferClarityEnabled:r,isMShop:s})=>e.length?i.createElement(i.Fragment,null,e.map(((e,o)=>{const l={duration:n,playbackData:e,playerConfigData:a,isRetail:t,isStartOver:1===o,isOfferClarityEnabled:r,isMShop:s};return i.createElement(Zv,Xv({key:`action-box-playback-${o}`},l))}))):null)),Yv=(0,J.$j)((e=>({purchase:e.purchase})))((({purchase:e})=>{const t=Boolean(e&&e.failed);return i.createElement(Ii,{modalId:"dvui-close-overlay-purchase-failed",isOpen:t,className:Zr.purchaseFailedModal,modalContent:i.createElement(z,{stringID:"AVOD_DP_E_error_text"}),modalFooter:({closeModal:e})=>i.createElement(sr.Button,{className:_e,onClick:()=>{window.location.reload(!0),e()}},i.createElement(z,{stringID:"AVOD_DP_E_error_ok"}))})}));function Jv(){return Jv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Jv.apply(this,arguments)}const Kv=(0,zn.n)((0,J.$j)((e=>({pageTitleId:e.pageTitleId,playbackMessaging:va(e),notificationBox:ua(e),playbackActions:ya(e),downloadAction:ba(e),trailerAction:wa(e),purchaseAction:Ta(e),disneyAction:Da(e),moreWaysToWatch:Ca(e),secondaryOfferMessage:Sa(e),purchaseDetails:ji(e),isRefunding:Boolean(e.refund.refunding),isMShop:He(e),requestContext:At(e),downloadLaunchType:e.pageContext.downloadLaunchType,isMovie:(0,ft.NE)(e),duration:ka(e),accessChangeMessages:pa(e),tapsExperimentToken:Me.bS.atfTapsExperimentToken(e),watchPartyAction:(0,Zt.MZ)(e),showCancellationWinback:e.winback.showCancellationWinback,viewRefMarker:(0,Zt.SX)(e),isComingSoon:Me.mZ.comingSoon(e),metaData:Oa(e)})))((e=>{const{pageType:t,subPageType:a,refTagTitleId:n}=(0,i.useContext)($.h),{logger:r,accessChangeMessages:s,viewRefMarker:o,playbackMessaging:c,notificationBox:d,playbackActions:u,downloadAction:p,trailerAction:m,purchaseAction:g,disneyAction:h,moreWaysToWatch:_,secondaryOfferMessage:f,purchaseDetails:v,pageTitleId:b,duration:E,isRefunding:y,requestContext:w,downloadLaunchType:T,isMovie:D,tapsExperimentToken:I,watchPartyAction:C,showCancellationWinback:P,isMShop:S,isComingSoon:k,metaData:R,containerRef:x}=e,[N,A]=(0,i.useState)(!1);(0,i.useEffect)((()=>{s.length>0&&r.count("DVWebNode::Detail::AtfLeavingSoonMessages",1,!1),o&&(0,On.XQ)(o,t,a,n)}),[]);const O=()=>A(!N),V=Boolean(v),L=V&&v.details&&v.details.offer.purchaseData.text||"",W=V||y,M="NONE"===T||"EMBEDDED"===T?void 0:e=>{e.preventDefault(),Qi.b[T]({url:p.downloadURL,fallbackUrl:p.fallbackURL})},B=(w.appName,()=>p.label.replace("{lineBreak}"," ")),U={...p,status:Pu.lh.IDLE,forceDoubleHeight:!0,onClick:M,downloadURL:S?void 0:p&&p.downloadURL},j=(null==R||R.playbackTracks,null==R||R.title,I&&I.pvCinemaToken),F={messagesWithLogo:[{text:j&&j.message,logo:j&&j.logoUrl}]};return i.createElement(i.Fragment,null,i.createElement("div",{className:Zr.actionBox},i.createElement("div",{className:we({[Zr.isProcessingTransaction]:W},Zr.wrapper)},i.createElement(yd,{className:"dv-node-dp-action-box"},i.createElement(cc,Jv({},j?F:c,{tapsExperimentToken:I,showCancellationWinback:P})),i.createElement(xc,{titleId:b}),i.createElement(_n.Spacer,{alignItems:_n.spacerAlignItems.center},i.createElement(gv,d),i.createElement(_n.Spacer,{alignItems:_n.spacerAlignItems.center,className:`${fe} ${ye}`},i.createElement(_n.Spacer,{alignItems:_n.spacerAlignItems.center,className:we(fe,Zr.primaryActions)},u&&i.createElement(Qv,Jv({},u,{duration:E,isMShop:S})),k&&!u&&m&&i.createElement(vv,Jv({},m,{isMShop:S})),i.createElement(bd,Jv({},g,{tvodButtonScope:ts.ACTION_BOX,forceDoubleHeight:!0,tapsExperimentToken:I})),_&&i.createElement(qv,Jv({},_,{toggleGiftCardModal:O}))),i.createElement("span",{className:we(fe,ye,Zr.secondaryActions)},(!k||u)&&m&&i.createElement(vv,Jv({},m,{isMShop:S,containerRef:x,isPrimaryButton:!1})),i.createElement(Uv,{containerRef:x}),p&&i.createElement("span",{className:we(Zr.simplifiedBuyBoxDownload,"dv-dp-node-download")},i.createElement(Lu,Jv({},U,{label:B(),forceDoubleHeight:!1,containerRef:x})),i.createElement("span",{className:Zr.buttonLabel},i.createElement(l.Text,{tag:"span",string:B()}))),i.createElement(jd,{watchPartyAction:C,buttonOrLinkProps:{isButton:!0},withFTUETooltip:!0,containerRef:x})))),j&&i.createElement(cc,c),i.createElement("div",{className:_n.spacerSpacing.s},i.createElement(jl,{placement:"ActionBox",toggleGiftCardModal:O}),i.createElement(Gv,f)))),W&&i.createElement(Yr,{text:L}),i.createElement(Yv,null),i.createElement(Vl,{isOpen:N,onClose:O,requestContext:w.rawContext})),i.createElement(Fv,h))}))),eb="_3CyLqv",tb="fVWsBr",ab="_3hF9WT",nb="_2ZnCkI",rb="_3Lykuc",ib="_33xhZL",sb="Coi_ha",ob="_3Mynff",lb="-TbE6N",cb="_3MF8IH",db="mqdy4z",ub="_2AWcdS",pb="_2R7MIq",mb="_1y08HI";var gb=a("./src/widgets/DVWebNodeDetail/components/heroVideo/draperStatus.ts");const hb=({playbackData:e,isPackshot:t,draperStatus:a,isMShop:n})=>{const r=e.playbackActionData;if(!r)return null;const s=we(ub,{[mb]:t,[pb]:[gb.e.BeforePlaying,gb.e.Playing].includes(a)}),l=(0,o.VJ)(r.label,{lineBreak:", "}),c=e.self&&e.self.sequenceNumber,d={contentConfig:{asin:r.playbackID,trailer:!1,position:r.resumeTime,ref:r.playerRefMarker,videoType:r.videoMaterialType,useFullView:!0,playbackEnvelope:(0,Yt.D)(r)},signInUrl:r.signInURL,playbackUrl:r.playbackURL,fallbackUrl:r.fallbackURL,sequenceNumber:c,isBonus:(0,Ot.Hv)(e.self&&e.self.titleType,c),subscriptionName:r.subscriptionName,triggerLocation:"ATFCircle"};return i.createElement(Ji,{refTag:"atv_dp_pb_circle"},i.createElement(ei.ET.Consumer,null,(({onPlay:e})=>i.createElement(Nr,{className:s,href:n?void 0:r.playbackURL,isSeeThrough:!0,isPackshotButton:t,ariaLabel:l,onClick:t=>{e(d),t.preventDefault()}}))))};function _b(){return _b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_b.apply(this,arguments)}const fb=(0,J.$j)((e=>({pageTitleId:Me.bS.pageTitleId(e),isRetail:xt(e),isMShop:He(e),images:(0,ft.A2)(e),heroshotShouldBeShown:Va(e),playbackData:(0,Zt.BB)(e)})))((({images:e,heroshotShouldBeShown:t,playbackData:a,isRetail:n,isMShop:r,draperStatus:s})=>{const{isRTL:o}=i.useContext($.h);if(!e)return null;if(!t){const t=e.packshot;if(!t)return null;const a={backgroundImage:`url(${new De.e(t).scaleWidth(300).setBlur(80).getImageUrl()})`};return i.createElement("div",{className:we(tb,eb),"data-automation-id":"hero-background",style:a},i.createElement("div",{className:rb}),i.createElement("div",{className:ib}))}const l={alt:"",src:e.heroshot,baseValue:1080,srcSizes:[{"max-phablet":360},{"max-tablet":720},{"min-tablet":1080}],blurUp:!0,isAtfMainImage:!0},c={alt:"",src:e.fullBackground16x9,baseValue:1700,srcSizes:[{"max-phablet":500},{"max-tablet":900},{"min-tablet":1100},{"min-tablet-landscape":1700}],blurUp:!0,isAtfMainImage:!0},d=Boolean(e.fullBackground16x9&&!o),u=n&&!d;return i.createElement(i.Fragment,null,i.createElement("div",{className:we(d?cb:tb,sb,"av-hero-background",{[ob]:[gb.e.BeforePlaying,gb.e.Playing].includes(s)}),"data-automation-id":"hero-background"},i.createElement("div",{className:d?db:ab},i.createElement(pt,_b({className:nb,classNameContainer:nb},d?c:l)),i.createElement("div",{className:d?lb:rb}),i.createElement("div",{className:ib})),u&&i.createElement("div",{className:"playback-large-circle-wrapper"},i.createElement("div",{id:"dv-play-box-circle"},a&&i.createElement(hb,{playbackData:a,draperStatus:s,isMShop:r})))))})),vb="_3nvsfu",bb="_1nIHVe",Eb="_3fEJTC",yb="_1472H-",wb="_1WCtm8",Tb="_2hu-aV",Db="emJEcW";function Ib(){return Ib=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ib.apply(this,arguments)}const Cb=[Vm.Directors,Vm.Starring,Vm.Genres,Vm.Subtitles,Vm.AudioTracks],Pb=[Vm.Starring,Vm.Genres,Vm.Subtitles,Vm.AudioTracks],Sb=e=>e?Pb:Cb,kb=Jn((e=>{const t=[...Sb(e.isTV)];return i.createElement("div",{className:`${Sm} dv-dp-node-meta-info ${he}`},i.createElement(Km,Ib({},e,{fields:t,expandedItemsCount:40,id:"meta-info"})))})),Rb="_3g6euW",xb="_3NQ02f",Nb=({showLiveError:e})=>i.createElement(Ob,{stringID:e?"DV_DP_unavailable_live_page_message":"DV_DP_unavailable_page_message"}),Ab=()=>i.createElement(Ob,{stringID:"DV_DP_only_playback_available_in_gen4_message"}),Ob=({stringID:e})=>i.createElement("div",{className:xb},i.createElement("p",{className:we(Rb,he)},i.createElement(z,{stringID:e}))),Vb="_3FGYxA",Lb=({text:e,isLive:t})=>t&&e?i.createElement("div",{className:`${Vb} ${he} ${ye}`},i.createElement(sn.Badge,{use:sn.badges.LIVE}," ",e," ")):null,Wb="_1MtDO7",Mb="_1bxwoL",Bb=({imagePath:e,imageLink:t,imageAlt:a})=>e&&t?i.createElement("div",{className:Wb,"data-automation-id":"top-banner-promo"},i.createElement("div",{className:Mb},i.createElement("a",{href:t.href,"aria-label":t.ariaLabel},i.createElement("img",{src:e,alt:a})))):null,Ub=(0,We.P)(Me.mZ.creative,(e=>e&&Fb(e.atfTop)&&e.atfTop.image&&{imagePath:e.atfTop.image.path,imageLink:e.atfTop.image.link,imageAlt:e.atfTop.image.alt}||void 0)),jb=(0,We.P)(Me.mZ.creative,(e=>e&&$b(e.atfBottom)&&{title:e.atfBottom.title,content:e.atfBottom.content,image:e.atfBottom.image}||void 0)),Fb=e=>(0,bn.P)(e,"atv.wps#BannerPromoModel"),$b=e=>(0,bn.P)(e,"atv.wps#HeroQuickPromoModel");var Hb=a("./node_modules/@amzn/dvui/dist/Panel.js");const Gb="_1CDdiS",qb="_1Ag_ZD",zb="_4wfq7P",Zb=({title:e,content:t,image:a})=>e||t?i.createElement("article",{"data-automation-id":"hero-quick-promo",className:Gb},i.createElement(Hb.Panel,{className:qb},a&&i.createElement(Xb,a),i.createElement("div",null,i.createElement("header",null,i.createElement(l.Text,{string:e,tag:"small"})),i.createElement("p",null,i.createElement(l.Text,{string:t,tag:"small"}))))):null,Xb=({path:e,alt:t,link:a})=>e?a?i.createElement("a",{href:a.href,"aria-label":a.ariaLabel},i.createElement(Qb,{path:e,alt:t})):i.createElement(Qb,{path:e,alt:t}):null,Qb=({path:e,alt:t})=>i.createElement("div",{className:zb},i.createElement("img",{src:e,alt:t})),Yb="_2oa39y",Jb=e=>{const t={header:e.header,collectionType:e.collectionType,cardTitleIds:e.titleIds,totalEpisodeSize:e.totalCardSize,refTagPrefix:"atv_dp_bundle_",index:0};return t.cardTitleIds&&t.cardTitleIds.length>0?i.createElement("div",{className:Yb,"data-automation-id":"bundle-carousel"},i.createElement(Vp,t)):null},Kb=({title:e,context:t,csrfToken:a,body:n})=>i.createElement(vs.MessageBlock,{heading:e.string,type:vs.MessageTypes.warning,dismissable:!0,onDismiss:()=>{(async(e,t)=>{const a=new s.eZ;await a.SetPreferences({context:e,csrfToken:t,sessionBased:(0,Z.Dv)({crowBannerOptOut:!0})})})(t,a)}},i.createElement(l.Text,{string:n})),eE=(0,We.P)([Me.bS.context,Me.mZ.crowBanner],((e,t)=>t&&{title:t.title,body:t.body,csrfToken:t.csrfToken,context:e}||void 0)),tE=(0,We.P)([Me.mZ.restriction],(e=>e&&e.blockedPageModel&&{model:e&&e.blockedPageModel}||void 0)),aE="_39Ikm0",nE="_3RyQYR",rE="_2IqXB4",iE="_26i0xA",sE="_33CQ6M",oE=({model:e})=>e?i.createElement("div",{className:aE},i.createElement("div",{className:nE},i.createElement("p",{className:rE},i.createElement(l.Text,{string:e.message})),i.createElement("p",null,i.createElement(l.Text,{string:e.secondaryMessage})),i.createElement("div",{className:iE},e.primaryActionText&&i.createElement(sr.PrimaryButton,{href:e.primaryActionLink},i.createElement(l.Text,{string:e.primaryActionText})),i.createElement("span",{className:sE},i.createElement(l.Text,{string:e.secondaryAction}))))):null,lE="_13WDDv",cE="_2hXhRb",dE=({isRetail:e,children:t})=>i.createElement("div",{className:e?cE:lE},t),uE="_29NdO6",pE=(0,J.$j)((e=>({banner:e.banner.ui})),(e=>({clearBanner:()=>setTimeout((()=>e({type:Pi.k.ClearBanner})),300)})))((({banner:e,clearBanner:t})=>{const{getString:a}=i.useContext($.h);if(!e)return null;const{stringId:n,string:r,type:s,heading:o,headingStringId:c,dvStringAttrs:d,automationId:u,bodyDVString:p}=e,m=d||{},g=p||r&&(0,Xt.e6)(r,m),h=c?a(c):o||"",_=u||"banner";return i.createElement(vs.MessageBlock,{className:uE,heading:h,type:s,dismissable:!0,onDismiss:t,testID:_},n&&i.createElement(z,{stringID:n,dvStringAttrs:m}),(r||p)&&i.createElement(l.Text,{string:g}))}));let mE=!1;const gE=(e,t=!0)=>(!mE&&t&&(0,r.o5)(),mE=!0,{type:Pi.k.PlaybackStart,payload:e}),hE=(e,t,a=!0,n=!0)=>(r,i)=>{a&&r({type:Pi.k.PlaybackClosed,payload:{content:e}});const s=i(),o=ia(s);if(n&&e&&!e.trailer&&e.asin){const a=o&&o[e.asin]||e.asin;t(a)(r,i)}null!=e&&e.trailer||!Mg(s)||r({type:Pi.k.ClearReviewEligibility,payload:{pageTitleId:s.pageTitleId}})},_E=(e,t,a,n)=>{const r=(({titleID:e,atfWidgets:t,isElcano:a})=>{const n={titleID:e,sections:["Atf"],isElcano:a};return t&&(n.widgets=(0,Z.Dv)({atf:t})),n})({isElcano:t,titleID:e,atfWidgets:["BuyBox"]});return nl(r,(e=>({type:Pi.k.RefreshAtfActionBox,input:r,output:e,payload:{offerAsin:a,canonicalTitleId:n}})))},fE=e=>(t,a)=>{const n=((e,t,a)=>{return{context:e,titleIDs:[t],fragments:["Action","Refund"],presentationScheme:(n=e.domain||"Fogg",bt(n)?"retail-web-episode-list":"global-web-episode-list"),isElcano:a};var n})(a().requestContext,e,Boolean(a().features.isElcano));return((e,t)=>ul({input:e,operation:Ko.GetTitles},rl,t))(n,(e=>({type:Pi.k.RefreshEpisode,input:n,output:e})))(t,a)},vE=e=>(t,a)=>{const n=a(),{pageTitleId:r}=n,i=[_E(n.pageTitleId,Boolean(n.features.isElcano))(t,a)];return(0,ft.NE)(n)||i.push(e?fE(e)(t,a):(e=>(t,a)=>{const n=Xo({context:a().requestContext,titleID:e,isElcano:Boolean(a().features.isElcano)});return nl(n,(e=>({type:Pi.k.RefreshBtfActionBoxes,input:n,output:e})))(t,a)})(r)(t,a)),Promise.all(i)},bE=(0,J.$j)((e=>({pageContext:e.pageContext,playerConfig:ea(e),whisperCacheData:ra(e),playbackLinkData:e.player.playbackLinkData||void 0,autoplay:na(e),playerCapabilities:e.player.capabilities,isAutoplayDeeplinkEnabled:nt(e)})),(e=>({setPlayerCapabilities:t=>e((e=>({type:Pi.k.SetPlayerCapabilities,payload:{capabilities:e}}))(t)),onPlayFailure:()=>{e({type:Cs.k.PlaybackFailed})},startPlayback:t=>e(gE(t,!1)),createError:(t,a)=>e(Tc({type:vs.MessageTypes.error,stringId:t,headingStringId:a,automationId:"player-error-banner"})),onClosed:t=>{e(hE(t,vE,!0))},onAsinChanged:t=>{e(hE(t,vE,!1))}})))((0,Q.s6)((({setPlayerCapabilities:e,startPlayback:t,createError:a,onClosed:n,onAsinChanged:s,avlString:o,gvlString:l,hasAmazonAdvertisingPublisherConsent:c,isCookieConsentApplicable:d,playerConfig:u,playbackLinkData:p,whisperCacheData:m,...g})=>{const h=p?{...p,contentConfig:{...p.contentConfig,privacyConsent:{avlString:o,gvlString:l,hasAmazonAdvertisingPublisherConsent:c,isCookieConsentApplicable:d}}}:void 0,_=m?{...m,privacyConsent:{avlString:o,gvlString:l,hasAmazonAdvertisingPublisherConsent:c,isCookieConsentApplicable:d}}:void 0,f={...g,playerConfig:u,playbackLinkData:h,whisperCacheData:_,onAsinChanged:s,onClosed:n,liveIncompatibleCallback:()=>a("DV_WEB_LIVE_NOT_SUPPORTED_BODY"),onPlayerCapabilities:a=>{(0,r.SX)(),e(a);const{autoplay:n,pageContext:i,playerCapabilities:s,isAutoplayDeeplinkEnabled:o}=g;n&&setTimeout((()=>{o?(0,ei.XM)(t,i.playbackLaunchType,i.playbackTrailerLaunchType,u.pageType,s)(n):t(n)}))},onPlayerLoadErrorCallback:()=>a("DV_DP_PLAYER_TIMEOUT_BODY","DV_DP_PLAYER_TIMEOUT_HEADING")};return i.createElement(od,f)})));var EE=a("./node_modules/@amzn/dvui/dist/Icons/LogoPrimevideoApp.js"),yE=a.n(EE);const wE="_3HpRgq",TE="IuS9GC",DE="_8kDmil",IE="_1aUeVF",CE="_3pUIFM",PE="_3-D7fn",SE="_2x-B3P",kE="dvWebDownloadAppModalShown",RE="true",xE=i.forwardRef((({launchType:e,url:t,watchText:a,featuresText:n,proceedText:r,onUpsellAppDone:s},o)=>{const l=i.useRef(null),c=()=>{Qi.b.hasOwnProperty(e)&&Qi.b[e]({url:t})},d=()=>{s&&s()};i.useImperativeHandle(o,(()=>({upsellApp(){var e;localStorage.getItem(kE)!==RE&&1?(localStorage.setItem(kE,RE),null===(e=l.current)||void 0===e||e.open()):(c(),d())}})));return i.createElement(qa.Modal,{modalId:"download-app-modal",size:"xs",className:wE,onClose:d,ref:l},i.createElement("header",{className:TE},i.createElement("div",{className:DE},i.createElement(yE(),null)),i.createElement("h2",{className:IE},a)),i.createElement("div",{className:CE},i.createElement("p",{className:PE},n),i.createElement(On.Jd,{refTag:(0,de.i)("atv_dlapp_get_app")},i.createElement(sr.FreeButton,{className:SE,onClick:()=>{var e;null===(e=l.current)||void 0===e||e.close(),c()}},r))))}));function NE(){return NE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},NE.apply(this,arguments)}const AE=(0,J.$j)((e=>({playbackIntegration:e.playbackIntegration})),(e=>({clearUpsellApp:()=>e({type:Cs.k.ClearUpsellApp})})))((({playbackIntegration:e,clearUpsellApp:t})=>{const a=i.useRef(null);return i.useEffect((()=>{var t;e.downloadAppModal&&e.isUpsellingApp&&(null===(t=a.current)||void 0===t||t.upsellApp())}),[e.isUpsellingApp]),e.downloadAppModal?i.createElement(xE,NE({},e.downloadAppModal,{onUpsellAppDone:t,ref:a})):null}));var OE=a("./node_modules/@amzn/dvui/dist/Icons/Edit.js"),VE=a("./node_modules/@amzn/dvui/dist/Icons/Help.js"),LE=a("./node_modules/@amzn/dvui/dist/Icons/Share.js");const WE="_2kDqJK";function ME(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class BE extends i.PureComponent{constructor(...e){super(...e),ME(this,"state",{copied:!1,buttonString:this.props.copyLinkText}),ME(this,"copyLink",(e=>{const t=document.createElement("textarea");t.value=e,t.readOnly=!0,t.setAttribute("display","none"),document.body.appendChild(t),t.select(),t.setSelectionRange(0,e.length),document.execCommand("copy"),t.remove()})),ME(this,"onClickHandler",(e=>{this.state.copied||(0,On.XQ)(this.props.reftag),this.setState({copied:!0,buttonString:this.props.linkCopiedText}),this.copyLink(this.props.url),e.stopPropagation()}))}render(){const{buttonString:e}=this.state,t=we(WE,{[this.props.className]:Boolean(this.props.className)});return i.createElement(sr.Button,{className:t,onClick:this.onClickHandler,"data-automation-id":"copy-url-button","data-testid":"copy-url-button"},i.createElement(l.Text,{string:e}))}}const UE=BE,jE="_3r4blv",FE="_1soPIu",$E="q72d3c",HE="_3o41qN",GE="_18gh9i",qE="_2v8Cz0",zE=(e,t)=>{const a=e||.7*window.innerWidth,n=t||.7*window.innerHeight;return`toolbar=0, status=0, width=${a}, height=${n}, top=${window.top.outerHeight/2+window.top.screenY-n/2}, left=${window.top.outerWidth/2+window.top.screenX-a/2}`},ZE=["Email","Facebook","Twitter","Pinterest"],XE={Email:rn.IconType.EMAIL,Facebook:rn.IconType.FACEBOOK,Twitter:rn.IconType.TWITTER,Pinterest:rn.IconType.PINTEREST},QE=(e,t,a,n,r)=>i=>{i.preventDefault(),(0,On.XQ)(e),window.open(t,a,zE(n,r))},YE=e=>{const t=e.shareIcons.networkMap,a=e=>{const{network:a,url:n,reftag:r,target:s,ariaText:o,width:l,height:c}=t[e],d=XE[e],u=`share-widget-${d}`;return i.createElement(Rn.Link,{id:u,"data-automation-id":u,"data-testid":u,ariaLabel:o,href:n,target:s,key:d,onClick:QE(r,n,s,l,c)},i.createElement("div",{className:HE},i.createElement(rn.Icon,{className:GE,use:d}),i.createElement("p",{className:qE},a)))};return i.createElement("div",{className:$E},ZE.filter((e=>Object.keys(t).includes(e))).map((e=>a(e))))},JE=({shareIcons:e,pageUrl:t,copyUrlReftag:a,copyLinkText:n,linkCopiedText:r})=>i.createElement("div",null,e&&i.createElement(YE,{shareIcons:e}),i.createElement(UE,{url:t,reftag:a,copyLinkText:n,linkCopiedText:r})),KE=({shareWidgetModel:e,refTag:t,pageType:a,subPageType:n})=>{return e?i.createElement(Ii,{size:"xs",modalHeader:(r=e.shareText,i.createElement("strong",null,i.createElement(l.Text,{string:r}))),modalContent:JE(e),modalId:"share-modal",toggle:({openModalClickHandler:r})=>i.createElement(On.Jd,{refTag:t,pageType:a,subPageType:n},i.createElement("button",{id:"shareTrigger",className:FE,onClick:r,"data-automation-id":"share-button","data-testid":"share-button"},i.createElement(l.Text,{string:e.shareText}))),className:jE}):null;var r},ey=(e,t,a)=>(n,r)=>((e,t,a,n)=>ul({input:e,operation:Ko.GetYourDevicesSettingsPage},sl,t,a,n))(e,(t=>({type:Pi.k.GetDevices,input:e,output:Vo(t)})),t,a)(n,r);function ty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ay{static from(e=null){return null==e?ay._none:new ay(e)}constructor(e=null){if(ty(this,"_v",null),null==e)return ay._none;this._v=e}isPresent(){return null!=this._v}isEmpty(){return null==this._v}contains(e){return null!=this._v&&this._v==e}getOrElse(e){return null==this._v?e:this._v}map(e){return null==this._v?this:ay.from(e(this._v))}flatMap(e){return null==this._v?this:e(this._v)}filter(e){return null==this._v?ay._none:e(this._v)?this:ay._none}exists(e){return null!=this._v&&e(this._v)}orElse(e){return null==this._v?e:this}forEach(e){null==this._v||e(this._v)}match({some:e,none:t}){return null==this._v?t():e(this._v)}}ty(ay,"_none",new ay);const ny="_3h4TEd",ry="_1DL1hb",iy="_3Itp-s",sy="_3RRtRN",oy="xDczhL",ly=({dropListId:e,dropListLinks:t,formUrl:a,formOnSubmitFn:n})=>i.createElement(i.Fragment,null,i.createElement("h4",{className:`${iy}`},i.createElement(z,{stringID:"DV_WEB_FEEDBACK_select_related_device"})),i.createElement("div",{className:`${sy}`,"data-automation-id":"feedback-drop-list","data-testid":"feedback-drop-list"},i.createElement(Cc,{links:t,customDropListID:e})),i.createElement(sr.PrimeButton,{useIcon:rn.IconType.EXTERNAL,onClick:()=>{n&&n(),window.open(a,"_blank",zE(500,540))},className:`${oy}`,"data-automation-id":"feedback-submit-button","data-testid":"feedback-submit-button"},i.createElement(z,{stringID:"DV_WEB_FEEDBACK_submit_button"}))),cy=({isOpen:e=!1,link:t,linkOnClickFn:a,onCloseFn:n,header:r,children:s})=>i.createElement(Ii,{size:"xs",isOpen:e,toggle:()=>i.createElement(Ji,{refTag:"atv_dp_fb_open"},i.createElement("button",{"data-automation-id":"feedback-button","data-testid":"feedback-button",className:`${ry}`,onClick:a},t)),onClose:n,modalHeader:i.createElement("strong",null,r),modalContent:s,className:`${ny}`});var dy=a("./src/util/utils/feedback.ts");function uy(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const py="fbModalOpen",my=i.createElement(z,{stringID:"DV_WEB_FEEDBACK_feedback"}),gy=i.createElement(z,{stringID:"DV_WEB_FEEDBACK__send_us_feedback"}),hy={deviceTypeId:"A13Q6A55DBZB7M",name:"AVOD Website",text:i.createElement(z,{stringID:"DV_WEB_FEEDBACK_no_device_website"})},_y={deviceTypeId:"",name:"Other Device",text:i.createElement(z,{stringID:"DV_WEB_SETTINGS_HEAD_YOUR_DEVICES"})};class fy extends i.Component{constructor(...e){super(...e),uy(this,"state",{isOpen:this.isModalOpenOnPageLoad(),selected:0}),uy(this,"getDevicesList",(()=>{Boolean(this.props.context.customerID)&&!this.props.devices.deviceEntries&&this.props.getDevicesListWithRedirect(this.props.feedbackSignInUrl)}))}isModalOpenOnPageLoad(){const{context:{queryParameters:e}}=this.props;return Boolean(e&&e.fbModalOpen&&e.fbModalOpen[0])}linkClickHandler(){this.getDevicesList(),this.openModal()}selectDropListLink(e){this.setState({selected:e})}openModal(){this.setState({isOpen:!0})}closeModal(){this.setState({isOpen:!1})}componentDidMount(){this.state.isOpen&&this.getDevicesList()}render(){const{selected:e,isOpen:t}=this.state,{isMobile:a,isRetail:n,context:r,pageTitleId:s,logger:o,devices:{deviceEntries:l}}=this.props,c=((e,t=!0)=>{const a=ay.from(e);if(a.isEmpty()&&t)return[hy,_y];const n=a.getOrElse([]).reduce(((e,t)=>{const a=t.childrenNames&&t.childrenNames[0]||t.name;return e[a]||(e[a]=t.deviceTypeId),e}),{}),r=Object.keys(n).sort(((e,t)=>e.localeCompare(t))).map((e=>({name:e,deviceTypeId:n[e],text:e})));return[hy,...r]})(l,Boolean(r.customerID)),d=((e,t,a)=>e.map(((e,n)=>({text:e.text,isHighlighted:t===n,href:`#${n}`,onClick:e=>{a(n),e.preventDefault()}}))))(c,e,(e=>this.selectDropListLink(e))),u=c[e],p={...n?{ASIN:s}:{GTI:s},deviceName:u.name,deviceTypeId:u.deviceTypeId,currentTerritory:r.currentTerritory,recordTerritory:r.recordTerritory,language:r.locale,marketplace:r.marketplaceID,encryptedCustomerId:r.customerID,sessionId:r.sessionID,sourceUrl:`${(0,ld.cU)(r.marketplaceID)}${r.originalURI}`,returnUrl:me({isRetail:n,parameters:{},originalURI:r.originalURI},s,"atv_dp_send_feedback")},m=(0,dy.O)(r.marketplaceID,p,o,a);return i.createElement(cy,{isOpen:t,link:my,linkOnClickFn:()=>this.linkClickHandler(),onCloseFn:()=>this.closeModal(),header:gy},i.createElement(ly,{dropListId:"feedback-device-list",dropListLinks:d,formUrl:m,formOnSubmitFn:()=>{o.count("DVWeb::Detail::FeedbackFormSubmit",1,!0),this.closeModal()}}))}}const vy=(0,zn.n)((0,J.$j)((e=>({devices:Me.bS.devices(e),isMobile:Fe(e),pageTitleId:Me.bS.pageTitleId(e),context:Me.bS.context(e),isRetail:xt(e)})),(e=>({getDevicesListWithRedirect:t=>{e((e=>ey({widgetArgs:(0,Z.Dv)({})},{retryable:!1,mutedStatusCodes:[vt.SU.Forbidden]},(t=>{window&&e&&t instanceof vt.yM&&t.message.includes(`${vt.SU.Forbidden}`)&&window.location.assign(e)})))(t))}})))(fy)),by="_2T-E4t",Ey="_3sJF7y",yy="_8n5jYM",wy="_3Vj7e7",Ty="_2hn8r7";var Dy=a("./node_modules/@amzn/dvui/dist/Icons/Lightbulb.js"),Iy=a.n(Dy);const Cy=({termsText:e})=>i.createElement("div",{className:`${Ey}`},i.createElement(l.Text,{string:e})),Py=({Icon:e,children:t})=>i.createElement("div",{className:Ty},i.createElement("div",{className:wy},i.createElement(e,{height:"24px",width:"24px"})),t),Sy=({isPurchaseRestricted:e,isRetail:t,bottomBar:a,isChildProfile:n,isComingSoon:r,checkReviewEligibility:s})=>{const{pageType:o,subPageType:c}=i.useContext($.h);return e?null:i.createElement("div",{className:we("dv-dp-node-bottom",by)},i.createElement(Cy,{termsText:a.termsText}),!n&&i.createElement(_n.Spacer,{className:yy,space:_n.spacerSpacing.m,alignItems:_n.spacerAlignItems.center,testID:"bottom-bar-actions"},i.createElement(Py,{Icon:LE.Share},i.createElement(KE,{shareWidgetModel:a.shareWidgetModel,refTag:"atv_dp_share_open",pageType:o,subPageType:c})),t?i.createElement(i.Fragment,null,!r&&i.createElement(Py,{Icon:OE.Edit},i.createElement("span",{"data-automation-id":"write-review-link","data-testid":"write-review-link",onClick:e=>{const t=Lf();s&&t&&(e.preventDefault(),t.click())}},i.createElement(l.Text,{string:a.writeReviewText}))),i.createElement(Py,{Icon:Iy()},i.createElement(vy,{feedbackSignInUrl:a.feedbackSignInUrl}))):i.createElement(i.Fragment,null,i.createElement(Py,{Icon:OE.Edit},i.createElement(vy,{feedbackSignInUrl:a.feedbackSignInUrl})),i.createElement(Py,{Icon:VE.Help},i.createElement("span",{"data-automation-id":"get-help-link","data-testid":"get-help-link"},i.createElement(l.Text,{string:a.helpText}))))))},ky="_20_SK5",Ry="_3du1zj",xy="_3x9v6G",Ny=(0,J.$j)((e=>({isRetail:xt(e),isTV:Ft(e),isMShop:He(e),marketplaceId:Rt(e),images:(0,ft.A2)(e),heroshotShouldBeShown:Va(e),playbackData:(0,Zt.BB)(e)})))((({images:e,playbackData:t,isRetail:a,isTV:n,isMShop:r,heroshotShouldBeShown:s,draperStatus:o})=>{if(s||!e||!e.packshot)return null;const l={alt:"",src:e.packshot,baseValue:300,isAtfMainImage:!0,classNameContainer:xy},c=we(ky,n?Ry:void 0,"dv-fallback-packshot-image");return i.createElement(i.Fragment,null,i.createElement("div",{className:c},i.createElement(pt,l),a&&i.createElement("div",{className:"playback-large-circle-wrapper"},i.createElement("div",{id:"dv-play-box-circle"},t&&i.createElement(hb,{playbackData:t,isPackshot:!0,draperStatus:o,isMShop:r})))))}));var Ay=a("./src/widgets/DVWebNodeDetail/selectors/autoplayHero.ts"),Oy=a("./src/util/utils/url.ts");const Vy="_1DrAlF",Ly="_2tqSOt",Wy="_1mbktc",My="chart-position-badge",By=({isMobile:e,chartPosition:t})=>{const{getString:a}=i.useContext($.h);return e||!t?null:i.createElement("div",{className:Vy,"data-testid":My,"data-automation-id":My},i.createElement("span",{className:Ly},a("DV_DP_CHART_TOP_TEN")),i.createElement("span",{className:Wy},t))},Uy="KFfSzi",jy="_3BCzJL",Fy="_1YHF7d",$y="_2rY-ij",Hy="_3iAkF-",Gy="_3EbWH6",qy="_1jQ798",zy="60px",Zy="download-banner-dismiss-icon",Xy="DVWebNode::DetailPage::DownloadUpsell",Qy="dvWebDownloadAppUpsellBannerShown",Yy="true",Jy=(0,zn.n)((({homePageUrl:e,downloadUrl:t,logger:a})=>{const[n,r]=i.useState(!1),[s,o]=i.useState(!1);i.useEffect((()=>{var t;window&&window.localStorage&&window.localStorage.getItem(Qy)===Yy||!1||(null===(t=window.P)||void 0===t||t.when("mash").execute((t=>{t.canLaunchIntentURL({url:e,successCallback:e=>{e?a.count(`${Xy}::ShowDownloadUpsellBanner::hidden`,1,!1):(setTimeout((()=>{r(!0),o(!0)}),1500),a.count(`${Xy}::ShowDownloadUpsellBanner::shown`,1,!1))},failCallback:()=>{a.count(`${Xy}::ShowDownloadUpsellBanner::hidden`,1,!1)}})})))}),[]);return i.createElement(i.Fragment,null,n&&i.createElement("div",{className:Uy,onClick:()=>{var e;null===(e=window.P)||void 0===e||e.when("mash").execute((e=>{a.count(`${Xy}::LaunchDownloadURL`,1,!1),e.launchIntentURL({url:t})}))},"data-automation-id":"pv-app-download-page-link"},i.createElement("input",{type:"checkbox",checked:s,id:Zy,className:jy,onClick:e=>{window&&window.localStorage&&window.localStorage.setItem(Qy,Yy),o(!1),setTimeout((()=>{r(!1)}),300),e.stopPropagation()}}),i.createElement("div",{className:Fy},i.createElement("label",{htmlFor:Zy,onClick:e=>e.stopPropagation(),className:$y},i.createElement(rn.Icon,{use:rn.IconType.SECOND_SCREEN_CLOSE})),i.createElement(Ha.Container,null,i.createElement("div",{className:Hy},i.createElement("div",{className:Gy},i.createElement(yE(),{height:zy,width:zy})),i.createElement(z,{stringID:"DV_DP_download_upsell_banner",className:qy}))))))}));function Ky(){return Ky=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ky.apply(this,arguments)}const ew="DVWebNode-detail-btf-wrapper",tw=i.lazy((()=>Dp((()=>Promise.all([a.e(539),a.e(608)]).then(a.bind(a,"./src/widgets/DVWebNodeDetail/components/heroVideo/heroVideo.tsx"))),"detail-hero-video",(()=>{var e;return null===(e=window.ue)||void 0===e?void 0:e.count("DVWebNode:ChunkFailedToLoad:HeroVideo",1)})).then((({HeroVideoConnected:e})=>({default:e}))))),aw=new Set([py,Os,"fbId","wpCode","wpTitleId"]),nw=({children:e})=>i.createElement(Ha.Container,{className:we(yb,"av-dp-container",wb,Db)},e),rw=({containerRef:e})=>i.createElement("div",{id:"dv-action-box-wrapper",className:he},i.createElement("div",{id:"dv-action-box",className:fe},i.createElement(Kv,{containerRef:e}))),iw=(0,J.$j)((e=>({hasCritical:Ua(e),renderOnlyGen4PlaybackInAtf:ja(e),title:Aa(e),metaData:Oa(e),synopsis:La(e),seasons:Ma(e),liveState:Wa(e),bannerPromo:Ub(e),heroQuickPromo:jb(e),bundleCarousel:Me.mZ.bundleCarousel(e),crowBanner:eE(e),blockedPage:tE(e),bottomBar:Fa(e),pageContext:e.pageContext,trailerAction:wa(e),isMShop:He(e),heroshotShouldBeShown:Va(e),watchPartyAction:(0,Zt.MZ)(e),isRetail:xt(e),accessChangeMessages:pa(e),autoplayHero:(0,Ay.v)(e),pageTitleId:e.pageTitleId,chartPosition:$a(e),isDownloadUpsellEnabled:at(e),downloadUpsellBannerUrls:Me.bS.pageContext(e).downloadUpsellBanner})))((({hasCritical:e,renderOnlyGen4PlaybackInAtf:t,title:a,metaData:n,synopsis:r,seasons:s,liveState:o,bannerPromo:l,heroQuickPromo:c,bundleCarousel:d,crowBanner:u,blockedPage:p,pageContext:m,bottomBar:g,heroshotShouldBeShown:h,isRetail:_,autoplayHero:f,pageTitleId:v,chartPosition:b,isDownloadUpsellEnabled:E,downloadUpsellBannerUrls:y})=>{const[w,T]=i.useState(gb.e.NotStarted),[D,I]=i.useState(!1),{subPageType:C}=m,P=i.useRef(null);return i.useEffect((()=>{(0,Oy.V)(aw),I(Boolean(f)),T(gb.e.NotStarted)}),[v]),p?i.createElement(nw,null,i.createElement("div",{className:"av-detail-section"},i.createElement(oE,p))):e?i.createElement("div",{className:vb,ref:P},i.createElement(dE,{isRetail:_},u&&i.createElement(Kb,u),i.createElement(pE,null)),E&&y&&i.createElement(Jy,y),i.createElement(nw,null,l&&i.createElement(Bb,l),i.createElement(fb,{draperStatus:w}),i.createElement(Ny,{draperStatus:w}),D&&f&&f.isTrailerAutoplayEnabled&&i.createElement(i.Suspense,{fallback:null},i.createElement(tw,{draperStatus:w,setDraperStatus:T})),i.createElement("div",{className:we("av-detail-section",{[Ee]:D},h?bb:Eb)},i.createElement("div",{className:Tb},t&&i.createElement(Ab,null),o&&i.createElement(Lb,o),i.createElement(gt,a),b&&i.createElement(By,b),s&&i.createElement(hn,s),i.createElement(pv,null),r&&i.createElement(tn,r),n&&i.createElement(kb,n),i.createElement(rw,{containerRef:P}),c&&i.createElement(Zb,c))),d&&i.createElement(Jb,d),g&&i.createElement(Sy,Ky({},g,{isChildProfile:m.isCerberusChild}))),[m.playbackLaunchType,m.playbackTrailerLaunchType].some((e=>["EMBEDDED","URL_EMBEDDED","MSHOP_ANDROID_EMBEDDED"].includes(e)))&&i.createElement(bE,null),i.createElement(AE,null)):i.createElement(nw,null,i.createElement("div",{className:"av-detail-section"},i.createElement(Nb,{showLiveError:"Event"===C}),i.createElement("style",null,`.${ew}.${ew}.${ew}{display:none;}`)))}));var sw=a("./node_modules/redux/es/redux.js");function ow(e){return function(t){var a=t.dispatch,n=t.getState;return function(t){return function(r){return"function"==typeof r?r(a,n,e):t(r)}}}}var lw=ow();lw.withExtraArgument=ow;const cw=lw;var dw=a("./src/widgets/DVWebNodeDetail/utils/reducer.ts");const uw={},pw=(0,sw.UY)({fragments:(0,dw.V)((e=>e.refund&&e.refund.fragments),uw,((e=uw,t)=>{switch(t.type){case Cs.k.RefreshAtfActionBox:case Cs.k.RefreshBtfActionBoxes:case Cs.k.RefreshEpisode:return t.output&&t.output.refund&&{...e,...t.output.refund.fragments}||e;default:return e}})),refunding:(e=null,t)=>{switch(t.type){case Cs.k.TriggerRefund:return e||{...t.payload};case Cs.k.RefundCancelled:case Cs.k.RefundFailed:case Cs.k.RefreshAtfActionBox:case Cs.k.RefreshBtfActionBoxes:case Cs.k.RefreshEpisode:return null;default:return e}}}),mw=(0,dw.V)((e=>e.imdb),{}),gw=(0,dw.V)((e=>e.notification),{}),hw=(0,dw.V)((e=>e.seasons),{}),_w=(0,dw.V)((e=>e.carousel),{}),fw=(0,dw.V)((e=>e.extras),{}),vw=(0,dw.V)((e=>e.bundleCarousel),{}),bw=(0,dw.V)((e=>e.buyboxTitleId),{}),Ew=(0,dw.V)((e=>e.creative),{}),yw=(0,dw.V)((e=>e.self),{}),ww=(0,dw.V)((e=>e.restriction),{}),Tw=(0,dw.V)((e=>e.trailer),{}),Dw={},Iw=(0,dw.V)((e=>e.watchlist),Dw,((e=Dw,t)=>{switch(t.type){case Cs.k.WatchlistToggle:return t.output.watchlist[t.payload.pageTitleId]&&{...e,[t.payload.pageTitleId]:{...t.output.watchlist[t.payload.pageTitleId],failed:!1}}||e;case Cs.k.WatchlistToggleFailed:return e[t.payload.pageTitleId]&&{...e,[t.payload.pageTitleId]:{...e[t.payload.pageTitleId],failed:!0}}||e;case Cs.k.ClearWatchlistToggleFailure:return e[t.payload.pageTitleId]&&{...e,[t.payload.pageTitleId]:{...e[t.payload.pageTitleId],failed:null}}||e;default:return e}})),Cw=(0,dw.V)((e=>e.hoverWatchlist),{}),Pw=(0,dw.V)((e=>e.features),{}),Sw=(0,dw.V)((e=>e.castAndCrew),{}),kw=(0,dw.V)((e=>e.pageLink),{}),Rw=(0,sw.UY)({crow:(0,dw.V)((e=>e.banner&&e.banner.crow),{}),ui:(e=null,t)=>{switch(t.type){case Cs.k.CreateBanner:return t.payload;case Cs.k.ClearBanner:return null;default:return e}}}),xw=(0,dw.V)((e=>e.otherFormats),{}),Nw={playbackLinkData:null,capabilities:null},Aw={},Ow=(0,dw.V)((e=>e.bottomBar),{}),Vw=(0,dw.V)((e=>e.exploreTabContent),{}),Lw=(0,dw.V)((e=>e.entitlementCue),{}),Ww=(0,dw.V)((e=>e.tapsExperimentToken),{}),Mw=(0,dw.V)((e=>e.autoplayHero),{}),Bw={showCancellationWinback:!0},Uw=(0,dw.V)((e=>e.hdPlaybackRestricted),{}),jw=(0,dw.V)((e=>e.comingSoon),{}),Fw=(0,dw.V)((e=>e.metadata),{}),$w={},Hw=(e,t)=>({...e,reviewSubmissionState:t}),Gw=(e,t)=>({...e,ratingState:t}),qw=(e,t)=>({...e,publicNameState:{state:t,publicName:e.publicNameState.publicName}}),zw=(e,t,a,n)=>{if(!n||!n.isSuccessful)return a?Gw(t,"unsuccessful"):Hw(t,"unsuccessful");if(!e.reviewID&&Boolean(e.reviewContent))return{...t,reviewSubmissionState:"successful"};if(Boolean(e.reviewContent)&&!a){var r;const{reviewContent:e,reviewTitle:a,isVerifiedPurchase:i}=n,s={...null===(r=t.customerSubmittedReview)||void 0===r?void 0:r.customerSubmittedReviewContent,reviewContent:e,reviewTitle:a},o={...t.customerSubmittedReview,isVerifiedPurchase:i,customerSubmittedReviewContent:s};return{...t,reviewSubmissionState:"successful",customerSubmittedReview:o}}{const a={...t.customerSubmittedReview,rating:e.ratingValue,isVerifiedPurchase:n.isVerifiedPurchase};return{...t,ratingState:"successful",customerSubmittedReview:a}}},Zw=e=>{const{customerSubmittedReview:t,...a}=e;return{...a}},Xw=(e,t)=>{const a=Boolean(t.eligibilityResponse.publicNameResponse)?{...e.publicNameState,publicName:t.eligibilityResponse.publicNameResponse.publicName,recordVersion:t.eligibilityResponse.publicNameResponse.recordVersion}:e.publicNameState;return{...e,publicNameState:a,isEligible:t.eligibilityResponse.isEligible}},Qw=e=>({...e,isEligible:void 0}),Yw=(0,dw.V)((e=>e.reviewSubmission),$w,((e=$w,t)=>{switch(t.type){case Cs.k.SetPublicName:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:(a=e[t.payload.pageTitleId],n=t.output,r=t.input.publicName,{...a,publicNameState:{...a.publicNameState,state:null!=n&&n.isSuccessful?"successful":"unsuccessful",publicName:r||a.publicNameState.publicName,isValidName:null==n?void 0:n.isValidName}})}:e;case Cs.k.UpdatePublicNameState:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:qw(e[t.payload.pageTitleId],t.nextState)}:e;case Cs.k.UpdateSubmissionState:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:Hw(e[t.payload.pageTitleId],t.nextState)}:e;case Cs.k.UpdateRatingState:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:Gw(e[t.payload.pageTitleId],t.nextState)}:e;case Cs.k.SubmitCustomerReview:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:zw(t.input,e[t.payload.pageTitleId],t.isToUpdateRating,t.output)}:e;case Cs.k.ClearSubmissionStates:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:{...e[t.payload.pageTitleId],reviewSubmissionState:"idle",ratingState:"idle"}}:e;case Cs.k.DeleteCustomerReview:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:Zw(e[t.payload.pageTitleId])}:e;case Cs.k.FetchReviewEligibility:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:Xw(e[t.payload.pageTitleId],t.output)}:e;case Cs.k.ClearReviewEligibility:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:Qw(e[t.payload.pageTitleId])}:e;default:return e}var a,n,r})),Jw=(0,dw.V)((e=>e.widgets),{},void 0,((e,t)=>({...t,...Object.keys(e).reduce(((a,n)=>(a[n]={...t[n],...e[n]},a)),{})}))),Kw=(0,dw.V)((e=>e.impressionAnalytics),{}),eT=(0,sw.UY)({requestContext:(e=null)=>e,pageContext:(e=null)=>e,pageTitleId:(e="",t)=>{switch(t.type){case Cs.k.STORE_MERGE:return t.payload&&t.payload.pageTitleId||e;case Cs.k.CHANGE_PAGE:return t.payload.pageTitleId;default:return e}},features:Pw,player:(e=Nw,t)=>{switch(t.type){case Cs.k.PlaybackStart:return{...e,playbackLinkData:t.payload};case Cs.k.PlaybackClosed:case Cs.k.PlaybackFailed:return{...e,playbackLinkData:null};case Cs.k.SetPlayerCapabilities:return{...e,capabilities:t.payload.capabilities};default:return e}},playbackIntegration:(e=Aw,t)=>{switch(t.type){case Cs.k.TriggerUpsellApp:return{...e,isUpsellingApp:!0};case Cs.k.ClearUpsellApp:return{...e,isUpsellingApp:!1};default:return e}},widgets:Jw,action:di.I6,bundleCarousel:vw,buyboxTitleId:bw,creative:Ew,detail:_i.I6,imdb:mw,notification:gw,refund:pw,restriction:ww,self:yw,trailer:Tw,watchlist:Iw,hoverWatchlist:Cw,seasons:hw,collections:Zo.I6,carousel:_w,extras:fw,pageLink:kw,purchase:(e=null,t)=>{switch(t.type){case Cs.k.TriggerPurchase:return e||{...t.payload,failed:!1};case Cs.k.CHANGE_PAGE:case Cs.k.PurchaseCancelled:case Cs.k.RefreshAtfActionBox:case Cs.k.RefreshBtfActionBoxes:case Cs.k.RefreshEpisode:return null;case Cs.k.PurchaseFailed:return t.payload.reload&&e?{...e,failed:!0}:null;default:return e}},exploreTabContent:Vw,reviews:qs,castAndCrew:Sw,otherFormats:xw,banner:Rw,bottomBar:Ow,devices:(e=Ss,t)=>t.type===Cs.k.GetDevices?t.output:e,autoplayHero:Mw,entitlementCue:Lw,winback:(e=Bw,t)=>t.type===Cs.k.UpdateShowCancellationWinback?{...e,showCancellationWinback:t.payload.showCancellationWinback}:e,tapsExperimentToken:Ww,hdPlaybackRestricted:Uw,comingSoon:jw,metadata:Fw,translatedReviews:X_,reviewSubmission:Yw,impressionAnalytics:Kw}),tT=(e,t)=>a=>n=>r=>{e.count(`${Z.EZ}_Action_${r.type.split("/").pop()}`,1,!1),t&&e.info("Action",r);const i=n(r);return t&&e.info("State",a.getState()),i};let aT;const nT=(e,t,a)=>{const n=(0,vt.aP)(e.requestContext.isInternal||"0");if(aT)a?aT.dispatch({type:Pi.k.CHANGE_PAGE,payload:e}):aT.dispatch({type:Pi.k.STORE_MERGE,payload:e});else{const a=[cw,tT(t,n)];n&&t.info(" Initial State",e);const r=n&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||sw.qC;aT=(0,sw.MT)(eT,e,r((0,sw.md)(...a)))}return aT};class rT extends i.Component{constructor(e){super(e),this.state={error:void 0,info:void 0}}componentDidCatch(e,t){const{logger:a,name:n}=this.props,r=`${Z.EZ}_ErrorBoundary_${n}`;a.fatal(r,e).count(r,1,!1),this.setState({error:e,info:t})}render(){const{error:e}=this.state,{requestContext:{isInternal:t}}=this.props;return e?t?i.createElement("div",null,i.createElement("div",null,"$",e.message),i.createElement("div",null,"$",e.stack)):null:this.props.children}}const iT=(0,J.$j)((e=>({requestContext:At(e)})))((0,zn.n)(rT));var sT=a("./node_modules/@amzn/dvui/dist/DVUI.js");const oT=(0,J.$j)((e=>({pageContext:e.pageContext,config:ea(e),playerCapabilities:e.player.capabilities,downloadAppModal:e.playbackIntegration.downloadAppModal,enableMarinTracking:Boolean(e.features.enableMarinTracking)})),(e=>({startPlayback:t=>e(gE(t)),triggerUpsellApp:()=>e({type:Cs.k.TriggerUpsellApp})})))((({startPlayback:e,pageContext:t,config:a,playerCapabilities:n,downloadAppModal:r,triggerUpsellApp:s,enableMarinTracking:o,children:l})=>i.createElement(ei.cr,{configPageType:a.pageType,onPlay:e,launchType:t.playbackLaunchType,trailerLaunchType:t.playbackTrailerLaunchType,playerCapabilities:n,onDownloadAppRequired:r?s:void 0,enableMarinTracking:o,pageType:t.pageType,subPageType:t.subPageType},l))),lT=(0,We.P)([Me.bS.refunding,Me.bS.refund],((e,t)=>{if(!e||!t[e.titleId]||0===t[e.titleId].refundableOrders.length)return null;const{titleId:a}=e,{asin:n,csrfToken:r}=t[a].refundableOrders[0],i=/^[a-zA-Z0-9]{10}$/.test(n);return{asin:i?n:void 0,gti:i?void 0:n,csrfToken:r}}));function cT(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const dT=i.lazy((()=>Dp((()=>a.e(355).then(a.bind(a,"./src/widgets/DVWebNodeDetail/components/purchaseFlowWrapper/dvpaWrapper.tsx"))),"detail-purchase",(()=>{var e;return null===(e=window.ue)||void 0===e?void 0:e.count("DVWebNode:ChunkFailedToLoad:PurchaseFlowWorkflow",1)})).then((({PurchaseFlowWorkflow:e})=>({default:e}))))),uT="mfa-purchase-root",pT=e=>{const t=(window.location.search||"").match(`${e}=([^&]+)`);return t&&decodeURIComponent(t[1])};class mT extends i.Component{constructor(e){super(e),cT(this,"el",void 0),cT(this,"portalRoot",void 0),cT(this,"state",void 0),cT(this,"shouldInitialize",(()=>Object.keys(this.props.offerTokenToPurchaseAction).length>0||this.props.hasRefunds)),this.state={initialized:!1},this.portalRoot=null}componentDidMount(){const{triggerPurchase:e,offerTokenToPurchaseAction:t}=this.props;if(this.shouldInitialize()){this.initialize();const a=pT("continueToken"),n=pT("offerToken"),r=pT("gti");a&&n&&(t[n]||r)&&(setTimeout((()=>e(n,a,r)),300),window.location.href&&(0,Ac.lO)(null,document.title,(e=>e.replace(/continueToken=[^&]+&?/,"").replace(/offerToken=[^&]+&?/,"").replace(/gti=[^&]+&?/,""))(window.location.href)))}}componentDidUpdate(){!this.state.initialized&&this.shouldInitialize()&&this.initialize()}componentWillUnmount(){this.portalRoot&&this.el&&this.portalRoot.removeChild(this.el)}getPurchaseElement(){let e=document.getElementById(uT);return e||(e=document.createElement("div"),e.setAttribute("id",uT),document.body.appendChild(e),e)}initialize(){this.portalRoot=this.getPurchaseElement(),this.el=document.createElement("div"),this.portalRoot.appendChild(this.el),this.setState({initialized:!0})}render(){const{purchasingDetails:e,refundingDetails:t,callbackCancel:a,resetAfterCancel:n,callbackFailure:r,failed:s,refreshAfterDone:o,callbackCSRF:l,callbackCancelRefund:c,callbackFailureRefund:d,callbackRefund:u,subPageType:p,titleId:m,capabilities:g,offerTokenToPurchaseAction:h,deviceId:_,specialHDPlaybackBlocked:f}=this.props,{initialized:v}=this.state,b={supportsWebPlayback:Boolean(g)&&g.supportsWebPlayback,supportsHDMovies:Boolean(g)&&g.supportsHDMovies,supportsUHD:!1};if(!v)return null;let E={action:void 0,actionContext:{callbacks:{callbackCancel:()=>{},callbackFailure:()=>{}}}};if(e){const{details:t,continueToken:i,refTag:c,gtiRedirect:d}=e,u=t&&t.offer.offerToken||e.offerToken;let g=t&&t.offer.csrfTokenWorkflow;if(!g){const e=Object.values(h)[0];g=e&&e.offer.csrfTokenWorkflow}const v=t&&t.gti||d,{deviceTypeId:y}=(0,Si.dz)();E={action:"purchase",actionContext:{isVisible:!0,playerDetails:b,extraData:{subPageType:p,titleId:m,refTag:c,globalTitleIdentifier:v,specialHDPlaybackBlocked:f,deviceTypeId:y,..._&&{deviceId:_}},callbacks:{callbackCancel:a,callbackFailure:r,resetAfterCancel:n,refreshAfterDone:o,failed:s,callbackCSRF:l},offerContext:{offerToken:u,csrfToken:g},continueToken:i}}}else t&&(E={action:"refund",actionContext:{isVisible:!0,asin:t.asin,csrfToken:t.csrfToken,globalTitleIdentifier:t.gti,callbacks:{callbackCancel:c,callbackFailure:d,callbackRefundSuccess:u("Success"),callbackRefundFailure:u("Failure")}}});return Ng.createPortal(i.createElement(iT,{name:"purchaseWorkflow"},i.createElement(i.Suspense,{fallback:i.createElement(i.Fragment,null)},i.createElement(dT,E))),this.el)}}const gT=(e,t,a)=>(n,r,i=!1)=>{const s=i?t.error:t.info,o=[Z.EZ,a,r].join("_"),{deviceTypeId:l}=(0,Si.dz)();s(`${i?"TVOD failure in ":""}[${a}] - Callback ${r} triggered`).count(o,1,!1).count(`${o}_${l}`,1,!1),n({dispatch:e,logger:t})},hT=(0,zn.n)((0,J.$j)((e=>({purchasingDetails:ji(e),refundingDetails:lT(e),offerTokenToPurchaseAction:Ui(e),hasRefunds:Object.keys(e.refund.fragments).length>0,subPageType:(0,ft.S6)(e),deviceId:e.requestContext.deviceID,titleId:e.pageTitleId,capabilities:e.player.capabilities,specialHDPlaybackBlocked:(Me.mZ.hdPlaybackRestricted(e)||{}).isRestricted})),((e,{logger:t})=>{const a=((e,t)=>gT(e,t,"Purchase"))(e,t),n=((e,t)=>gT(e,t,"Refund"))(e,t);return{callbackCancel:()=>a(Hi,"callbackCancel"),resetAfterCancel:()=>a(Hi,"resetAfterCancel"),callbackFailure:()=>a(Gi,"callbackFailure",!0),failed:()=>a(Gi,"failed",!0),refreshAfterDone:()=>a(e(qi)(vE),"refreshAfterDone"),callbackCSRF:()=>a(e(Zi)(vE),"callbackCSRF"),callbackCancelRefund:()=>n(Dc,"callbackCancel"),callbackFailureRefund:()=>n(Ic,"callbackFailure"),callbackRefund:t=>a=>n(e(((e,t)=>a=>(n,r)=>async()=>{if(await a()(n,r),(((t||{}).clientContract||{}).taskData||{}).viewData){const{title:a,message:r}=t.clientContract.taskData.viewData;n(Tc({type:"Success"===e?vs.MessageTypes.success:vs.MessageTypes.warning,string:r,heading:a}))}})(t,a)(vE)),`callbackRefund${t}`),triggerPurchase:(a,n,r)=>$i(e,t,a,n,void 0,r)}}))(mT));var _T=a("./node_modules/@amzn/dv-marin-tracking-js-library/dist/index.js");const fT={name:"detail-atf",getProps:void 0,Component:(0,Q.s6)((0,Y.ty)((e=>{const{logger:t,context:a,state:n,isPageChange:r,strings:s,render:o}=e,l=nT({...n,requestContext:a},t,r);return i.useEffect((()=>{Boolean(n.features.enableMarinTracking)&&(0,_T.sendClicksTrackingRequest)(a.recordTerritory)}),[]),i.createElement(sT.DVUI,null,i.createElement($.h.Provider,{value:{getString:(0,Xt.qY)(s,t,a),...n.pageContext,isRTL:Boolean(o&&o.isRTL),requestContext:a,isMobile:Be(n.pageContext),refTagTitleId:(0,$.N)(n.pageContext.pageTitleId,n.self&&n.self[n.pageTitleId]),isRetail:"Retail"==a.domain}},i.createElement(J.zt,{store:l},i.createElement(iT,{name:"atf"},i.createElement(oT,null,i.createElement(iw,null))),i.createElement(hT,null))))})))};function vT(){return vT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},vT.apply(this,arguments)}const bT=(0,J.$j)((e=>({collections:Wp(e)})))((({collections:e})=>i.createElement(Ha.Container,null,e.map(((e,t)=>null===e?null:i.createElement(Lp,vT({},e,{key:`collection-${e.index}-${t}`})))))));var ET=a("./src/widgets/Explore/DraperPlayer/videoContext.ts");const yT=(0,J.$j)((e=>({shouldShowTabs:!Ht(e),showReviews:Wg(e)})))((({shouldShowTabs:e,showReviews:t})=>{const[a,n]=i.useState({videoContext:{...ET.E,updateContext:e=>{n({videoContext:e})}}});return i.createElement(ET.l.Provider,{value:a.videoContext},e?i.createElement(Bf,null):i.createElement(i.Fragment,null,i.createElement(bT,null),i.createElement(qp,null),i.createElement(Im,null),i.createElement(ng,null),i.createElement(Qp,null)),!e&&t&&i.createElement(Nf,null))}));class wT extends i.Component{constructor(e){var t,a,n;super(e),n=void 0,(a="store")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n;const{logger:r,context:i,state:s}=e;this.store=nT({...s,requestContext:i},r)}render(){const{logger:e,context:t,state:a,strings:n}=this.props;return a.restriction&&a.restriction[a.pageTitleId]&&a.restriction[a.pageTitleId].blockedPageModel?null:i.createElement(sT.DVUI,null,i.createElement($.h.Provider,{value:{getString:(0,Xt.qY)(n,e,t),...a.pageContext,isRTL:!1,requestContext:t,isMobile:Be(a.pageContext),refTagTitleId:(0,$.N)(a.pageContext.pageTitleId,a.self&&a.self[a.pageTitleId]),isRetail:"Retail"==t.domain}},i.createElement(J.zt,{store:this.store},i.createElement(iT,{name:"btf"},i.createElement(oT,null,i.createElement(yT,null))))))}}const TT={name:"detail-btf",getProps:void 0,getHydrationProps:undefined,Component:(0,Q.s6)((0,Y.ty)(wT))};(async()=>{(0,n.y)(fT),(0,r.KL)(),await new Promise((e=>setTimeout(e))),(0,n.y)(TT),(()=>{const e="detail-hydration-complete";let t;"function"==typeof Event?t=new Event(e):(t=document.createEvent("Event"),t.initEvent(e)),"complete"===document.readyState&&document.dispatchEvent(t),window.addEventListener("load",(()=>document.dispatchEvent(t)))})()})()},"./src/shared/SPA/SpaContext.tsx":(e,t,a)=>{"use strict";a.d(t,{cG:()=>o});var n=a("./node_modules/react/index.js");const{Provider:r,Consumer:i}=n.createContext({});let s;!function(e){e.CanMultiDeleteV2="CanMultiDeleteV2",e.CanSeasonDownloadV2="CanSeasonDownloadV2",e.CanDownloadSDQuality="CanDownloadSDQuality",e.CanSelectAudioTracks="CanSelectAudioTracks",e.PassDownloadQualityInPayload="PassDownloadQualityInPayload"}(s||(s={}));const o=e=>t=>n.createElement(e,t)},"./src/shared/SPA/UWPNotifier/index.ts":(e,t,a)=>{"use strict";a.d(t,{CD:()=>n.C,lh:()=>r.lh,Fw:()=>i.Fw,N7:()=>i.N7,Pt:()=>i.Pt});var n=a("./src/shared/SPA/UWPNotifier/uwp-notifier.ts"),r=a("./src/shared/SPA/UWPNotifier/inputActions/index.ts"),i=a("./src/shared/SPA/UWPNotifier/outputActions/index.ts")},"./src/shared/SPA/UWPNotifier/inputActions/index.ts":(e,t,a)=>{"use strict";let n,r,i,s,o,l,c;a.d(t,{lh:()=>r}),function(e){e.Handshake="Handshake",e.Downloads_All="Downloads_All",e.Download_Status="Download_Status",e.AppSettings="AppSettings",e.Player_Start="Player_Start",e.Player_Closed="Player_Closed",e.AppCapabilities="AppCapabilities",e.DeviceNavigation="DeviceNavigation",e.DeeplinkNavigation="DeeplinkNavigation"}(n||(n={})),function(e){e.IDLE="IDLE",e.SEASON_IDLE="SEASON_IDLE",e.SEASON_DOWNLOADING="SEASON_DOWNLOADING",e.SEASON_COMPLETED="SEASON_COMPLETED",e.SEASON_QUEUED="SEASON_QUEUED",e.SEASON_ERROR="SEASON_ERROR",e.WAITING="WAITING",e.QUEUED="QUEUED",e.DOWNLOADING="DOWNLOADING",e.PAUSED="PAUSED",e.ERROR="ERROR",e.COMPLETED="COMPLETED",e.CANCELLED="CANCELLED",e.REMOVED="REMOVED",e.DISABLED="DISABLED",e.CANCELLING="CANCELLING",e.REMOVING="REMOVING",e.RETRYING="RETRYING",e.PAUSING="PAUSING"}(r||(r={})),function(e){e.GOOD="GOOD",e.BETTER="BETTER",e.BEST="BEST",e.DATA_SAVER="DATA_SAVER"}(i||(i={})),function(e){e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR"}(s||(s={})),function(e){e.MissingAudioLanguages="WA_9001"}(o||(o={})),function(e){e.RENTAL="rental",e.OFFLINE="offline"}(l||(l={})),function(e){e.UWP="UWP",e.XP="XP"}(c||(c={}))},"./src/shared/SPA/UWPNotifier/outputActions/index.ts":(e,t,a)=>{"use strict";let n,r,i;a.d(t,{Pt:()=>n,N7:()=>r,Fw:()=>i}),function(e){e.Handshake="Handshake",e.Logout="Logout",e.Restart="Restart",e.Downloads_GetAll="Downloads_GetAll",e.Downloads_Start="Downloads_Start",e.Download_Start="Download_Start",e.Download_Delete="Download_Delete",e.Downloads_Delete="Downloads_Delete",e.Download_Pause="Download_Pause",e.Download_Resume="Download_Resume",e.Download_Play="Download_Play",e.Download_Cancel="Download_Cancel",e.Downloads_Cancel="Downloads_Cancel",e.Download_Retry="Download_Retry",e.Settings_GetAll="Settings_GetAll",e.Settings_DownloadQuality="Settings_DownloadQuality",e.Settings_DownloadOnMobileData="Settings_DownloadOnMobileData",e.Settings_3PNotice="Settings_3PNotice",e.Settings_Feedback="Settings_Feedback",e.Profile_Switch="Profile_Switch",e.Profile_Switched="Profile_Switched",e.Profile_SwitchFailed="Profile_SwitchFailed",e.Counter="Counter",e.Logging="Logging",e.AppCapabilities_GetAll="AppCapabilities_GetAll"}(n||(n={})),function(e){e.SW="SW",e.SPA="SPA"}(r||(r={})),function(e){e.VERBOSE="Verbose",e.DEBUG="Debug",e.INFO="Information",e.WARN="Warning",e.ERROR="Error",e.FATAL="Fatal"}(i||(i={}))},"./src/shared/SPA/UWPNotifier/uwp-notifier.ts":(e,t,a)=>{"use strict";a.d(t,{C:()=>s});var n=a("./src/util/logger/logger.ts"),r=a("./src/util/utils/pubSub.ts");function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class s{constructor(e,t=new n.Oc("DVWebNodeSPA/UWPNotifier")){i(this,"myWindow",void 0),i(this,"logger",void 0),i(this,"pubSub",void 0),this.myWindow=e,this.logger=t,this.pubSub=(0,r.M)(),this.init()}static getInstance(){return this.instance||(this.instance=new s(window)),this.instance}isSubscribed(e){const t=this.pubSub.query(e);return t&&t.length>0}subscribe(e,t){try{return this.pubSub.subscribe(e.toString(),t)}catch(a){const n="UWPNotifier failed to subscribe to an event from the native app";this.logger.error(n,e,t,a)}}unsubscribe(e,t){try{return this.pubSub.unsubscribe(e.toString(),t)}catch(a){const n="UWPNotifier failed to unsubscribe to an event from the native app";return this.logger.error(n,e,t,a),Promise.reject(new Error(n))}}publish(e,t){const a=Date.now();try{this.notify(JSON.stringify({action:e,payload:t,timestamp:a}))}catch(n){this.logger.error("UWPNotifier failed to generate the payload and notify the native app",e,t,a,n)}}init(){this.myWindow.primevideoUWPNotifierHandler=this.inputDispatcher.bind(this)}notify(e){if(this.myWindow&&this.myWindow.external)try{this.myWindow.external.notify(e)}catch(e){0}}inputDispatcher(e,t){try{const a=JSON.parse(t);this.pubSub.publish(e,a)}catch(a){this.logger.error("UWPNotifier failed to parse the native action payload",e,t,a)}}}i(s,"instance",void 0)},"./src/shared/deeplink/browser.ts":(e,t,a)=>{"use strict";a.d(t,{pb:()=>p,Vl:()=>m,Y5:()=>g,uW:()=>h});var n=a("./src/util/logger/logger.ts"),r=a("./src/util/utils/analytics/recordReftag.tsx");const i=new n.Oc("DVWbNode:deeplink"),s="pv-hidden-iframe",o=e=>{var t,a;return null!==(t=null==e||null===(a=e.match(/^([^:]+)/))||void 0===a?void 0:a[1])&&void 0!==t?t:"unknown"},l=(e,t,a)=>{const n=o(e);a?((0,r.XQ)(`dv_deeplink_${n}_noapp`),i.count(`DVWeb::Deeplink::${n}::NoApp`,1,!0),t({isSuccess:!0}),window.location.assign(a)):(t({isSuccess:!1}),i.error("fallbackUrl param is required for deeplinking"))},c=(e,t)=>{const a=o(e);(0,r.XQ)(`dv_deeplink_${a}`),t({isSuccess:!0}),i.count(`DVWeb::Deeplink::${a}`,1,!0)},d=()=>document.querySelector("#"+s)||((e,t)=>{const a=document.createElement("iframe");return a.src=t,a.id=s,a.style.display="none",e.appendChild(a),a})(document.body,"about:blank"),u=(e,t,a)=>(e.addEventListener(t,a),()=>{e.removeEventListener(t,a)}),p=({logOutcome:e})=>({url:t,fallbackUrl:a})=>{navigator.msLaunchUri&&navigator.msLaunchUri(t,(()=>c(t,e)),(()=>l(t,e,a)))},m=({logOutcome:e})=>({url:t,fallbackUrl:a})=>{const n=setTimeout((()=>{l(t,e,a),i&&i()}),1e3),r=d(),i=u(window,"blur",(()=>{clearTimeout(n),i&&i(),c(t,e)}));r.contentWindow&&(r.contentWindow.location.href=t)},g=({logOutcome:e})=>({url:t,fallbackUrl:a})=>{const n=d();try{n.contentWindow&&(n.contentWindow.location.href=t),c(t,e)}catch(n){"NS_ERROR_UNKNOWN_PROTOCOL"===n.name?l(t,e,a):i.error("Unexpected error with Firefox deeplinking",n)}},h=({logOutcome:e})=>({url:t,fallbackUrl:a})=>{const n=setTimeout((()=>{l(t,e,a),i&&i()}),1e3);let r=window;for(;r!=r.parent;)r=r.parent;const i=u(r,"blur",(()=>{clearTimeout(n),i&&i(),c(t,e)}));window.location.assign(t)}},"./src/shared/deeplink/index.ts":(e,t,a)=>{"use strict";a.d(t,{b:()=>l});var n=a("./src/shared/deeplink/url.ts"),r=a("./src/shared/deeplink/mshop.ts"),i=a("./src/shared/deeplink/browser.ts");const s=new(a("./src/util/logger/logger.ts").Oc)("DVWebNode:deeplink"),o=(e,t)=>e({logOutcome:({isSuccess:e})=>{s.count(`DVWebNode:deeplinking:${t}:${e?"success":"failure"}`,1,!1)}}),l={URL:o(n.t,"url"),URL_EMBEDDED:o(n.t,"urlEmbedded"),MSHOP_ANDROID:o(r.Q,"mshopAndroid"),MSHOP_ANDROID_EMBEDDED:o(r.Q,"mshopAndroidEmbedded"),MSHOP_IOS:o(r.l,"mshopIos"),IOS_LEGACY:o(n.t,"iosLegacy"),WIN10_EDGE:o(i.pb,"win10Edge"),WIN10_FIREFOX:o(i.Vl,"win10Firefox"),WIN10_FIREFOX_LEGACY:o(i.Y5,"win10FirefoxLegacy"),WIN10_CHROME:o(i.uW,"win10Chrome"),MAC_OS:o(i.Vl,"macOS")}},"./src/shared/deeplink/mshop.ts":(e,t,a)=>{"use strict";a.d(t,{l:()=>s,Q:()=>o});var n=a("./src/util/utils/analytics/recordReftag.tsx");const r="dv_web_dl_success",i="dv_web_dl_failure",s=({logOutcome:e})=>({url:t,fallbackUrl:a})=>{var s;null===(s=window.P)||void 0===s||s.when("mash").execute((s=>{s.launchIntentURL({url:t,successCallback:()=>{e({isSuccess:!0}),(0,n.XQ)(r)},failCallback:async()=>{a?(e({isSuccess:!0}),await(0,n.XQ)(r),window.location.assign(a)):(e({isSuccess:!1}),await(0,n.XQ)(i))}})}))},o=({logOutcome:e})=>({url:t,fallbackUrl:a})=>{var s;null===(s=window.P)||void 0===s||s.when("mash").execute((s=>{s.canLaunchIntentURL({url:t,successCallback:async o=>{o?(await(0,n.XQ)(r),e({isSuccess:!0}),s.launchIntentURL({url:t})):(await(0,n.XQ)(i),e({isSuccess:!1}),a&&s.launchIntentURL({url:a}))},failCallback:()=>{e({isSuccess:!1}),(0,n.XQ)(i)}})}))}},"./src/shared/deeplink/url.ts":(e,t,a)=>{"use strict";a.d(t,{t:()=>n});const n=({logOutcome:e})=>({url:t})=>{e({isSuccess:!0}),window.location.assign(t)}},"./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts":(e,t,a)=>{"use strict";let n,r,i;a.d(t,{c7:()=>n,wW:()=>r,ns:()=>i,sW:()=>s,W0:()=>o,qB:()=>l}),function(e){e.ATVMyStuff="ATVMyStuff",e.ATVProfiles="ATVProfiles",e.ATVDetail="ATVDetail",e.ATVHome="ATVHome",e.ATVBrowse="ATVBrowse",e.ATVPerson="ATVPerson",e.ATVUnknown="ATVUnknown",e.ATVDownloads="ATVDownloads",e.ATVSubscription="ATVSubscription",e.ATVSearch="ATVSearch",e.ATVMerch="ATVMerch"}(n||(n={})),function(e){e.Library="Library",e.Watchlist="Watchlist",e.Channels="Channels",e.Following="Following",e.Home="Home",e.Store="Store",e.FreeToMe="FreeToMe",e.Search="Search",e.Browse="Browse",e.WhosWatching="WhosWatching",e.Manage="Manage",e.Edit="Edit",e.Associate="Associate",e.Create="Create",e.Season="Season",e.Movie="Movie",e.Event="Event",e.InstantVideo="InstantVideo",e.Actor="Actor",e.Main="Main",e.Unknown="Unknown"}(r||(r={})),function(e){e.Explore="pvwindowsapp-explore",e.DetailPage="pvwindowsapp-dp",e.AccList="pvwindowsapp-al",e.WindowsApp="pvwindowsapp-main",e.Unknown="pvwindowsapp-unknown"}(i||(i={}));const s={[n.ATVMyStuff]:i.AccList,[n.ATVProfiles]:i.AccList,[n.ATVDetail]:i.DetailPage,[n.ATVPerson]:i.DetailPage,[n.ATVHome]:i.Explore,[n.ATVBrowse]:i.Explore,[n.ATVSearch]:i.Explore,[n.ATVMerch]:i.Explore,[n.ATVSubscription]:i.Explore,[n.ATVUnknown]:i.WindowsApp,[n.ATVDownloads]:i.WindowsApp};n.ATVMyStuff,r.Library,r.Watchlist,r.Channels,r.Following,n.ATVProfiles,r.Associate,r.Edit,r.Manage,r.WhosWatching,r.Create,n.ATVDetail,r.Season,r.Movie,r.InstantVideo,n.ATVPerson,r.Actor,n.ATVHome,r.Home,r.Store,r.FreeToMe,n.ATVBrowse,r.Browse,n.ATVSearch,r.Search,n.ATVUnknown,r.Unknown,n.ATVDownloads,r.Main,n.ATVSubscription,r.Channels;let o,l,c;!function(e){e.SignOut="SignOut",e.PlayDownload="PlayDownload",e.Download="Download",e.Click="Click",e.Back="Back",e.AddToWatchlist="AddToWatchlist",e.RemoveFromWatchlist="RemoveFromWatchlist"}(o||(o={})),function(e){e.PageHit="pageHit",e.PageTouch="pageTouch",e.PopUp="popUp",e.BackForwardButton="bf=10"}(l||(l={})),function(e){e.Browse="browse",e.Store="OFFER_FILTER=TVOD",e.Channels="OFFER_FILTER=SUBSCRIPTIONS",e.Merch="merch",e.Channels_subscription="subscription",e.FreeToMe="on",e.Manage="manage",e.Edit="edit",e.Editing="editing",e.Associate="associate",e.Create="create"}(c||(c={}))},"./src/shared/deviceProxy/Clickstream/ClickstreamClient.ts":(e,t,a)=>{"use strict";a.d(t,{E:()=>g});var n=a("./src/shared/deviceProxy/ServiceClientBase.ts"),r=a("./src/util/logger/logger.ts"),i=a("./src/util/api/util.ts"),s=a("./src/shared/deviceProxy/DeviceProxy.ts"),o=a("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),l=a("./src/shared/deviceProxy/Clickstream/ClickstreamUtilities.ts"),c=a("./src/shared/deviceProxy/Clickstream/ClickstreamSchemaValidator.ts"),d=a("./src/shared/deviceProxy/Clickstream/DefaultClickstreamSchema.ts"),u=(a("./src/widgets/DVWebNodeSPA/utils/csm.ts"),a("./src/shared/utils/LoggerWrapper.ts"));function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const m={size:5,duration:15};class g{constructor({context:e,DTID:t,batchParameters:a=m,homeRegion:h}){p(this,"DTID",void 0),p(this,"context",void 0),p(this,"serviceClient",void 0),p(this,"queue",void 0),p(this,"dcsSchemaValidator",new c.j(d.I3)),p(this,"logger",new u.G(new r.Oc("DVWebNode:ClickstreamClient"))),p(this,"homeRegion",void 0),p(this,"buildURL",(()=>{const e=new URLSearchParams({...(0,s.B$)(this.context),firmware:"DVWebNode"});return`${(0,s.WA)(this.context,this.homeRegion)}/${g.CLICKSTREAM_URL}?${e.toString()}`})),p(this,"buildEntry",((e,t)=>Object.assign(t,{hitType:e,startTime:Date.now(),deviceTypeId:this.DTID}))),p(this,"getAdditionalParameters",(()=>({isStressTest:String(Boolean(this.context.isTest)),clientIp:this.context.customerIPAddress,currentClientTime:Date.now(),currentTerritory:this.context.currentTerritory,customerId:this.context.customerID,deviceId:this.context.deviceID,deviceTypeId:this.DTID,identityContext:this.context.identityContext,marketplaceId:this.context.marketplaceID,preferredLanguage:this.context.locale,sessionId:this.context.sessionID,videoCountryOfRecord:this.context.recordTerritory}))),p(this,"enqueue",(e=>{const t=this.dcsSchemaValidator.isValid(e);t.isValid?this.queue.add(e):(this.logger.debug("Invalid Clickstream entry",{validationError:(null==t?void 0:t.errorMessage)||"",invalidEntry:JSON.stringify(e)}),this.logger.count("ClickstreamClient::InvalidEntry",{[e.clientVariant]:1}))})),p(this,"call",(async e=>{const t=JSON.stringify({EntryList:e,...this.getAdditionalParameters()});try{await this.serviceClient.post({operationName:"Clickstream",uri:this.buildURL(),opts:{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:t}},g.strategy)}catch(e){this.logger.warn("Clickstream client failed to execute",e),e instanceof i.jZ&&this.logger.debug("Clickstream client - Invalid Status Code request",{homeRegion:this.homeRegion||""})}})),p(this,"hit",((e,t,a,n,r)=>{const i=this.buildEntry(o.qB.PageHit,{action:o.W0.Click,pageType:e,subPageType:t,clientVariant:a,...n&&{refMarker:n},...r&&{pageTypeId:r}});this.enqueue(i)})),p(this,"hva",((e,t,a,n,r,i,s)=>{const l=this.buildEntry(null!=s?s:o.qB.PageTouch,{action:a,pageType:e,subPageType:t,clientVariant:n,...r&&{refMarker:r},...i&&{pageTypeId:i}});this.enqueue(l)})),this.context=e,this.DTID=t,this.serviceClient=new n.v({context:this.context,logger:this.logger,logErrorAsWarning:!0}),this.queue=new l.V(a,this.call),this.homeRegion=h}}p(g,"CLICKSTREAM_URL","cdp/usage/Clickstream"),p(g,"strategy",{maxRetries:0,retryOnException:()=>!1})},"./src/shared/deviceProxy/Clickstream/ClickstreamSchemaValidator.ts":(e,t,a)=>{"use strict";a.d(t,{j:()=>s});var n=a("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),r=a("./src/shared/deviceProxy/Clickstream/DefaultClickstreamSchema.ts");function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class s{constructor(e){i(this,"clickstreamSchemaConfiguration",r.I3),i(this,"isClickstreamPayload",((e,t)=>!!(e&&"object"==typeof e&&e instanceof Object&&Object.getPrototypeOf(e)===Object.prototype)||(t.message="Clickstream payload is not an object",!1))),e&&(this.clickstreamSchemaConfiguration=e)}isValid(e){let t={message:""};return this.isClickstreamPayload(e,t)&&this.checkProperties(e,t)?{isValid:!0}:{isValid:!1,errorMessage:t.message}}checkProperties(e,t){return this.checkProperty(e,"hitType",t)&&this.checkProperty(e,"action",t)&&this.checkProperty(e,"refMarker",t)&&this.checkProperty(e,"pageType",t)&&this.checkProperty(e,"pageTypeId",t)&&this.checkProperty(e,"subPageType",t)&&this.checkProperty(e,"startTime",t)&&this.checkProperty(e,"deviceId",t)&&this.checkProperty(e,"deviceTypeId",t)&&this.checkProperty(e,"clientVariant",t)&&this.checkProperty(e,"preferredLanguage",t)&&this.checkProperty(e,"ue",t)&&this.checkProperty(e,"cf",t)&&this.checkProperty(e,"id",t)&&this.checkAdditionalData(e,"additionalData",t)&&this.checkTags(e,"tags",t)}checkProperty(e,t,a){return this.isPropertyDefined(e,t)?this.isOfSpecifiedType(e,t,this.clickstreamSchemaConfiguration[t],a)&&this.propertySpecificCheck(e,t,a):this.handleUndefinedProperty(e,t,this.clickstreamSchemaConfiguration.requiredProperties,a)}checkAdditionalData(e,t,a){return this.isPropertyDefined(e,t)?this.isPlainObject(e.additionalData,t,a):this.handleUndefinedProperty(e,t,this.clickstreamSchemaConfiguration.requiredProperties,a)}checkTags(e,t,a){return this.isPropertyDefined(e,t)?this.isArray(e.tags,"tags",a)&&e.tags.every((e=>this.isOfSpecifiedType(e,"tags","string",a))):this.handleUndefinedProperty(e,t,this.clickstreamSchemaConfiguration.requiredProperties,a)}handleUndefinedProperty(e,t,a,n){return!this.isRequired(e,t,a)||(this.setUndefinedErrorMessage(t,n),!1)}isRequired(e,t,a){return a.indexOf(t)>=0||this.isMaybeRequired(e,t)}isMaybeRequired(e,t){if("pageTypeId"===t){const t=e.pageType,a=e.hitType,r=e.action;return a==n.qB.PageHit&&t==n.c7.ATVDetail&&r==n.W0.Click||a==n.qB.PageTouch&&(r==n.W0.Download||r==n.W0.PlayDownload)}return!1}isPropertyDefined(e,t){return Object.hasOwnProperty.call(e,t)}isPlainObject(e,t,a){const n=e instanceof Object&&Object.getPrototypeOf(e)===Object.prototype;return n||this.setIncorrectTypeErrorMessage(t,a,e),n}isArray(e,t,a){const n=Array.isArray(e);return n||this.setIncorrectTypeErrorMessage(t,a,e),n}isOfSpecifiedType(e,t,a,n){const r=Array.isArray(a)&&a.indexOf(e[t])>=0||typeof e[t]===a;return r||this.setIncorrectTypeErrorMessage(t,n,e[t]),r}setUndefinedErrorMessage(e,t){t.message=`ClickstreamValidationFailed - ${e} is not defined`}setIncorrectTypeErrorMessage(e,t,a){Array.isArray(a)?a="Array":a instanceof Object&&Object.getPrototypeOf(a)===Object.prototype&&(a="Object"),t.message=`ClickstreamValidationFailed - ${e} is of incorrect type, received value is ${a}`}propertySpecificCheck(e,t,a){switch(t){case"subPageType":return this.checkSubPageType(e,a);case"refMarker":return this.checkRefMarker(e,a);default:return!0}}checkSubPageType(e,t){const a=e.subPageType;return!!a.match("^([A-Z][a-z0-9]+|[A-Z0-9]+)+$")||(t.message=`ClickstreamValidationFailed - subPageType is not CapitalizedCamelCase, received value is ${a}`,!1)}checkRefMarker(e,t){const a=e.refMarker;return a.match("^[A-Za-z0-9_|\\-]*$")?a.match("^[A-Za-z].*")?a.match(".*[A-Za-z0-9]$")?a.match("^(?!.*([-_|]){2,}).*$")?!(a.length<2||a.length>64)||(t.message=`ClickstreamValidationFailed - refMarker must be within the length limits, received value is ${a}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must not contain repeating punctuation, received value is ${a}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must end with alphanumeric character, received value is ${a}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must start with alphabetic character, received value is ${a}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must contain alphanumeric characters and punctuation only, received value is ${a}`,!1)}}},"./src/shared/deviceProxy/Clickstream/ClickstreamUtilities.ts":(e,t,a)=>{"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{V:()=>i});class r{constructor(){n(this,"store",new Map),n(this,"push",(e=>{const t=this.store.size+e.startTime;return this.store.set(t,e),t})),n(this,"delete",(e=>{this.store.delete(e)})),n(this,"values",(()=>Array.from(this.store.values()))),n(this,"clear",(()=>{this.store.clear()}))}}class i{constructor(e,t){n(this,"storage",void 0),n(this,"callback",void 0),n(this,"parameters",void 0),n(this,"interval",null),n(this,"timer",(()=>{this.interval=setInterval(this.execute,1e3*this.parameters.duration)})),n(this,"add",(e=>{const t=this.storage.push(e);return this.storage.store.size===this.parameters.size?this.execute():null===this.interval&&this.timer(),t})),n(this,"remove",(e=>{this.storage.delete(e)})),n(this,"execute",(()=>{this.callback(this.storage.values()),this.reset()})),n(this,"reset",(()=>{this.storage.clear(),null!==this.interval&&clearInterval(this.interval),this.interval=null})),this.storage=new r,this.callback=t,this.parameters=e}}},"./src/shared/deviceProxy/Clickstream/DefaultClickstreamSchema.ts":(e,t,a)=>{"use strict";a.d(t,{I3:()=>r});var n=a("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts");const r={hitType:Object.values(n.qB),action:Object.values(n.W0),pageType:Object.values(n.c7),subPageType:"string",clientVariant:Object.values(n.ns),refMarker:"string",pageTypeId:"string",startTime:"number",deviceTypeId:"string",deviceId:"string",pageTypeIdSource:"string",preferredLanguage:"string",ue:"number",cf:"number",af:"number",id:"number",requiredProperties:["hitType","pageType","subPageType","startTime","deviceTypeId","action","clientVariant","refMarker"]}},"./src/shared/deviceProxy/ClientsideImpressionClient.ts":(e,t,a)=>{"use strict";a.d(t,{g:()=>o});var n=a("./src/util/utils/device.ts"),r=a("./src/util/csm/csm.tsx"),i=a("./src/shared/deviceProxy/DeviceProxy.ts");function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class o{constructor(e){s(this,"context",void 0),this.context=e}buildClientsideImpressionUri(){const e={...(0,i.B$)(this.context),deviceTypeID:o.html5DTID,deviceID:"Web",firmware:"DVWebNode"},t=new URLSearchParams(e);return`${(0,i.WA)(this.context)}/${o.clientsideImpressionUrl}?${t.toString()}`}getParameters(e){return{...(0,i.B$)(this.context),...e,sessionId:this.context.sessionID,deviceTypeID:(0,n.dz)().deviceTypeId}}async logImpression(e){const t=this.buildClientsideImpressionUri(),a=this.getParameters(e),n="sendBeacon"in navigator&&!Boolean(window.chrome);if(n){(0,r.cL)("DVWebNode::ClientsideImpressionClient::sendBeaconAttempt",1,!1);const e=new Blob([JSON.stringify(a)],{type:"application/json"});return navigator.sendBeacon(t,e)}return(0,r.cL)("DVWebNode::ClientsideImpressionClient::fetchAttempt",1,!1),fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),keepalive:!0,credentials:"include"}).then((()=>((0,r.cL)(`DVWebNode::ClientsideImpressionClient::${n?"sendBeacon":"fetch"}Success`,1,!1),!0)),(()=>((0,r.cL)(`DVWebNode::ClientsideImpressionClient::${n?"sendBeacon":"fetch"}Reject`,1,!1),!1))).catch((()=>((0,r.cL)(`DVWebNode::ClientsideImpressionClient::${n?"sendBeacon":"fetch"}Caught`,1,!1),!1)))}}s(o,"clientsideImpressionUrl","cdp/usage/ClientsideImpression"),s(o,"html5DTID",i.V4.WEB)},"./src/shared/deviceProxy/DeviceProxy.ts":(e,t,a)=>{"use strict";a.d(t,{V4:()=>i,WA:()=>s,B$:()=>o});var n=a("./src/util/utils/device.ts"),r=a("./src/shared/deviceProxy/marketplaceUtils.ts");const i={WEB:"AOAGZA014O5RE",WINDOWS:"A3OEMT9S4WNMK"},s=(e,t)=>`https://${(0,r.fJ)(e.marketplaceID,t)}`,o=e=>({deviceID:e.deviceID,deviceTypeID:(0,n.dz)().deviceTypeId,gascEnabled:(0,r.ST)()?"true":"false",marketplaceID:e.marketplaceID,uxLocale:e.locale})},"./src/shared/deviceProxy/PVClickstreamClient.ts":(e,t,a)=>{"use strict";a.d(t,{U:()=>d});var n=a("./src/shared/deviceProxy/Clickstream/ClickstreamClient.ts"),r=a("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),i=a("./src/shared/deviceProxy/DeviceProxy.ts"),s=a("./src/widgets/DVWebNodeSPA/utils/refMarkers.ts");function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends n.E{constructor({context:e,homeRegion:t}){super({context:e,DTID:l.getDTID(),homeRegion:t}),o(this,"previousParameters",void 0),o(this,"onNavigation",void 0),o(this,"backButtonData",void 0),o(this,"getClientVariant",(e=>{var t;return null!==(t=r.sW[e])&&void 0!==t?t:r.ns.Unknown})),o(this,"getRefmarker",(()=>{const e=window.location.href.match(s.y9);return e&&e[1]||"atv_unknown"})),o(this,"getParameters",((e,t,a)=>({pageType:e,subPageType:t,refMarker:a||this.getRefmarker(),clientVariant:this.getClientVariant(e)}))),o(this,"recordBackButton",(()=>{const e=this.getRefmarker();this.backButtonData={ref:e+"_back",hitType:r.qB.BackForwardButton}})),o(this,"clearBackButton",(()=>{this.backButtonData=void 0})),o(this,"navigation",(e=>{const{pType:t,sPageType:a,ref:n,pageTypeId:i}=e;try{const{pageType:e,subPageType:s,refMarker:o,clientVariant:l}=this.getParameters(t,a,n);this.previousParameters={pageType:e,subPageType:s,refMarker:o,clientVariant:l},this.backButtonData&&(this.hva(e,s,r.W0.Back,l,this.backButtonData.ref,i,this.backButtonData.hitType),this.clearBackButton()),this.hit(e,s,l,o,i),this.onNavigation&&this.onNavigation({pageType:e,subPageType:s})}catch(e){this.logger.warn("PVClickstream navigation() error",e)}})),o(this,"action",(e=>{const{action:t,pType:a,sPageType:n,ref:r,pageTypeId:i}=e;try{const{pageType:e,subPageType:s,refMarker:o,clientVariant:l}=a&&n?this.getParameters(a,n,r):this.previousParameters;this.previousParameters={pageType:e,subPageType:s,refMarker:o,clientVariant:l},this.hva(e,s,t,l,null!=r?r:o,i)}catch(e){this.logger.warn("PVClickstream action() error",e)}})),o(this,"setOnNavigation",(e=>this.onNavigation=e)),this.previousParameters={pageType:r.c7.ATVUnknown,subPageType:r.wW.Unknown,clientVariant:r.ns.Unknown,refMarker:""}}}o(l,"getDTID",(()=>i.V4.WEB));let c=null;const d=e=>(null==c&&void 0!==(null==e?void 0:e.context)&&(c=new l(e)),c)},"./src/shared/deviceProxy/ServiceClientBase.ts":(e,t,a)=>{"use strict";a.d(t,{v:()=>s});var n=a("./src/util/api/util.ts");function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const i={credentials:"include",headers:{},body:void 0};class s{constructor({context:e,logger:t,retryLogic:a,logErrorAsWarning:n=!1}){r(this,"context",void 0),r(this,"logger",void 0),r(this,"retryLogic",void 0),r(this,"logErrorAsWarning",void 0),r(this,"defaultRetryCondition",(()=>!1)),r(this,"logError",((e,t,a)=>{this.logErrorAsWarning?this.logger.warn(t,{errorMessage:null==e?void 0:e.message,...a}):this.logger.error(e,t,a)})),this.context=e,this.logger=t;const i={maxRetries:0,retryOnStatusCode:this.defaultRetryCondition,retryOnException:this.defaultRetryCondition,retryOnDeserializationException:this.defaultRetryCondition};this.retryLogic={...i,...a},this.logErrorAsWarning=n}sleep(e){return new Promise((t=>setTimeout(t,e)))}async get(e,t){const a={...e.opts,method:"GET"};return this.call(null==e?void 0:e.operationName,this.buildURL(e.uri,e.query),a,t)}async post(e,t){const a={...e.opts,method:"POST"};return this.call(null==e?void 0:e.operationName,this.buildURL(e.uri,e.query),a,t)}buildURL(e,t={}){let a;try{a=new URL(e)}catch(t){a=new URL(e,window.location.origin)}for(const e in t)a.searchParams.set(e,`${t[e]}`);return a.toString().replace(/\/$/,"")}constructPostRequest({body:e,...t}){return{...i,...t,body:e?JSON.stringify(e):void 0}}async call(e="undefined",t,a,n){const r={...this.retryLogic,...n};let i=0;do{const n={};try{if(i>0&&r.backoffStrategy){const e=r.backoffStrategy(i);await this.sleep(e)}const s=await this.fetchResponse(e,t,a,n);let o=await this.parseResponse(e,s,n);return n.Success=1,o}catch(s){if(this.shouldRetry(s,t,a,e,n,r)&&i!=r.maxRetries)continue;throw n.Failure=1,s}finally{0!=i&&(n.Retry=1),this.logger.count(`Call:${e}`,n),i++}}while(i<=((null==r?void 0:r.maxRetries)||0));return Promise.reject()}async parseResponse(e,t,a){let r;try{r=await t.json()}catch(t){const r=new n.xU(t.message);throw this.logError(r,"Could not parse response",{operationName:e}),a.DeserializationException=1,r}return r}async fetchResponse(e,t,a,r){const i=await fetch(t,a);if(r[`StatusCode_${i.status}`]=1,!i.ok){const a=await i.text(),r=new n.jZ(a,i.status);throw this.logError(r,"Non 2xx status code received",{statusCode:i.status,operationName:e,url:t,marketplaceId:this.context.marketplaceID,currentTerritory:this.context.currentTerritory,recordTerritory:this.context.recordTerritory,geoToken:this.context.geoToken,location:window.location.href}),r}return i}shouldRetry(e,t,a,r,i,s){return e instanceof n.jZ&&s&&s.retryOnStatusCode?s.retryOnStatusCode(e,t,a):e instanceof n.xU&&s&&s.retryOnDeserializationException?s.retryOnDeserializationException(e,t,a):(i.Exception=1,this.logError(e,`${a.method} request threw an exception`,{url:t,operationName:r}),!(!s||!s.retryOnException)&&s.retryOnException(e,t,a))}}},"./src/shared/deviceProxy/marketplaceUtils.ts":(e,t,a)=>{"use strict";a.d(t,{fJ:()=>o,ST:()=>d});var n=a("./src/util/utils/marketplace.ts");var r="EU",i="NA",s="FE";const o=(e,t)=>{let a="";switch(a=".primevideo.com"===c()&&t?t:l(e),a){case r:return`atv-ps-eu${c()}`;case s:return`atv-ps-fe${c()}`;default:return`atv-ps${c()}`}},l=e=>{switch(e){case n.HZ.UK:case n.HZ.DE:case n.HZ.ROW_EU:case n.HZ.ROE_EU:return r;case n.HZ.JP:case n.HZ.ROW_FE:return s;case n.HZ.US:case n.HZ.ROW_NA:default:return i}},c=()=>window.location.host.includes("amazon.co.uk")?".amazon.co.uk":window.location.host.includes("amazon.de")?".amazon.de":window.location.host.includes("amazon.co.jp")?".amazon.co.jp":window.location.host.includes("primevideo.com")?".primevideo.com":".amazon.com",d=()=>".primevideo.com"===c()},"./src/shared/player/integration/config.ts":(e,t,a)=>{"use strict";a.d(t,{c6:()=>r,QD:()=>c,it:()=>d});var n=a("./src/util/utils/analytics/analytics.ts");const r="dv-web-player",i=()=>{let e=document.getElementById(r);return e||(e=document.createElement("div"),e.setAttribute("id",r),document.body.appendChild(e),e)},s={Detail:"f22dbddb-ef2c-48c5-8876-bed0d47594fd",DetailAndroid:"898eb3b8-96c0-4c6b-baa3-2d253860be8c",DetailAndroidMShop:"98d383c3-632a-4872-8ef8-7cc10d033066",Live:"b4f777f2-3153-4c55-8aa7-4645fe264be1",Home:"9ee9ba9b-f89c-41bb-8aa0-4db6e7f24cad",AIVWatchlist:"8e377055-28b0-4475-a3e7-f909ebcad6f1",YourVideoLibrary:"1e2f7321-aba1-4bd3-bdfc-a63777d869af",SPA:"933adc82-54c5-4fe0-9273-f1e188456161",PersonPage:"41e7965c-89b8-4967-bdd3-74e2a8f06636",ChannelsSubscription:"66d54d28-d754-4b11-b74d-427a03909d93",Following:"74392e3c-4c00-479e-90c8-f4d42aae8705",EPG:"bdd74b62-c362-46c8-86f0-47e300702607",Search:"47c62571-58c9-4572-9a75-52f68e019cea",Browse:"47c62571-58c9-4572-9a75-52f68e019cea"},o=e=>s[e],l={Detail:n.am.Detail,Live:n.am.Live,DetailAndroid:n.am.Detail,DetailAndroidMShop:n.am.Detail,Home:n.am.Home,AIVWatchlist:n.am.MyStuff,YourVideoLibrary:n.am.MyStuff,SPA:n.am.SPA,PersonPage:n.am.Person,ChannelsSubscription:n.am.Channels,Following:n.am.Following,EPG:n.am.EPG,Search:n.am.Search,Browse:n.am.Browse},c=e=>l[e],d=e=>{const{marketplaceId:t,sessionId:a,playerBeta:n,customerId:r,locale:s,pageType:l,deviceId:c}=e,d={marketplaceId:t,sessionId:a,playerBeta:n,customerId:r,locale:s,deviceId:c,domElement:i(),clientId:o(l)};var u;return(u=d)&&Object.entries(u).forEach((([e,t])=>void 0===t&&delete u[e])),d}},"./src/shared/player/integration/logger.ts":(e,t,a)=>{"use strict";a.d(t,{cn:()=>r,r1:()=>i});var n=a("./src/util/utils/analytics/analytics.ts");const r=(e,t)=>{const a=((e,t)=>{const{trailer:a,asin:r,lcid:i,startEpoch:s}=t||{},o={trailer:a,titleId:r,lcid:i,secondsPlayed:e.action!==n.m0.PlaybackClicked&&s?Math.floor(Date.now()/1e3)-s:void 0};return(0,n.tu)(e,o)})(e,t);fetch(a,{method:"POST"})},i=e=>t=>r(e,t)},"./src/shared/player/integration/playbackArea.tsx":(e,t,a)=>{"use strict";a.d(t,{ET:()=>h,XM:()=>v,cr:()=>E});var n,r=a("./node_modules/react/index.js"),i=a("./src/shared/deeplink/index.ts"),s=a("./src/util/logger/logger.ts"),o=a("./src/util/utils/analytics/analytics.ts"),l=a("./src/util/utils/analytics/recordReftag.tsx"),c=a("./src/util/wrappers/ArgsContext.tsx"),d=a("./node_modules/@amzn/dv-marin-tracking-js-library/dist/index.js"),u=a("./src/shared/SPA/SpaContext.tsx"),p=a("./src/shared/player/integration/logger.ts"),m=a("./src/shared/player/integration/config.ts");const g=new s.Oc("DVWebNode:deeplink"),h=r.createContext({onPlay:null}),_=(e,t)=>{i.b[t]({url:e.playbackUrl,fallbackUrl:e.fallbackUrl})},f=e=>(null==e?void 0:e.isBonus)||(null==e?void 0:e.sequenceNumber)&&e.sequenceNumber>=1&&e.sequenceNumber<=3,v=(e,t,a,r,s,c,u,h,v,b,E,y,w)=>T=>{var D;const I=(0,m.QD)(r),C=null!=T&&T.triggerLocation?`${r}:${T.triggerLocation}`:r,P="dv_play_action",S=null==T||null===(D=T.contentConfig)||void 0===D?void 0:D.asin,k=e?t=>{(0,p.cn)({action:o.m0.PlaybackClicked,pageType:I,refTag:P},t.contentConfig),e(t)}:null;const{trailer:R}=T.contentConfig;!u||R||T.isBonus||("Detail"===r||"DetailAndroid"===r?"Prime"===T.subscriptionName&&(0,d.sendConversionTrackingRequest)(d.ConversionType.SVOD_ANY_STREAM,null!=h?h:"INVALID_TERRITORY"):(0,d.sendConversionTrackingRequest)(d.ConversionType.UNDEFINED_ANY_STREAM,null!=h?h:"INVALID_TERRITORY"));const x=(T.contentConfig.videoType||"").toLowerCase(),N="trailer"===x?a:t;g.count(`DVWebNode:LaunchType:${r}:${N}`,1,!1),"feature"===x&&(e=>!e||e.supportsDrm)(s)&&["MSHOP_ANDROID_EMBEDDED","URL_EMBEDDED"].includes(N)?"MSHOP_ANDROID_EMBEDDED"===N?((e,t,a,n)=>{var r;const i=()=>{f(t)&&e?e(t):n?n():_(t,a)};null===(r=window.P)||void 0===r||r.when("mash").execute((e=>{e.canLaunchIntentURL({url:t.playbackUrl,successCallback:e=>{e?_(t,a):i()},failCallback:()=>{i()}})}))})(k,T,N,c):((e,t,a)=>{f(t)&&e?e(t):_(t,a)})(k,T,N):"EMBEDDED"===N?"feature"===x&&v&&v(S)&&b?(b(S),n.count("PlaybackOrigin:NativePlayback",{[C]:1})):k?(k(T),"feature"===x&&E&&E(S)&&n.count("fallback-streaming",{downloadingInComplete:1}),T.refMarker&&(0,l.XQ)(T.refMarker,y,w,S)):((0,p.cn)({action:o.m0.PlaybackClickUnhandled,pageType:I,refTag:P},T.contentConfig),g.error("Missing onPlay for Embedded Player",{pageType:y,subPageType:w})):i.b.hasOwnProperty(N)?_(T,N):((0,p.cn)({action:o.m0.PlaybackClickUnhandled,pageType:I,refTag:P},T.contentConfig),g.error("Unhandled Playback",{pageType:y,subPageType:w,launchTypeToApply:N}))},b=({onPlay:e,launchType:t,trailerLaunchType:a,configPageType:n,playerCapabilities:i,onDownloadAppRequired:s,children:o,enableMarinTracking:l,context:c,hasDownloadedToNative:d,triggerNativeOfflinePlayback:u,isDownloadQueuedOrDownloading:p,pageType:m,subPageType:g})=>{const _=v(e,t,a,n,i,s,l,null==c?void 0:c.recordTerritory,d,u,p,m,g);return r.createElement(h.Provider,{value:{onPlay:_}},o)};b.displayName="PlaybackArea";const E=(0,u.cG)((0,c.s6)(b))},"./src/shared/utils/LoggerWrapper.ts":(e,t,a)=>{"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{G:()=>r});class r{constructor(e){n(this,"logger",void 0),n(this,"warn",((e,t)=>{this.logger.warn(e,t)})),n(this,"error",((e,t,a)=>{this.logger.error(t,a,e)})),n(this,"debug",((e,t)=>{this.logger.debug(e,t)})),n(this,"info",((e,t)=>{this.logger.info(e,t)})),n(this,"fatal",((e,t,a)=>{this.logger.fatal(t,a,e)})),n(this,"count",((e,t)=>{this.logger.count(e,1,!1),t&&Object.entries(t).forEach((([t,a])=>{this.logger.count(`${e}::${t}`,a,!1)}))})),this.logger=e}}},"./src/shared/utils/maturityRatings/ratingMap.ts":(e,t,a)=>{"use strict";a.d(t,{D:()=>n});const n={NZ:{g:{stringId:"vcc_maturity_rating_oflc_g",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/g.png"},pg:{stringId:"vcc_maturity_rating_oflc_pg",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/pg.png"},13:{stringId:"vcc_maturity_rating_cvod_13",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/cvod/13.png"},rp13:{stringId:"vcc_maturity_rating_oflc_rp13",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/rp13.png"},r13:{stringId:"vcc_maturity_rating_oflc_r13",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r13.png"},r15:{stringId:"vcc_maturity_rating_oflc_r15",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r15.png"},m:{stringId:"vcc_maturity_rating_oflc_m",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/m.png"},16:{stringId:"vcc_maturity_rating_cvod_16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/cvod/16.png"},rp16:{stringId:"vcc_maturity_rating_oflc_rp16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/rp16.png"},r16:{stringId:"vcc_maturity_rating_oflc_r16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r16.png"},18:{stringId:"vcc_maturity_rating_cvod_18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/cvod/18.png"},rp18:{stringId:"vcc_maturity_rating_oflc_rp18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/rp18.png"},r18:{stringId:"vcc_maturity_rating_oflc_r18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r18.png"},r:{stringId:"vcc_maturity_rating_oflc_r",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r.png"}}}},"./src/util/utils/titleType.ts":(e,t,a)=>{"use strict";a.d(t,{Hv:()=>o,g2:()=>l,rM:()=>c,ee:()=>d});const n="EVENT",r="LIVE_EVENT_ITEM",i="VOD_EVENT_ITEM",s=[n,r,i],o=(e,t)=>Boolean(e&&!t&&"EPISODE"===e.toUpperCase()),l=e=>!!e&&s.includes(e.toUpperCase()),c=e=>Boolean(e&&!/^amzn1.dv.icid/.test(e)),d=e=>Boolean(e&&"MOVIE"===e.toUpperCase())},"./src/widgets/DVWebNodeDetail/actions/constants.ts":(e,t,a)=>{"use strict";let n;a.d(t,{k:()=>n}),function(e){e.STORE_MERGE="@@dp/STORE_MERGE",e.CHANGE_PAGE="@@dp/CHANGE_PAGE",e.LIVE_PAGE="@@lp/LIVE_PAGE",e.WatchlistToggle="@@dp/WatchlistToggle",e.WatchlistToggleFailed="@@dp/WatchlistToggleFailed",e.ClearWatchlistToggleFailure="@@dp/ClearWatchlistToggleFailure",e.GetDevices="@@dp/GetDevices",e.GetDevicesFailed="@@dp/GetDevicesFailed",e.RefreshEpisode="@@dp/ActionBox/RefreshEpisode",e.RefreshAtfActionBox="@@dp/ActionBox/RefreshAtfActionBox",e.RefreshBtfActionBoxes="@@dp/ActionBox/RefreshBtfActionBoxes",e.TriggerPurchase="@@dp/ActionBox/TriggerPurchase",e.PurchaseCancelled="@@dp/ActionBox/PurchaseCancelled",e.PurchaseFailed="@@dp/ActionBox/PurchaseFailed",e.TriggerRefund="@@dp/ActionBox/TriggerRefund",e.RefundFailed="@@dp/ActionBox/RefundFailed",e.RefundCancelled="@@dp/ActionBox/RefundCancelled",e.CreateBanner="@@dp/CreateBanner",e.ClearBanner="@@dp/ClearBanner",e.SetPlayerCapabilities="@@dp/player/SetPlayerCapabilities",e.PlaybackStart="@@dp/player/PlaybackStart",e.PlaybackFailed="@@dp/player/PlaybackFailed",e.PlaybackClosed="@@dp/player/PlaybackClosed",e.UpdateShowCancellationWinback="@@dp/UpdateShowCancellationWinback",e.TriggerUpsellApp="@@dp/TriggerUpsellApp",e.ClearUpsellApp="@@dp/ClearUpsellApp",e.GetTranslatedReviews="@@dp/GetTranslatedReviews",e.TranslatedReviewsFailed="@@dp/TranslatedReviewsFailed",e.ChangeTranslatedReviewStatus="@@dp/ChangeTranslatedReviewStatus",e.UpdatedBatchTranslationStatus="@@dp/UpdatedBatchTranslationStatus",e.SetPublicName="@@dp/SetPublicName",e.UpdatePublicNameState="@@dp/UpdatePublicNameState",e.SubmitCustomerReview="@@dp/SubmitCustomerReview",e.UpdateSubmissionState="@@dp/UpdateSubmissionState",e.UpdateRatingState="@@dp/UpdateRatingState",e.ClearSubmissionStates="@@dp/ClearSubmissionStates",e.DeleteCustomerReview="@@dp/DeleteCustomerReview",e.FetchReviewEligibility="@@dp/FetchReviewEligibility",e.ClearReviewEligibility="@@dp/ClearReviewEligibility"}(n||(n={}))},"./src/widgets/DVWebNodeDetail/actions/index.ts":(e,t,a)=>{"use strict";a.d(t,{k:()=>n.k});var n=a("./src/widgets/DVWebNodeDetail/actions/constants.ts")},"./src/widgets/DVWebNodeDetail/components/heroVideo/draperStatus.ts":(e,t,a)=>{"use strict";a.d(t,{e:()=>n});var n={NotStarted:0,BeforePlaying:1,Playing:2,Stopped:3,Cancelled:4}},"./src/widgets/DVWebNodeDetail/context/withLogger.tsx":(e,t,a)=>{"use strict";a.d(t,{n:()=>s});var n=a("./node_modules/react/index.js"),r=a("./src/util/wrappers/LoggersContext.tsx");function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}const s=e=>t=>n.createElement(r.jW,null,(({logger:a})=>n.createElement(e,i({},t,{logger:a}))))},"./src/widgets/DVWebNodeDetail/reducers/action.ts":(e,t,a)=>{"use strict";a.d(t,{t1:()=>o,L5:()=>l,I6:()=>p});var n=a("./src/widgets/DVWebNodeDetail/utils/reducer.ts"),r=a("./src/widgets/DVWebNodeDetail/actions/index.ts"),i=a("./node_modules/redux/es/redux.js"),s=a("./src/widgets/DVWebNodeDetail/utils/utils.ts");const o="atf",l="btf",c=(0,s.bc)([o,l]),d={},u=e=>(0,n.V)((t=>t.action&&t.action[e]),d,(e=>(t=d,a)=>{switch(a.type){case r.k.RefreshAtfActionBox:case r.k.RefreshBtfActionBoxes:case r.k.RefreshEpisode:return a.output&&a.output.action&&a.output.action[e]&&{...t,...a.output.action[e]}||t;default:return t}})(e)),p=(0,i.UY)(c.reduce(((e,t)=>(e[t]=u(t),e)),{}))},"./src/widgets/DVWebNodeDetail/reducers/collections.ts":(e,t,a)=>{"use strict";a.d(t,{Wq:()=>r,I6:()=>c});var n=a("./src/widgets/DVWebNodeDetail/actions/index.ts");const r=25,i={},s=["episodes","bonus"],o=(e,t)=>{t.reduce(((e,t)=>(t.collectionType&&(e[t.collectionType]?e[t.collectionType]={...e[t.collectionType],titleIds:Array.from(new Set([...e[t.collectionType].titleIds,...t.titleIds]))}:e[t.collectionType]={...t}),e)),e||{})},l=(e,t)=>{const a=Object.keys(e).reduce(((t,a)=>(t[a]=[...e[a]],t)),{});return Object.keys(t).reduce(((e,a)=>{if(e[a]){const n={};o(n,e[a]),o(n,t[a]);const r=new Set(Object.keys(n));e[a]=s.filter((e=>r.has(e))).map((e=>n[e]))}else e[a]=[...t[a]];return e}),a)},c=(e=i,t)=>{switch(t.type){case n.k.STORE_MERGE:return t.payload.collections?l(e,t.payload.collections):e;case n.k.CHANGE_PAGE:return l({},t.payload.collections);default:return e}}},"./src/widgets/DVWebNodeDetail/reducers/detail.ts":(e,t,a)=>{"use strict";a.d(t,{B6:()=>i,k5:()=>s,Xt:()=>o,I6:()=>l});var n=a("./src/widgets/DVWebNodeDetail/utils/reducer.ts"),r=a("./node_modules/redux/es/redux.js");const i="headerDetail",s="btfMoreDetails",o="detail",l=(0,r.UY)({[i]:(0,n.V)((e=>e.detail&&e.detail[i]),{}),[s]:(0,n.V)((e=>e.detail&&e.detail[s]),{}),[o]:(0,n.V)((e=>e.detail&&e.detail[o]),{})})},"./src/widgets/DVWebNodeDetail/selectors/actionFragment.ts":(e,t,a)=>{"use strict";a.d(t,{IB:()=>p,AI:()=>m,SX:()=>g,lO:()=>f,Lu:()=>v,MZ:()=>b,C9:()=>E,ZA:()=>y,BN:()=>w,ZM:()=>D,l7:()=>C,J2:()=>P,UT:()=>S,cD:()=>R,Br:()=>x,u5:()=>N,aQ:()=>A,c9:()=>O,Li:()=>V,rp:()=>L,tW:()=>W,a1:()=>M,BB:()=>B,PC:()=>j,VM:()=>F});var n=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),r=a("./src/widgets/DVWebNodeDetail/utils/isType.ts"),i=a("./src/widgets/DVWebNodeDetail/utils/utils.ts"),s=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),o=a("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts"),l=a("./src/widgets/DVWebNodeDetail/utils/downloadActionHelper.ts"),c=a("./src/widgets/DVWebNodeDetail/reducers/collections.ts"),d=a("./src/widgets/DVWebNodeDetail/utils/getPlaybackProgress.ts"),u=a("./src/widgets/DVWebNodeDetail/utils/actionBoxUtils.ts");const p=(0,n.P)([s.bS.actionBtf,s.mZ.collections,s.mZ.extras],((e,t=[],a=[])=>Array.from(new Set((0,i.VF)([...t,...a].map((e=>e.titleIds))))).reduce(((t,a)=>{const n=e[a];return n&&(t[a]=n),t}),{}))),m=(0,n.P)(s.mZ.actionAtf,(e=>e&&e.acquisitionActions)),g=(0,n.P)(s.mZ.actionAtf,(e=>e&&e.viewRefMarker)),h=(0,n.P)(s.mZ.actionAtf,(e=>e&&e.playbackActions)),_=(0,n.P)(s.mZ.actionAtf,(e=>e&&e.downloadActions)),f=(0,n.P)(s.mZ.actionAtf,(e=>e&&e.notificationActions)),v=(0,n.P)(s.mZ.actionAtf,(e=>e&&e.disneyAction)),b=(0,n.P)(s.mZ.actionAtf,(e=>e&&e.watchPartyAction)),E=(0,n.P)([s.bS.actionBtf,s.mZ.collections],((e,t=[])=>(0,i.VF)(t.filter((e=>"episodes"===e.collectionType)).map((e=>e.titleIds))).slice(0,c.Wq).reduce(((t,a)=>{const n=e[a];if(!n||!n.playbackActions)return t;const r=(0,o.MG)(n.playbackActions);return r&&(0,d.Nw)(r.progress)?t+1:t}),0))),y=(0,n.P)([s.bS.actionBtf,s.mZ.collections],((e,t=[])=>(0,i.VF)(t.filter((e=>"episodes"===e.collectionType)).map((e=>e.titleIds))).reduce(((t,a)=>{const n=e[a];return t[a]=n&&n.playbackActions&&void 0!==(0,o.MG)(n.playbackActions),t}),{}))),w=(0,n.P)([s.bS.actionBtf,s.mZ.collections],((e,t=[])=>(0,i.VF)(t.filter((e=>"episodes"===e.collectionType)).map((e=>e.titleIds))).reduce(((t,a)=>{const n=e[a];return n&&!(0,i.xb)((0,u.N)(n.notificationActions))?t+1:t}),0))),T=(0,n.P)(m,(e=>{const t=e&&e.svodWinners;return(e=>(0,r.P)(e,"atv.wps#SubscribeActionTreeRight"))(t)?t:void 0})),D=(0,n.P)(T,(e=>e&&e.children)),I=(0,n.P)(D,(e=>e&&(0,i.VF)(e.map((e=>e.problems))))),C=(0,n.P)(I,(e=>e&&e.map((e=>e.message)))),P=(0,n.P)(T,(e=>e&&e.metadata)),S=(0,n.P)(P,(e=>e&&e.behaviour)),k=(0,n.P)(m,(e=>{return e&&(t=e.tvodWinners,(0,r.P)(t,"atv.wps#PurchaseActionTreeRight"))?e.tvodWinners:void 0;var t})),R=(0,n.P)(k,(e=>e&&e.children)),x=(0,n.P)(k,(e=>e&&e.metadata)),N=(0,n.P)(x,(e=>e&&e.messages)),A=(0,n.P)(R,(e=>e&&(0,i.VF)(e.filter((e=>!(0,i.xb)(e.displayMessages))).map((e=>e.displayMessages))))),O=(0,n.P)(m,(e=>e&&e.moreWaysToWatch)),V=(0,n.P)(m,(e=>e&&e.acceptedPreorder)),L=(0,n.P)(h,(e=>e&&e.main&&(0,o.cn)(e.main)&&e.main.metadata||void 0)),W=(0,n.P)(h,(e=>e&&e.main&&(0,o.cn)(e.main)&&e.main.children||void 0)),M=(0,n.P)(W,(e=>e&&e[0]||void 0)),B=(0,n.P)([s.bS.self,M],((e,t)=>({playbackActionData:t,self:t&&e[t.playbackID]}))),U=(0,n.P)(_,(e=>e&&e.main&&(0,l.m)(e.main)&&e.main.children||void 0)),j=(0,n.P)(U,(e=>e&&e[0])),F=(0,n.P)([s.bS.actionBtf,s.mZ.collections],((e,t=[])=>(0,i.VF)(t.map((e=>"episodes"===e.collectionType?e.titleIds:null))).filter((t=>t&&e[t]&&e[t].downloadActions&&e[t].downloadActions.main))))},"./src/widgets/DVWebNodeDetail/selectors/autoplayHero.ts":(e,t,a)=>{"use strict";a.d(t,{v:()=>i});var n=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),r=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const i=(0,n.P)(r.mZ.autoplayHero,(e=>{if(!e||0===Object.keys(e.mediaFiles).length)return;const{mediaFiles:t,draperTrackingEvents:a,textMap:n,isTrailerAutoplayEnabled:r}=e,i=void 0===r||r,s=Object.entries(t).map((([e,t])=>({bitrate:parseInt(e,10),file:t}))).filter((({bitrate:e})=>Boolean(e))).sort(((e,t)=>e.bitrate-t.bitrate));let o;if(window.navigator&&window.navigator.connection&&window.navigator.connection.downlink){const e=s.filter((({bitrate:e})=>e<1024*window.navigator.connection.downlink*.5));o=e.length>0?e[e.length-1].file:void 0}else o=s[Math.floor((s.length-1)/2)].file;return void 0===o?void 0:{mediaFile:o,draperTrackingEvents:a,textMap:n,isTrailerAutoplayEnabled:i}}))},"./src/widgets/DVWebNodeDetail/selectors/basicState.ts":(e,t,a)=>{"use strict";a.d(t,{bS:()=>s,mZ:()=>l});var n=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),r=a("./src/widgets/DVWebNodeDetail/reducers/action.ts"),i=a("./src/widgets/DVWebNodeDetail/reducers/detail.ts");const s={context:e=>e.requestContext,features:e=>e.features,pageTitleId:e=>e.pageTitleId,bundleCarousel:e=>e.bundleCarousel,collections:e=>e.collections,carousel:e=>e.carousel,extras:e=>e.extras,pageLink:e=>e.pageLink,actionAtf:e=>e.action[r.t1],actionBtf:e=>e.action[r.L5],seasons:e=>e.seasons,buyboxTitleId:e=>e.buyboxTitleId,crowBanner:e=>e.banner.crow,creative:e=>e.creative,headerDetail:e=>e.detail[i.B6],moreDetails:e=>e.detail[i.k5],detail:e=>e.detail[i.Xt],self:e=>e.self,imdb:e=>e.imdb,notification:e=>e.notification,refund:e=>e.refund.fragments,refunding:e=>e.refund.refunding,restriction:e=>e.restriction,trailer:e=>e.trailer,watchlist:e=>e.watchlist,hoverWatchlist:e=>e.hoverWatchlist,purchase:e=>e.purchase,pageContext:e=>e.pageContext,bottomBar:e=>e.bottomBar,exploreTabContent:e=>e.exploreTabContent,devices:e=>e.devices,otherFormats:e=>e.otherFormats,castAndCrew:e=>e.castAndCrew,player:e=>e.player,atfTapsExperimentToken:e=>e.tapsExperimentToken[e.pageTitleId],autoplayHero:e=>e.autoplayHero,hdPlaybackRestricted:e=>e.hdPlaybackRestricted,reviews:e=>e.reviews,translatedReviews:e=>e.translatedReviews,comingSoon:e=>e.comingSoon,metadata:e=>e.metadata,reviewSubmission:e=>e.reviewSubmission,widgets:e=>e.widgets,impressionAnalytics:e=>e.impressionAnalytics},o=e=>(0,n.P)([s.pageTitleId,e],((e,t)=>t[e])),l={actionAtf:o(s.actionAtf),collections:o(s.collections),extras:o(s.extras),seasons:o(s.seasons),bundleCarousel:o(s.bundleCarousel),buyboxTitleId:o(s.buyboxTitleId),creative:o(s.creative),headerDetail:o(s.headerDetail),moreDetails:o(s.moreDetails),self:o(s.self),imdb:o(s.imdb),notification:o(s.notification),refund:o(s.refund),restriction:o(s.restriction),trailer:o(s.trailer),watchlist:o(s.watchlist),crowBanner:o(s.crowBanner),otherFormats:o(s.otherFormats),castAndCrew:o(s.castAndCrew),autoplayHero:o(s.autoplayHero),hdPlaybackRestricted:o(s.hdPlaybackRestricted),comingSoon:o(s.comingSoon),reviews:o(s.reviews),translatedReviews:o(s.translatedReviews),metadata:o(s.metadata),reviewSubmission:o(s.reviewSubmission),widgets:o(s.widgets)}},"./src/widgets/DVWebNodeDetail/selectors/detailFragment.ts":(e,t,a)=>{"use strict";a.d(t,{A2:()=>s,X0:()=>o,NE:()=>l,S6:()=>c,CK:()=>d});var n=a("./src/util/utils/titleType.ts"),r=a("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=a("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const s=(0,r.P)(i.mZ.headerDetail,(e=>e&&e.images)),o=(0,r.P)(i.mZ.headerDetail,(e=>e&&e.liveState)),l=(0,r.P)(i.mZ.headerDetail,(e=>(0,n.ee)(e&&e.titleType))),c=(0,r.P)(l,(e=>e?"Movie":"TVSeason")),d=((0,r.P)(i.mZ.headerDetail,(e=>e&&e.title)),(0,r.P)(i.mZ.headerDetail,(e=>e&&e.seasonNumber)))},"./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts":(e,t,a)=>{"use strict";a.d(t,{P:()=>n});const n=a("./node_modules/reselect/es/index.js").P1},"./src/widgets/DVWebNodeDetail/utils/actionBoxUtils.ts":(e,t,a)=>{"use strict";a.d(t,{N:()=>r});var n=a("./src/widgets/DVWebNodeDetail/utils/stringUtils.ts");const r=e=>(e||[]).filter((({severity:e})=>"RELEVANT"===e)).map((e=>(0,n.bJ)(e.message)))},"./src/widgets/DVWebNodeDetail/utils/downloadActionHelper.ts":(e,t,a)=>{"use strict";a.d(t,{m:()=>r,L:()=>i});var n=a("./src/widgets/DVWebNodeDetail/utils/isType.ts");const r=e=>(0,n.P)(e,"atv.wps#DownloadActionTreeRight"),i=e=>{const t=(e=>e&&e.main&&r(e.main)&&e.main)(e);return t&&t.children&&t.children[0]||void 0}},"./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts":(e,t,a)=>{"use strict";a.d(t,{N:()=>r,h:()=>n});const n=a("./node_modules/react/index.js").createContext({}),r=(e,t)=>{var a;return(null==t||null===(a=t.asins)||void 0===a?void 0:a.length)>0?t.asins[0]:e}},"./src/widgets/DVWebNodeDetail/utils/getPlaybackProgress.ts":(e,t,a)=>{"use strict";a.d(t,{_y:()=>n,fZ:()=>r,Nw:()=>i});const n=e=>e?Math.round(100*e):0,r=(e,t,a)=>{const n=e&&e[t],r=n&&n.ResumeTime;return(0===r?100:a&&r>0?100*r/(1e3*a):0)||0},i=e=>1===e},"./src/widgets/DVWebNodeDetail/utils/isType.ts":(e,t,a)=>{"use strict";function n(e,t){return Boolean(e&&e.__type===t)}a.d(t,{P:()=>n})},"./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts":(e,t,a)=>{"use strict";a.d(t,{cn:()=>r,MG:()=>s,fi:()=>o,D8:()=>l});var n=a("./src/widgets/DVWebNodeDetail/utils/isType.ts");const r=e=>(0,n.P)(e,"atv.wps#PlaybackActionTreeRight"),i=e=>(null==e?void 0:e.main)&&r(e.main)&&e.main,s=e=>{const t=i(e);return(null==t?void 0:t.children)&&t.children[0]||void 0},o=e=>{const t=i(e);return(null==t?void 0:t.children)&&t.children.map((e=>e.playbackID))||void 0},l=e=>{const t=i(e);return(null==t?void 0:t.metadata)&&t.metadata.secondaryMessages||void 0}},"./src/widgets/DVWebNodeDetail/utils/playbackEnvelope.ts":(e,t,a)=>{"use strict";a.d(t,{D:()=>n});const n=e=>(null==e?void 0:e.playbackEnvelope)&&{envelope:e.playbackEnvelope,correlationId:e.correlationId,expiration:e.expiryTime}},"./src/widgets/DVWebNodeDetail/utils/reducer.ts":(e,t,a)=>{"use strict";a.d(t,{V:()=>r});var n=a("./src/widgets/DVWebNodeDetail/actions/constants.ts");const r=(e,t,a,r=((e,t)=>({...t,...e})))=>(i=t,s)=>{switch(s.type){case n.k.STORE_MERGE:return e(s.payload)?r(e(s.payload),i):i;case n.k.CHANGE_PAGE:return e(s.payload)||t;default:return a?a(i,s):i}}},"./src/widgets/DVWebNodeDetail/utils/stringUtils.ts":(e,t,a)=>{"use strict";a.d(t,{qY:()=>r,e6:()=>i,bJ:()=>s,q1:()=>o});var n=a("./src/util/utils/strings.ts");const r=(e,t,a)=>{let r=0;return(i,s)=>{const o=e[i];return o?(0,n.VJ)(o,s,t):(0===r&&t.error(`Missing string ${i}`),r+=1,a.isInternal?`MISSING STRING ${i}`:"")}},i=(e,t={})=>({string:e,attrs:t}),s=e=>"string"==typeof e?i(e.trim()):e,o=(e,t="_")=>e.map((e=>void 0===e?t:e)).join("|")},"./src/widgets/DVWebNodeDetail/utils/utils.ts":(e,t,a)=>{"use strict";a.d(t,{xb:()=>n,Db:()=>r,w6:()=>i,e$:()=>s,yb:()=>o,bc:()=>l,VF:()=>c,JQ:()=>d,Dv:()=>u,ws:()=>p,EZ:()=>m});const n=e=>!e||0===e.length,r=e=>!n(e),i=(e,t)=>Array.from({length:t-e+1},((t,a)=>a+e)),s=e=>parseInt(e,10)||0,o=e=>Boolean(e),l=e=>e,c=e=>e.reduce(((e,t)=>e.concat(t)),[]),d=e=>1==e,u=e=>e&&JSON.stringify(e),p=(e,t)=>e-t,m="DVWebNodeDetail"},"./src/widgets/DVWebNodeSPA/controllers/appConfig.ts":(e,t,a)=>{"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{X:()=>r});class r{constructor(){n(this,"controller",void 0),n(this,"capabilities",[]),n(this,"deviceInfo",void 0),"undefined"!=typeof PVWinRT&&(this.controller=PVWinRT.controller,this.setCapabilities(),this.setDeviceInfo())}setCapabilities(){if(null!=this.controller&&0===this.capabilities.length&&void 0!==this.controller.getAppConfiguration){var e;const t=null===(e=this.controller.getAppConfiguration())||void 0===e?void 0:e.appCapabilities;t&&(this.capabilities=Object.values(t))}return this.capabilities}setDeviceInfo(){if(null!=this.controller&&0===this.capabilities.length&&void 0!==this.controller.getAppConfiguration){const e=this.controller.getAppConfiguration();this.deviceInfo={firmware:null==e?void 0:e.appVersion,deviceID:null==e?void 0:e.deviceID,operatingSystemVersion:"10.0",deviceTypeID:"A3OEMT9S4WNMK",operatingSystemName:"Windows.Desktop"}}return this.deviceInfo}}},"./src/widgets/DVWebNodeSPA/controllers/appController.ts":(e,t,a)=>{"use strict";a.d(t,{g:()=>n});class n{constructor(){var e,t,a;a=null,(t="controller")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,"undefined"!=typeof PVWinRT&&(this.controller=PVWinRT.controller)}reportCXBlockingError(e){void 0!==window.ue&&window.ue.count("DVWinAppCXBlockingError",1),null!=this.controller&&this.controller.reportCXBlockingError(e)}reportSpaReady(){null!=this.controller&&void 0!==this.controller.reportSpaReady&&this.controller.reportSpaReady()}reportContentLoaded(e){null!=this.controller&&void 0!==this.controller.reportContentLoaded&&this.controller.reportContentLoaded(e)}}},"./src/widgets/DVWebNodeSPA/controllers/appLogger.ts":(e,t,a)=>{"use strict";a.d(t,{V:()=>i});var n=a("./src/widgets/DVWebNodeSPA/controllers/base.ts");function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class i extends n.x{constructor(e){super(e),r(this,"logger",void 0),r(this,"logSystem",void 0),"undefined"!=typeof PVWinRT&&(this.logger=PVWinRT.logger)}logError(e,t,a={}){null!=this.logger&&this.logSystem&&this.logger.logError(this.logSystem,e,this.toErrorString(t),this.toStringMap(a))}logFatal(e,t,a={}){null!=this.logger&&this.logSystem&&this.logger.logFatal(this.logSystem,e,this.toErrorString(t),this.toStringMap(a))}logWarning(e,t={}){null!=this.logger&&this.logSystem&&this.logger.logWarning(this.logSystem,e,null,this.toStringMap(t))}logInfo(e,t={}){null!=this.logger&&this.logSystem&&this.logger.logInfo(this.logSystem,e,null,this.toStringMap(t))}logDebug(e,t={}){null!=this.logger&&"undefined"!=typeof Windows&&this.logSystem&&this.logger.logDebug(this.logSystem,e,null,this.toStringMap(t))}logVerbose(e,t={}){null!=this.logger&&"undefined"!=typeof Windows&&this.logSystem&&this.logger.logVerbose(this.logSystem,e,null,this.toStringMap(t))}logCounter(e,t={}){null!=this.logger&&"undefined"!=typeof Windows&&this.logSystem&&this.logger.logCounter(this.logSystem,e,this.toNumberMap(t))}}},"./src/widgets/DVWebNodeSPA/controllers/base.ts":(e,t,a)=>{"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let r;a.d(t,{N:()=>r,x:()=>i}),function(e){e.SW="SW",e.SPA="SPA"}(r||(r={}));class i{constructor(e){n(this,"logSystem",void 0),n(this,"logger",void 0),n(this,"controller",void 0),n(this,"mapError",(()=>(null!=this.logger&&this.logger.logError(this.logSystem,"Windows is not defined",this.toErrorString(new Error("Windows is not defined")),{}),{}))),n(this,"toStringMap",(e=>{if("undefined"!=typeof Windows){const t=new Windows.Foundation.Collections.StringMap;return Object.keys(e).forEach((a=>{t[a]=`${e[a]}`})),t}return this.mapError()})),n(this,"toNumberMap",(e=>{if("undefined"!=typeof Windows){const t=new Windows.Foundation.Collections.PropertySet;return Object.keys(e).forEach((a=>{t.insert(a,e[a])})),t}return this.mapError()})),n(this,"toErrorString",(e=>`${e.name}\n${e.message}\n${e.stack}`)),this.logSystem=e}}},"./src/widgets/DVWebNodeSPA/controllers/winrt.ts":(e,t,a)=>{"use strict";a.d(t,{z:()=>l});var n=a("./src/widgets/DVWebNodeSPA/controllers/base.ts"),r=a("./src/widgets/DVWebNodeSPA/controllers/appLogger.ts"),i=a("./src/widgets/DVWebNodeSPA/controllers/appController.ts"),s=a("./src/widgets/DVWebNodeSPA/controllers/appConfig.ts");function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l{constructor(e){o(this,"appLogger",null),o(this,"appController",null),o(this,"config",void 0),this.appLogger=new r.V(e),this.appController=new i.g,this.config=new s.X}}new l(n.N.SPA)},"./src/widgets/DVWebNodeSPA/utils/csm.ts":(e,t,a)=>{"use strict";var n=a("./src/shared/SPA/UWPNotifier/index.ts"),r=a("./src/widgets/DVWebNodeSPA/controllers/winrt.ts");function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class s{constructor(e){i(this,"system",void 0),i(this,"latency",void 0),i(this,"winrt",void 0),i(this,"isDebug",!1),i(this,"_isWinRTEnabled",null),i(this,"_capability",""),i(this,"_messageWrapper",(e=>`PVWinApp - ${e}`)),i(this,"_scopeWrapper",(e=>`PVWinApp-${e}`)),i(this,"_isWinRT",(()=>{var e,t,a,n;if(null!==this._isWinRTEnabled)return this._isWinRTEnabled;const r=null!=(null===(e=this.winrt.appLogger)||void 0===e?void 0:e.logger)||!1,i=null!=(null===(t=this.winrt.appController)||void 0===t?void 0:t.controller)||!1,s=(null===(a=this.winrt.config)||void 0===a||null===(n=a.capabilities)||void 0===n?void 0:n.includes(this._capability))||!1;return!r&&this._publishCount("PVWinRTNoLogger"),!i&&this._publishCount("PVWinRTNoController"),!s&&this._publishCount("PVWinRTNoCapability"),r&&i&&s})),i(this,"_publishLog",((e,t,a)=>{"object"!=typeof a&&void 0!==a||"string"!=typeof t||!Object.values(n.Fw).includes(e)?this.error(new Error("Wrong data types passed to _publishLog"),`Wrong data types passed to _publishLog with level ${e} typeof data=${typeof a} typeof message=${typeof t}`):n.CD.getInstance().publish(n.Pt.Logging,{message:this._messageWrapper(t),system:this.system,level:e,...a&&{data:a}})})),i(this,"_publishCount",((e,t)=>{n.CD.getInstance().publish(n.Pt.Counter,{scope:this._scopeWrapper(e),system:this.system,..."object"==typeof t&&t&&{auxCounters:t}})})),i(this,"_getDataFromError",(e=>({name:e.name,message:e.message,...e.description&&{description:e.description},...e.stack&&{stack:e.stack},...void 0!==e.number&&{number:String(e.number)}}))),i(this,"warn",((e,t)=>{if(this._isWinRT()){var a;const n=this._messageWrapper(e);null===(a=this.winrt.appLogger)||void 0===a||a.logWarning(n,t instanceof Error?this._getDataFromError(t):t)}else this._publishLog(n.Fw.WARN,e,t instanceof Error?this._getDataFromError(t):t);this.isDebug&&console.warn(e,t)})),i(this,"error",((e,t,a)=>{if(this._isWinRT()){var r;const n=this._messageWrapper(t);null===(r=this.winrt.appLogger)||void 0===r||r.logError(n,this._getDataFromError(e),a)}else this._publishLog(n.Fw.ERROR,t,Object.assign(this._getDataFromError(e),a));this.isDebug&&console.error(e,t,a)})),i(this,"debug",((e,t)=>{if(this._isWinRT()){var a;const n=this._messageWrapper(e);null===(a=this.winrt.appLogger)||void 0===a||a.logDebug(n,t)}else this._publishLog(n.Fw.DEBUG,e,t);this.isDebug&&console.log(e,t)})),i(this,"verbose",((e,t)=>{if(this._isWinRT()){var a;const n=this._messageWrapper(e);null===(a=this.winrt.appLogger)||void 0===a||a.logVerbose(n,t)}else this._publishLog(n.Fw.VERBOSE,e,t);this.isDebug&&console.log(e,t)})),i(this,"info",((e,t)=>{if(this._isWinRT()){var a;const n=this._messageWrapper(e);null===(a=this.winrt.appLogger)||void 0===a||a.logInfo(n,t)}else this._publishLog(n.Fw.INFO,e,t);this.isDebug&&console.info(e,t)})),i(this,"fatal",((e,t,a)=>{if(this._isWinRT()){var r;const n=this._messageWrapper(t);null===(r=this.winrt.appLogger)||void 0===r||r.logFatal(n,this._getDataFromError(e),a)}else this._publishLog(n.Fw.FATAL,t,Object.assign(this._getDataFromError(e),a));this.isDebug&&console.error(e,t,a)})),i(this,"count",((e,t)=>{if(this._isWinRT()){var a;const n=this._scopeWrapper(e);null===(a=this.winrt.appLogger)||void 0===a||a.logCounter(n,t)}else this._publishCount(e,t);this.isDebug&&console.log(`Counter:${e}`,t)})),i(this,"_computeLatency",(e=>{const t=this.latency[e],a={};return Object.keys(t).forEach(((e,n,r)=>{!["start","end"].includes(e)&&r.includes("start")&&r.includes("end")&&(a[`latency::${e}::fromStart`]=Math.round(t[e]-t.start),n>1&&!["start","end"].includes(r[n-1])&&(a[`latency::${e}::from${r[n-1]}`]=Math.round(t[e]-t[r[n-1]])))})),delete this.latency[e],{...t.start&&t.end&&{"latency::Total":Math.round(t.end-t.start)},...a}})),i(this,"start",((e,t)=>(this.latency[e]||(this.latency[e]={start:t||performance.now()}),this))),i(this,"reset",(e=>(delete this.latency[e],this))),i(this,"hurdle",((e,t)=>(this.latency[e]&&(this.latency[e][t]=performance.now()),this))),i(this,"end",(e=>{if(this.latency[e]){this.latency[e].end=performance.now();const t=this._computeLatency(e);this.count(e,t)}return this})),i(this,"reportSpaReady",(()=>{var e;this._isWinRT()&&(null===(e=this.winrt.appController)||void 0===e||e.reportSpaReady())})),i(this,"reportContentLoaded",(e=>{var t;this._isWinRT()&&(null===(t=this.winrt.appController)||void 0===t||t.reportContentLoaded(e))})),i(this,"setLoggingCapability",(e=>{this._capability=e||"",this._isWinRTEnabled=this._isWinRT()})),this.system=e,this.latency={},this.winrt=new r.z(e),"undefined"!=typeof window&&window.location&&(this.isDebug=window.location.search.slice(1).split("&").includes("logDebug")||window.document.cookie.includes("logDebug="))}}const o=new s(n.N7.SPA),l=(o.count,new s(n.N7.SW));"object"==typeof window&&(window.SPACSM={jsError:l.error,jsWarn:l.warn,count:l.count})},"./src/widgets/DVWebNodeSPA/utils/refMarkers.ts":(e,t,a)=>{"use strict";a.d(t,{y9:()=>n});a("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts");const n=/ref_?=(.*?)(\?|\/|&|$)/},"./src/widgets/Explore/ClientImpressions/ImpressionTracker.tsx":(e,t,a)=>{"use strict";a.d(t,{F:()=>c,$:()=>d});var n,r=a("./src/shared/deviceProxy/ClientsideImpressionClient.ts"),i=a("./src/util/logger/logger.ts"),s=a("./src/util/csm/csm.tsx"),o=a("./node_modules/uuid/dist/esm-browser/v4.js");function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e){e[e.HandleIOEntries=0]="HandleIOEntries",e[e.GroupIndividualImpressions=1]="GroupIndividualImpressions",e[e.SendRequestsFromQueue=2]="SendRequestsFromQueue",e[e.__LENGTH=3]="__LENGTH"}(n||(n={}));class c{static init(e){if(c.io||(c.io=new IntersectionObserver(c.onNewIoEntries,{threshold:[.5,.6,.7,.8,.9,1]})),c.timeOrigin=Date.now()-performance.now(),c.elementToElementData||(c.elementToElementData=new Map),c.currentlyInViewItems||(c.currentlyInViewItems=new Map),c.intersectionObserverEntryQueue||(c.intersectionObserverEntryQueue=[]),c.pendingIndividualImpressionRecords||(c.pendingIndividualImpressionRecords=new Map),c.groupedImpressionsQueue||(c.groupedImpressionsQueue=[]),c.unobservedElements=0,c.minCarousel=0,c.maxCarousel=0,c.attachOnIdleCallback(),c.client=new r.g(e),!c.pageLoaded){c.pageLoaded=!1;const e=()=>{c.pageLoaded=!0,window.removeEventListener("load",e)};window.addEventListener("load",e)}document.addEventListener("visibilitychange",(()=>{"hidden"==document.visibilityState&&c.onPageHide()})),document.addEventListener("pagehide",c.onPageHide)}static observe(e,t,a){try{var n,r;if(c.io||c.init(a),null==t||!t.collectionImpressionData)return;if(!e)return void(0,s.cL)("DVWebNode::ImpressionTracker::ObserveNoElement",1,!1);null===(n=c.io)||void 0===n||n.observe(e),null===(r=c.elementToElementData)||void 0===r||r.set(e,t)}catch(e){(0,s.rp)(e,{logLevel:i.in.ERROR,attribution:"DVWebNodeImpressionTracker"})}}static unobserve(e){var t;e?(null===(t=c.io)||void 0===t||t.unobserve(e),c.unobservedElements++,c.elementToElementData&&c.unobservedElements!==c.elementToElementData.size||c.disconnectAll()):(0,s.cL)("DVWebNode::ImpressionTracker::UnobserveNoElement",1,!1)}static disconnectAll(){var e;null===(e=c.io)||void 0===e||e.disconnect(),c.onIdleCallback({didTimeout:!0,timeRemaining:()=>50}),c.io=void 0,c.elementToElementData=void 0,c.currentlyInViewItems=void 0,c.intersectionObserverEntryQueue=void 0,c.pendingIndividualImpressionRecords=void 0,c.unobservedElements=0}static addImpressionRecord(e,t){var a,n,r;((0,s.cL)(`DVWebNode::ImpressionTracker::${e.eventType}ImpressionRecorded`,1,!1),null!==(a=c.pendingIndividualImpressionRecords)&&void 0!==a&&a.has(t))?null===(n=c.pendingIndividualImpressionRecords.get(t))||void 0===n||n.push(e):null===(r=c.pendingIndividualImpressionRecords)||void 0===r||r.set(t,[e])}static logManualImpression(e,t){var a,n;const r=null===(a=c.elementToElementData)||void 0===a?void 0:a.get(e),i=null===(n=c.currentlyInViewItems)||void 0===n?void 0:n.get(e),o=performance.now();if(!r||!r.collectionImpressionData||!i)return void(0,s.cL)("DVWebNode::ImpressionTracker::ManualImpressionsNoElement",1,!1);const l={...r,...i,eventType:t,timeToView:i.impressionStartTime,inViewTime:o-i.impressionStartTime,eventTime:c.timeOrigin+o,elementSize:`${e.scrollWidth},${e.scrollHeight}`};c.addImpressionRecord(l,r.collectionImpressionData),"Select"===t?c.onIdleCallback({didTimeout:!0,timeRemaining:()=>50}):c.attachOnIdleCallback()}}l(c,"io",void 0),l(c,"timeOrigin",void 0),l(c,"elementToElementData",void 0),l(c,"intersectionObserverEntryQueue",void 0),l(c,"pendingIndividualImpressionRecords",void 0),l(c,"groupedImpressionsQueue",void 0),l(c,"currentlyInViewItems",void 0),l(c,"idleCallbackHandle",void 0),l(c,"timeoutID",void 0),l(c,"client",void 0),l(c,"unobservedElements",void 0),l(c,"pageLoaded",void 0),l(c,"minCarousel",void 0),l(c,"maxCarousel",void 0),l(c,"onNewIoEntries",(e=>{var t;null===(t=c.intersectionObserverEntryQueue)||void 0===t||t.push(...e),c.attachOnIdleCallback()})),l(c,"idleCallbackNextStep",0),l(c,"callbackBuffer",10),l(c,"minimumImpressions",3),l(c,"onIdleCallback",((e,t=!1)=>{var a,r,i;c.clearSavedCallback();const s=()=>e.didTimeout||e.timeRemaining()>c.callbackBuffer;for(;s()&&c.idleCallbackNextStep<3;)switch(c.idleCallbackNextStep){case n.HandleIOEntries:if(c.intersectionObserverEntryQueue){for(;c.intersectionObserverEntryQueue.length>0;)c.handleIoEntryQueue();c.recalculateMinAndMax()}c.idleCallbackNextStep++;break;case n.GroupIndividualImpressions:c.groupIndividualImpressionRecords(),c.idleCallbackNextStep++;break;case n.SendRequestsFromQueue:for(;c.groupedImpressionsQueue&&c.groupedImpressionsQueue.length>0&&(c.groupedImpressionsQueue.length>=c.minimumImpressions||t)&&s();)c.sendRequestFromQueue();c.idleCallbackNextStep++}c.idleCallbackNextStep>=n.__LENGTH&&(c.idleCallbackNextStep=0),(null!==(a=c.intersectionObserverEntryQueue)&&void 0!==a&&a.length||null!==(r=c.pendingIndividualImpressionRecords)&&void 0!==r&&r.size||null!==(i=c.groupedImpressionsQueue)&&void 0!==i&&i.length)&&c.attachOnIdleCallback()})),l(c,"recalculateMinAndMax",(()=>{let e=9999,t=0;c.currentlyInViewItems&&(c.currentlyInViewItems.forEach((a=>{e=Math.min(e,a.carouselPosition),t=Math.max(t,a.carouselPosition)})),c.minCarousel=e,c.maxCarousel=t)})),l(c,"inferEventTrigger",(e=>{if(!e)return"Pageload";const t=e.carouselPosition||0;return c.pageLoaded?c.maxCarousel>=t&&t>=c.minCarousel?"Hscroll":"Vscroll":"Pageload"})),l(c,"handleIoEntryQueue",(()=>{var e,t;if(!c.currentlyInViewItems||0==(null===(e=c.intersectionObserverEntryQueue)||void 0===e?void 0:e.length))return;const a=null===(t=c.intersectionObserverEntryQueue)||void 0===t?void 0:t.shift();if(a)if(a.isIntersecting){const e=c.currentlyInViewItems.get(a.target);if(e)c.currentlyInViewItems.set(a.target,{...e,maxFractionInView:Math.max(a.intersectionRatio,e.maxFractionInView)});else{var n;const e=null===(n=c.elementToElementData)||void 0===n?void 0:n.get(a.target),t=c.inferEventTrigger(e),r=null==e?void 0:e.carouselPosition;r?c.currentlyInViewItems.set(a.target,{impressionStartTime:a.time,maxFractionInView:a.intersectionRatio,eventTrigger:t,carouselPosition:r}):(0,s.cL)("DVWebNode::ImpressionTracker::NoCarouselPosition",1,!1)}}else{var r;const e=c.currentlyInViewItems.get(a.target),t=null===(r=c.elementToElementData)||void 0===r?void 0:r.get(a.target);if(e&&t){const n=e.impressionStartTime,r=a.time,i={...t,...e,inViewTime:r-n,timeToView:n,eventTime:c.timeOrigin+n,elementSize:`${a.target.scrollWidth},${a.target.scrollHeight}`,eventType:"View"};c.pageLoaded&&c.addImpressionRecord(i,null==t?void 0:t.collectionImpressionData),c.currentlyInViewItems.delete(a.target)}}})),l(c,"groupIndividualImpressionRecords",(()=>{var e,t;0!=(null===(e=c.pendingIndividualImpressionRecords)||void 0===e?void 0:e.size)&&(null===(t=c.pendingIndividualImpressionRecords)||void 0===t||t.forEach(((e,t,a)=>{var n;const r=[];let i=0;null==e||e.forEach(((e,t)=>{(0==t||Math.abs(e.eventTime-i/t)<2e3)&&(i+=e.eventTime,r.push(e))})),r.length==(null==e?void 0:e.length)?a.delete(t):a.set(t,e.filter((e=>!r.includes(e)))),null===(n=c.groupedImpressionsQueue)||void 0===n||n.push(r)})))})),l(c,"sendRequestFromQueue",(()=>{var e,t;let a=[];const n=null===(e=c.groupedImpressionsQueue)||void 0===e?void 0:e.length;var r;n&&n>20?(a=null===(r=c.groupedImpressionsQueue)||void 0===r?void 0:r.splice(0,20),(0,s.cL)("DVWebNode::ImpressionTracker::BatchSizeMaxed",1,!1)):(a=c.groupedImpressionsQueue,c.groupedImpressionsQueue=[]);if(a=null===(t=a)||void 0===t?void 0:t.filter((e=>e.length>0)),!a||!a[0])return void(0,s.cL)("DVWebNode::ImpressionTracker::NoGroupedImpressions",1,!1);const i=(0,o.Z)(),l={eventBatchTimestamp:Date.now(),ImpressionEntryList:a.map((e=>({items:e.map((e=>({ImpressionEntryEvent:{eventId:i,eventType:e.eventType,eventTrigger:e.eventTrigger,eventTimestamp:e.eventTime},ImpressionEntryView:{inViewTime:e.inViewTime,inViewStripe:100*e.maxFractionInView,timeToView:e.timeToView},ImpressionEntryItem:{itemName:e.widgetType,itemContentId:e.titleID,itemCreativeId:c.extractCreativeIdFromImageUrl(e.imageURL),itemContentSize:e.elementSize,itemReftag:e.refMarker,itemSlotId:`${e.itemPosition},${e.carouselPosition}`},ImpressionEntryItemAnalytics:e.itemAnalytics}))),carouselAnalytics:e[0].collectionImpressionData,clientVariant:"PVWebsite"})))};c.client.logImpression(l)})),l(c,"extractCreativeIdFromImageUrl",(e=>{const t=null==e?void 0:e.match("/([a-zA-Z0-9_-]+\\.[a-zA-Z0-9,_.]*(jpe?g|png))");return t&&t.length>1?t[1]:e})),l(c,"attachOnIdleCallback",(()=>{c.idleCallbackHandle||c.timeoutID||(window.requestIdleCallback?c.idleCallbackHandle=window.requestIdleCallback(c.onIdleCallback):c.timeoutID=window.setTimeout((()=>{const e=Date.now();c.onIdleCallback({didTimeout:!1,timeRemaining:()=>e+50-Date.now()})}),2e3))})),l(c,"detatchOnIdleCallback",(()=>{window.cancelIdleCallback&&c.idleCallbackHandle?window.cancelIdleCallback(c.idleCallbackHandle):c.timeoutID&&window.clearTimeout(c.timeoutID),c.clearSavedCallback()})),l(c,"clearSavedCallback",(()=>{c.idleCallbackHandle=void 0,c.timeoutID=void 0})),l(c,"onPageHide",(()=>{var e;(0,s.cL)("DVWebNode::ImpressionTracker::OnPageHide",1,!1);const t=performance.now();if(!c.currentlyInViewItems)return;const a=Array.from(c.currentlyInViewItems.keys()).map((e=>({isIntersecting:!1,target:e,time:t,intersectionRatio:0,rootBounds:null,intersectionRect:e.getBoundingClientRect(),boundingClientRect:e.getBoundingClientRect()})));null===(e=c.intersectionObserverEntryQueue)||void 0===e||e.push(...a),c.onIdleCallback({didTimeout:!0,timeRemaining:()=>100},!0)}));const d=e=>{const t=null==e?void 0:e.match("[/?&]_?ref=([a-zA-Z0-9-_]+)");return t&&t.length>1?t[1]:((0,s.cL)("DVWebNode::ImpressionTracker::UnknownRef",1,!1),"atv_impression_unknown")}},"./src/widgets/Explore/DraperPlayer/videoContext.ts":(e,t,a)=>{"use strict";a.d(t,{E:()=>r,l:()=>i});var n=a("./node_modules/react/index.js");const r={muted:!0,activeActivePlayer:null,activePassivePlayer:null,fullScreen:!1,updateContext:null},i=n.createContext(r);i.displayName="VideoContext"},"./src/widgets/Explore/Hover/utils.ts":(e,t,a)=>{"use strict";a.d(t,{o6:()=>n,Xe:()=>r,AK:()=>i,Wx:()=>s,Sy:()=>o,j8:()=>c});const n=e=>{var t;const a=null==e?void 0:e.playbackAction;if(!a)return;const n=null==e||null===(t=e.progress)||void 0===t?void 0:t.percentage;return{...a,progress:n}},r=e=>{const t=e&&e.endpoint&&e.endpoint.query&&e.endpoint.query.titleType;if(t){const e=t.toLowerCase();if("season"==e)return"SEASON";if("event"==e)return"LIVEEVENT"}return"UNKNOWN"},i=e=>e&&e.endpoint&&e.endpoint.query&&e.endpoint.query.titleID,s=e=>({onMouseOver:()=>e(!0),onMouseLeave:()=>e(!1),onFocus:()=>e(!0),onBlur:()=>e(!1)}),o=(e,t=0)=>{if(!e)return;const a=(new Date).getTime(),n=e&&e.schedule.sort(((e,t)=>e.start-t.start))||[],r=n.findIndex((e=>e.start<a&&e.end>a));return r>-1?n[r+t]:void 0},l="DVWeb::Hover2019::",c={enrichAttempt:l+"Enrich::Attempt",enrichAttemptInitial:l+"Enrich::Attempt::Initial",enrichComplete:l+"Enrich::Complete",enrichCompleteInitial:l+"Enrich::Complete::Initial",hoverNoEnrich:l+"Hover::NoEnrich",hover:l+"Hover",playerOpened:l+"Playback",mountToFirstEnrich:l+"ToFirstEnrich",fatal:l+"JSFATAL"}},"./node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js":(e,t,a)=>{"use strict";var n=a("./node_modules/react-is/index.js"),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return n.isMemo(e)?s:o[e.$$typeof]||r}o[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[n.Memo]=s;var c=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,m=Object.getPrototypeOf,g=Object.prototype;e.exports=function e(t,a,n){if("string"!=typeof a){if(g){var r=m(a);r&&r!==g&&e(t,r,n)}var s=d(a);u&&(s=s.concat(u(a)));for(var o=l(t),h=l(a),_=0;_<s.length;++_){var f=s[_];if(!(i[f]||n&&n[f]||h&&h[f]||o&&o[f])){var v=p(a,f);try{c(t,f,v)}catch(e){}}}}return t}},"./node_modules/invariant/browser.js":e=>{"use strict";e.exports=function(e,t,a,n,r,i,s,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[a,n,r,i,s,o],d=0;(l=new Error(t.replace(/%s/g,(function(){return c[d++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},"./node_modules/@amzn/dvui/dist/Icons/Edit.css":(e,t,a)=>{"use strict";a.r(t)},"./node_modules/@amzn/dvui/dist/Icons/Help.css":(e,t,a)=>{"use strict";a.r(t)},"./node_modules/@amzn/dvui/dist/Icons/Lightbulb.css":(e,t,a)=>{"use strict";a.r(t)},"./node_modules/@amzn/dvui/dist/Icons/LogoPrimevideoApp.css":(e,t,a)=>{"use strict";a.r(t)},"./node_modules/@amzn/dvui/dist/Icons/Share.css":(e,t,a)=>{"use strict";a.r(t)},"./node_modules/@amzn/dvui/dist/Icons/WatchParty.css":(e,t,a)=>{"use strict";a.r(t)},"./node_modules/@amzn/dvui/dist/MoreContent.css":(e,t,a)=>{"use strict";a.r(t)},"./node_modules/react-is/cjs/react-is.production.min.js":(e,t)=>{"use strict";var a="function"==typeof Symbol&&Symbol.for,n=a?Symbol.for("react.element"):60103,r=a?Symbol.for("react.portal"):60106,i=a?Symbol.for("react.fragment"):60107,s=a?Symbol.for("react.strict_mode"):60108,o=a?Symbol.for("react.profiler"):60114,l=a?Symbol.for("react.provider"):60109,c=a?Symbol.for("react.context"):60110,d=a?Symbol.for("react.async_mode"):60111,u=a?Symbol.for("react.concurrent_mode"):60111,p=a?Symbol.for("react.forward_ref"):60112,m=a?Symbol.for("react.suspense"):60113,g=a?Symbol.for("react.suspense_list"):60120,h=a?Symbol.for("react.memo"):60115,_=a?Symbol.for("react.lazy"):60116,f=a?Symbol.for("react.block"):60121,v=a?Symbol.for("react.fundamental"):60117,b=a?Symbol.for("react.responder"):60118,E=a?Symbol.for("react.scope"):60119;function y(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case d:case u:case i:case o:case s:case m:return e;default:switch(e=e&&e.$$typeof){case c:case p:case _:case h:case l:return e;default:return t}}case r:return t}}}function w(e){return y(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=p,t.Fragment=i,t.Lazy=_,t.Memo=h,t.Portal=r,t.Profiler=o,t.StrictMode=s,t.Suspense=m,t.isAsyncMode=function(e){return w(e)||y(e)===d},t.isConcurrentMode=w,t.isContextConsumer=function(e){return y(e)===c},t.isContextProvider=function(e){return y(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return y(e)===p},t.isFragment=function(e){return y(e)===i},t.isLazy=function(e){return y(e)===_},t.isMemo=function(e){return y(e)===h},t.isPortal=function(e){return y(e)===r},t.isProfiler=function(e){return y(e)===o},t.isStrictMode=function(e){return y(e)===s},t.isSuspense=function(e){return y(e)===m},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===u||e===o||e===s||e===m||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===_||e.$$typeof===h||e.$$typeof===l||e.$$typeof===c||e.$$typeof===p||e.$$typeof===v||e.$$typeof===b||e.$$typeof===E||e.$$typeof===f)},t.typeOf=y},"./node_modules/react-is/index.js":(e,t,a)=>{"use strict";e.exports=a("./node_modules/react-is/cjs/react-is.production.min.js")},"./node_modules/react-redux/es/components/Context.js":(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var n=a("./node_modules/react/index.js").createContext(null)},"./node_modules/react-redux/es/components/Provider.js":(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a("./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),r=a("./node_modules/react/index.js"),i=a("./node_modules/prop-types/index.js"),s=a.n(i),o=a("./node_modules/react-redux/es/components/Context.js"),l=function(e){function t(t){var a;a=e.call(this,t)||this;var n=t.store;return a.state={storeState:n.getState(),store:n},a}(0,n.Z)(t,e);var a=t.prototype;return a.componentDidMount=function(){this._isMounted=!0,this.subscribe()},a.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe(),this._isMounted=!1},a.componentDidUpdate=function(e){this.props.store!==e.store&&(this.unsubscribe&&this.unsubscribe(),this.subscribe())},a.subscribe=function(){var e=this,t=this.props.store;this.unsubscribe=t.subscribe((function(){var a=t.getState();e._isMounted&&e.setState((function(e){return e.storeState===a?null:{storeState:a}}))}));var a=t.getState();a!==this.state.storeState&&this.setState({storeState:a})},a.render=function(){var e=this.props.context||o.E;return r.createElement(e.Provider,{value:this.state},this.props.children)},t}(r.Component);l.propTypes={store:s().shape({subscribe:s().func.isRequired,dispatch:s().func.isRequired,getState:s().func.isRequired}),context:s().object,children:s().any};const c=l},"./node_modules/react-redux/es/components/connectAdvanced.js":(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var n=a("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),r=a("./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),i=a("./node_modules/@babel/runtime/helpers/esm/extends.js"),s=a("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),o=a("./node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js"),l=a.n(o),c=a("./node_modules/invariant/browser.js"),d=a.n(c),u=a("./node_modules/react/index.js"),p=a("./node_modules/react-is/index.js"),m=a("./node_modules/react-redux/es/components/Context.js");function g(e,t){void 0===t&&(t={});var a=t,o=a.getDisplayName,c=void 0===o?function(e){return"ConnectAdvanced("+e+")"}:o,g=a.methodName,h=void 0===g?"connectAdvanced":g,_=a.renderCountProp,f=void 0===_?void 0:_,v=a.shouldHandleStateChanges,b=void 0===v||v,E=a.storeKey,y=void 0===E?"store":E,w=a.withRef,T=void 0!==w&&w,D=a.forwardRef,I=void 0!==D&&D,C=a.context,P=void 0===C?m.E:C,S=(0,s.Z)(a,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);d()(void 0===f,"renderCountProp is removed. render counting is built into the latest React dev tools profiling extension"),d()(!T,"withRef is removed. To access the wrapped instance, use a ref on the connected component");var k="To use a custom Redux store for specific components,  create a custom React context with React.createContext(), and pass the context object to React Redux's Provider and specific components like:  <Provider context={MyContext}><ConnectedComponent context={MyContext} /></Provider>. You may also pass a {context : MyContext} option to connect";d()("store"===y,"storeKey has been removed and does not do anything. "+k);var R=P;return function(t){var a=t.displayName||t.name||"Component",s=c(a),o=(0,i.Z)({},S,{getDisplayName:c,methodName:h,renderCountProp:f,shouldHandleStateChanges:b,storeKey:y,displayName:s,wrappedComponentName:a,WrappedComponent:t}),m=S.pure,g=u.Component;m&&(g=u.PureComponent);var _=function(a){function l(t){var r,s,o,l,c,p,g,h,_,f,v;return r=a.call(this,t)||this,d()(I?!t.wrapperProps[y]:!t[y],"Passing redux store in props has been removed and does not do anything. "+k),r.selectDerivedProps=function(t,a,n,r){if(m&&s===a&&o===t)return l;n===c&&p===r||(c=n,p=r,g=e(n.dispatch,r)),s=a,o=t;var i=g(t,a);return l=i},r.selectChildElement=function(e,t,a){return t===h&&a===_&&v===e||(h=t,_=a,v=e,f=u.createElement(e,(0,i.Z)({},t,{ref:a}))),f},r.indirectRenderWrappedComponent=r.indirectRenderWrappedComponent.bind((0,n.Z)(r)),r}(0,r.Z)(l,a);var c=l.prototype;return c.indirectRenderWrappedComponent=function(e){return this.renderWrappedComponent(e)},c.renderWrappedComponent=function(e){d()(e,'Could not find "store" in the context of "'+s+'". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to '+s+" in connect options.");var a,n=e.storeState,r=e.store,i=this.props;I&&(i=this.props.wrapperProps,a=this.props.forwardedRef);var l=this.selectDerivedProps(n,i,r,o);return this.selectChildElement(t,l,a)},c.render=function(){var e=this.props.context&&this.props.context.Consumer&&(0,p.isContextConsumer)(u.createElement(this.props.context.Consumer,null))?this.props.context:R;return u.createElement(e.Consumer,null,this.indirectRenderWrappedComponent)},l}(g);if(_.WrappedComponent=t,_.displayName=s,I){var v=u.forwardRef((function(e,t){return u.createElement(_,{wrapperProps:e,forwardedRef:t})}));return v.displayName=s,v.WrappedComponent=t,l()(v,t)}return l()(_,t)}}},"./node_modules/react-redux/es/connect/connect.js":(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var n=a("./node_modules/@babel/runtime/helpers/esm/extends.js"),r=a("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"),i=a("./node_modules/react-redux/es/components/connectAdvanced.js"),s=a("./node_modules/react-redux/es/utils/shallowEqual.js"),o=a("./node_modules/react-redux/es/connect/mapDispatchToProps.js"),l=a("./node_modules/react-redux/es/connect/mapStateToProps.js"),c=a("./node_modules/react-redux/es/connect/mergeProps.js"),d=a("./node_modules/react-redux/es/connect/selectorFactory.js");function u(e,t,a){for(var n=t.length-1;n>=0;n--){var r=t[n](e);if(r)return r}return function(t,n){throw new Error("Invalid value of type "+typeof e+" for "+a+" argument when connecting component "+n.wrappedComponentName+".")}}function p(e,t){return e===t}const m=(_=(h=void 0===g?{}:g).connectHOC,f=void 0===_?i.Z:_,v=h.mapStateToPropsFactories,b=void 0===v?l.ZP:v,E=h.mapDispatchToPropsFactories,y=void 0===E?o.ZP:E,w=h.mergePropsFactories,T=void 0===w?c.ZP:w,D=h.selectorFactory,I=void 0===D?d.ZP:D,function(e,t,a,i){void 0===i&&(i={});var o=i,l=o.pure,c=void 0===l||l,d=o.areStatesEqual,m=void 0===d?p:d,g=o.areOwnPropsEqual,h=void 0===g?s.Z:g,_=o.areStatePropsEqual,v=void 0===_?s.Z:_,E=o.areMergedPropsEqual,w=void 0===E?s.Z:E,D=(0,r.Z)(o,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),C=u(e,b,"mapStateToProps"),P=u(t,y,"mapDispatchToProps"),S=u(a,T,"mergeProps");return f(I,(0,n.Z)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:C,initMapDispatchToProps:P,initMergeProps:S,pure:c,areStatesEqual:m,areOwnPropsEqual:h,areStatePropsEqual:v,areMergedPropsEqual:w},D))});var g,h,_,f,v,b,E,y,w,T,D,I},"./node_modules/react-redux/es/connect/mapDispatchToProps.js":(e,t,a)=>{"use strict";a.d(t,{ZP:()=>i});var n=a("./node_modules/redux/es/redux.js"),r=a("./node_modules/react-redux/es/connect/wrapMapToProps.js");const i=[function(e){return"function"==typeof e?(0,r.xv)(e,"mapDispatchToProps"):void 0},function(e){return e?void 0:(0,r.dX)((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?(0,r.dX)((function(t){return(0,n.DE)(e,t)})):void 0}]},"./node_modules/react-redux/es/connect/mapStateToProps.js":(e,t,a)=>{"use strict";a.d(t,{ZP:()=>r});var n=a("./node_modules/react-redux/es/connect/wrapMapToProps.js");const r=[function(e){return"function"==typeof e?(0,n.xv)(e,"mapStateToProps"):void 0},function(e){return e?void 0:(0,n.dX)((function(){return{}}))}]},"./node_modules/react-redux/es/connect/mergeProps.js":(e,t,a)=>{"use strict";a.d(t,{ZP:()=>i});var n=a("./node_modules/@babel/runtime/helpers/esm/extends.js");function r(e,t,a){return(0,n.Z)({},a,e,t)}const i=[function(e){return"function"==typeof e?function(e){return function(t,a){a.displayName;var n,r=a.pure,i=a.areMergedPropsEqual,s=!1;return function(t,a,o){var l=e(t,a,o);return s?r&&i(l,n)||(n=l):(s=!0,n=l),n}}}(e):void 0},function(e){return e?void 0:function(){return r}}]},"./node_modules/react-redux/es/connect/selectorFactory.js":(e,t,a)=>{"use strict";a.d(t,{ZP:()=>s});var n=a("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");function r(e,t,a,n){return function(r,i){return a(e(r,i),t(n,i),i)}}function i(e,t,a,n,r){var i,s,o,l,c,d=r.areStatesEqual,u=r.areOwnPropsEqual,p=r.areStatePropsEqual,m=!1;function g(r,m){var g,h,_=!u(m,s),f=!d(r,i);return i=r,s=m,_&&f?(o=e(i,s),t.dependsOnOwnProps&&(l=t(n,s)),c=a(o,l,s)):_?(e.dependsOnOwnProps&&(o=e(i,s)),t.dependsOnOwnProps&&(l=t(n,s)),c=a(o,l,s)):f?(g=e(i,s),h=!p(g,o),o=g,h&&(c=a(o,l,s)),c):c}return function(r,d){return m?g(r,d):(o=e(i=r,s=d),l=t(n,s),c=a(o,l,s),m=!0,c)}}function s(e,t){var a=t.initMapStateToProps,s=t.initMapDispatchToProps,o=t.initMergeProps,l=(0,n.Z)(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),c=a(e,l),d=s(e,l),u=o(e,l);return(l.pure?i:r)(c,d,u,e,l)}},"./node_modules/react-redux/es/connect/wrapMapToProps.js":(e,t,a)=>{"use strict";function n(e){return function(t,a){var n=e(t,a);function r(){return n}return r.dependsOnOwnProps=!1,r}}function r(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function i(e,t){return function(t,a){a.displayName;var n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,a){n.mapToProps=e,n.dependsOnOwnProps=r(e);var i=n(t,a);return"function"==typeof i&&(n.mapToProps=i,n.dependsOnOwnProps=r(i),i=n(t,a)),i},n}}a.d(t,{dX:()=>n,xv:()=>i})},"./node_modules/react-redux/es/index.js":(e,t,a)=>{"use strict";a.d(t,{zt:()=>n.Z,$j:()=>r.Z});var n=a("./node_modules/react-redux/es/components/Provider.js"),r=(a("./node_modules/react-redux/es/components/connectAdvanced.js"),a("./node_modules/react-redux/es/components/Context.js"),a("./node_modules/react-redux/es/connect/connect.js"))},"./node_modules/react-redux/es/utils/shallowEqual.js":(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=Object.prototype.hasOwnProperty;function r(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function i(e,t){if(r(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(var s=0;s<a.length;s++)if(!n.call(t,a[s])||!r(e[a[s]],t[a[s]]))return!1;return!0}},"./node_modules/redux/es/redux.js":(e,t,a)=>{"use strict";a.d(t,{md:()=>_,DE:()=>u,UY:()=>c,qC:()=>h,MT:()=>o});var n=a("./node_modules/symbol-observable/es/index.js"),r=function(){return Math.random().toString(36).substring(7).split("").join(".")},i={INIT:"@@redux/INIT"+r(),REPLACE:"@@redux/REPLACE"+r(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+r()}};function s(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function o(e,t,a){var r;if("function"==typeof t&&"function"==typeof a||"function"==typeof a&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===a&&(a=t,t=void 0),void 0!==a){if("function"!=typeof a)throw new Error("Expected the enhancer to be a function.");return a(o)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var l=e,c=t,d=[],u=d,p=!1;function m(){u===d&&(u=d.slice())}function g(){if(p)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return c}function h(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(p)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return m(),u.push(e),function(){if(t){if(p)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,m();var a=u.indexOf(e);u.splice(a,1),d=null}}}function _(e){if(!s(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(p)throw new Error("Reducers may not dispatch actions.");try{p=!0,c=l(c,e)}finally{p=!1}for(var t=d=u,a=0;a<t.length;a++){(0,t[a])()}return e}function f(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");l=e,_({type:i.REPLACE})}function v(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function a(){e.next&&e.next(g())}return a(),{unsubscribe:t(a)}}})[n.Z]=function(){return this},e}return _({type:i.INIT}),(r={dispatch:_,subscribe:h,getState:g,replaceReducer:f})[n.Z]=v,r}function l(e,t){var a=t&&t.type;return"Given "+(a&&'action "'+String(a)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function c(e){for(var t=Object.keys(e),a={},n=0;n<t.length;n++){var r=t[n];0,"function"==typeof e[r]&&(a[r]=e[r])}var s,o=Object.keys(a);try{!function(e){Object.keys(e).forEach((function(t){var a=e[t];if(void 0===a(void 0,{type:i.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===a(void 0,{type:i.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+i.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(a)}catch(e){s=e}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var n=!1,r={},i=0;i<o.length;i++){var c=o[i],d=a[c],u=e[c],p=d(u,t);if(void 0===p){var m=l(c,t);throw new Error(m)}r[c]=p,n=n||p!==u}return(n=n||o.length!==Object.keys(e).length)?r:e}}function d(e,t){return function(){return t(e.apply(this,arguments))}}function u(e,t){if("function"==typeof e)return d(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var a={};for(var n in e){var r=e[n];"function"==typeof r&&(a[n]=d(r,t))}return a}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(e,t){var a=Object.keys(e);return Object.getOwnPropertySymbols&&a.push.apply(a,Object.getOwnPropertySymbols(e)),t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(a,!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function _(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return function(){var a=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},r={getState:a.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map((function(e){return e(r)}));return g({},a,{dispatch:n=h.apply(void 0,i)(a.dispatch)})}}}},"./node_modules/reselect/es/index.js":(e,t,a)=>{"use strict";function n(e,t){return e===t}function r(e,t,a){if(null===t||null===a||t.length!==a.length)return!1;for(var n=t.length,r=0;r<n;r++)if(!e(t[r],a[r]))return!1;return!0}function i(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var a=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+a+"]")}return t}function s(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var s=0,o=n.pop(),l=i(n),c=e.apply(void 0,[function(){return s++,o.apply(null,arguments)}].concat(a)),d=e((function(){for(var e=[],t=l.length,a=0;a<t;a++)e.push(l[a].apply(null,arguments));return c.apply(null,e)}));return d.resultFunc=o,d.dependencies=l,d.recomputations=function(){return s},d.resetRecomputations=function(){return s=0},d}}a.d(t,{wN:()=>s,P1:()=>o});var o=s((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,a=null,i=null;return function(){return r(t,a,arguments)||(i=e.apply(null,arguments)),a=arguments,i}}))},"./node_modules/symbol-observable/es/index.js":(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n,r=a("./node_modules/symbol-observable/es/ponyfill.js");n="undefined"!=typeof self?self:"undefined"!=typeof window?window:{__SERVER__:!1,__DEVSERVER__:!1,__NATIVEAPP__:!1,__ES6__:!0,__COMMITHASH__:"410de8ea983bcd12533df4c0bca42f6f216bf138"};const i=(0,r.Z)(n)},"./node_modules/symbol-observable/es/ponyfill.js":(e,t,a)=>{"use strict";function n(e){var t,a=e.Symbol;return"function"==typeof a?a.observable?t=a.observable:(t=a("observable"),a.observable=t):t="@@observable",t}a.d(t,{Z:()=>n})},"./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js":(e,t,a)=>{"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}a.d(t,{Z:()=>n})},"./node_modules/@babel/runtime/helpers/esm/extends.js":(e,t,a)=>{"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},n.apply(this,arguments)}a.d(t,{Z:()=>n})},"./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js":(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a("./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,n.Z)(e,t)}},"./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":(e,t,a)=>{"use strict";function n(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}a.d(t,{Z:()=>n})},"./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js":(e,t,a)=>{"use strict";function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}a.d(t,{Z:()=>n})}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var a=s[e]={exports:{}};return i[e].call(a.exports,a,a.exports,o),a.exports}o.m=i,e=[],o.O=(t,a,n,r)=>{if(!a){var i=1/0;for(d=0;d<e.length;d++){for(var[a,n,r]=e[d],s=!0,l=0;l<a.length;l++)(!1&r||i>=r)&&Object.keys(o.O).every((e=>o.O[e](a[l])))?a.splice(l--,1):(s=!1,r<i&&(i=r));if(s){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,n,r]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,a)=>(o.f[a](e,t),t)),[])),o.u=e=>(({355:"detail-purchase",584:"detail-hover",608:"detail-hero-video",918:"detail-entitlement"}[e]||e)+"."+{355:"aa21ada540e3b9d2b8cc",539:"d74349906cfd7516479d",584:"a10eae395f3b9a0f0e7e",608:"ad28cc184e2f6803c94f",918:"8c2d4e9652e3edaa5bf6"}[e]+".js"),o.miniCssF=e=>({167:"detail",351:"commons",584:"detail-hover",608:"detail-hero-video",918:"detail-entitlement"}[e]+"."+{167:"882b932c54ecf3d40b39",351:"876fcc6cbec0eeabfe92",584:"ff616782e9670f4a7883",608:"b9dfb6fd1be51b40b02a",918:"f45da70dabb568687390"}[e]+".css"),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},a="@amzn/dvwebnode:",o.l=(e,n,r,i)=>{if(t[e])t[e].push(n);else{var s,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==a+r){s=u;break}}if(!s){l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",a+r),s.src=e;var p=s.src.split("/"),m=p[p.length-1].split("."),g=window.DVWEBNODE_MANIFESTS[m[0]+".js"],h=g||window.DVWEBNODE_MANIFESTS[p[p.length-1]],_=o.p+h+(g?"?DVWebNode_"+m[0]:"");s.src=_,s.crossOrigin="anonymous"}t[e]=[n];var f=(a,n)=>{s.onerror=s.onload=null,clearTimeout(v);var r=t[e];if(delete t[e],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(n))),a)return a(n)},v=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),l&&document.head.appendChild(s)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.j=167,o.p="https://m.media-amazon.com/images/I/",n=e=>new Promise(((t,a)=>{var n=o.miniCssF(e),r=o.p+n;if(((e,t)=>{for(var a=document.getElementsByTagName("link"),n=0;n<a.length;n++){var r=(s=a[n]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(r===e||r===t))return s}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){var s;if((r=(s=i[n]).getAttribute("data-href"))===e||r===t)return s}})(n,r))return t();((e,t,a,n)=>{var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.onerror=r.onload=i=>{if(r.onerror=r.onload=null,"load"===i.type)a();else{var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=o,r.parentNode.removeChild(r),n(l)}},r.href=t,function(e){if(e.href){var t=e.href.match(/I\/(.*?)\./)[1]+".css",a=e.href.match(/I\/(.*)\./)[1]+".css";return(window.DVWEBNODE_MANIFESTS[t]||window.DVWEBNODE_MANIFESTS[a])&&(e.href=o.p+(window.DVWEBNODE_MANIFESTS[t]||window.DVWEBNODE_MANIFESTS[a])),document.head.appendChild(e)}document.head.appendChild(e)}(r)})(e,r,t,a)})),r={167:0},o.f.miniCss=(e,t)=>{r[e]?t.push(r[e]):0!==r[e]&&{584:1,608:1,918:1}[e]&&t.push(r[e]=n(e).then((()=>{r[e]=0}),(t=>{throw delete r[e],t})))},(()=>{var e={167:0};o.f.j=(t,a)=>{var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var r=new Promise(((a,r)=>n=e[t]=[a,r]));a.push(n[2]=r);var i=o.p+o.u(t),s=new Error;o.l(i,(a=>{if(o.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,n[1](s)}}),"chunk-"+t,t)}},o.O.j=t=>0===e[t];var t=(t,a)=>{var n,r,[i,s,l]=a,c=0;if(i.some((t=>0!==e[t]))){for(n in s)o.o(s,n)&&(o.m[n]=s[n]);if(l)var d=l(o)}for(t&&t(a);c<i.length;c++)r=i[c],o.o(e,r)&&e[r]&&e[r][0](),e[i[c]]=0;return o.O(d)},a=self.webpackChunk_amzn_dvwebnode=self.webpackChunk_amzn_dvwebnode||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=o.O(void 0,[216,351],(()=>o("./src/entrypoints/hydration/detail.tsx")));l=o.O(l)})();
//# sourceMappingURL=http://sourcemaps.aka.amazon.com/b31a7a1ac8a6f7cbcc9b1e864a3b5c86109871435c4f2c616fb88097eb0ed37269f788fcc7fab143ae00bcc450ba1ba6ede0f48a1dd4ca39a6fed233300bc3e37a4972ab111ef50b01980f5b1440fd320522ffac2d9f20b31134e2aa5a6d1fe471bf5a02cbe2181d9105ade89613a8a6815a503841d61d2569a1b6bdd0741f178569c9b050cfc3c6cb4bdb462a45d303a95f23cbe6278e33222f8e5fe851f97e34d52010986a5b8ec62fe9f0a69be8dde637409a1452d1ac950e986bfedc870940ce8efb557fdcfdb5658e1cdd8231357051d23f9e5557278581950476dc8e3cd01ef08b554fb949c8ba7e21e67f2520de48a770e9fce48364b51ee24deb78f7